<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.553">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>R Training - 06: Reproducible Linear Models</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link href="../../site_libs/tabwid-1.1.3/tabwid.css" rel="stylesheet">

<script src="../../site_libs/tabwid-1.1.3/tabwid.js"></script>

<link href="../../site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">

<script src="../../site_libs/pagedtable-1.1/js/pagedtable.js"></script>


  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">R Training</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="../../tutorials.html" aria-current="page"> 
<span class="menu-text">Tutorials</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../workshops.html"> 
<span class="menu-text">Workshops</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../resources.html"> 
<span class="menu-text">Resources</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="https://canvas.sussex.ac.uk/courses/29761"> 
<span class="menu-text">Canvas</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../tutorials/docs/01_intro.html">Current</a></li><li class="breadcrumb-item"><a href="../../tutorials/docs/06_lm.html">06: Reproducible Linear Models</a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tutorials Overview</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../quick_ref.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Quick Reference</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Current</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/docs/01_intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">01: IntRoduction</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/docs/02_intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">02: IntRoduction II</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/docs/03_datasets.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">03: Datasets</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/docs/04_filter.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">04: Filter and Select</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/docs/05_mutate.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">05: Mutate</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/docs/06_lm.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">06: Reproducible Linear Models</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Archive (Autumn 2023)</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/archive_autumn_2023/00_quick_ref.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Quick Reference</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/archive_autumn_2023/01_02_intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">01/02: IntRoduction</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/archive_autumn_2023/03_datasets.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">03: Datasets</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/archive_autumn_2023/04_lm.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">04: Reporting Linear Models with Quarto</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/archive_autumn_2023/05_filter.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">05: Filter and Select</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/archive_autumn_2023/06_changes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">06: Mutate and Summarise</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/archive_autumn_2023/07_dataviz.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">07: Visualisations</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/archive_autumn_2023/08_analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">08: Analysis</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/archive_autumn_2023/09_testflight.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">09: Test Flight</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/archive_autumn_2023/10_qtrics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">10: Qualtrics and Labelled Data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/archive_autumn_2023/11_qtrics2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">11: Qualtrics II</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#overview" id="toc-overview" class="nav-link active" data-scroll-target="#overview">Overview</a></li>
  <li><a href="#the-linear-model" id="toc-the-linear-model" class="nav-link" data-scroll-target="#the-linear-model">The Linear Model</a>
  <ul>
  <li><a href="#data-and-codebook" id="toc-data-and-codebook" class="nav-link" data-scroll-target="#data-and-codebook">Data and Codebook</a></li>
  <li><a href="#one-predictor" id="toc-one-predictor" class="nav-link" data-scroll-target="#one-predictor">One Predictor</a>
  <ul class="collapse">
  <li><a href="#general-format" id="toc-general-format" class="nav-link" data-scroll-target="#general-format">General Format</a></li>
  <li><a href="#model-fit" id="toc-model-fit" class="nav-link" data-scroll-target="#model-fit">Model Fit</a></li>
  <li><a href="#model-parameters" id="toc-model-parameters" class="nav-link" data-scroll-target="#model-parameters">Model Parameters</a></li>
  </ul></li>
  <li><a href="#hierarchial-models" id="toc-hierarchial-models" class="nav-link" data-scroll-target="#hierarchial-models">Hierarchial Models</a>
  <ul class="collapse">
  <li><a href="#comparing-models" id="toc-comparing-models" class="nav-link" data-scroll-target="#comparing-models">Comparing Models</a></li>
  <li><a href="#standardised-bs" id="toc-standardised-bs" class="nav-link" data-scroll-target="#standardised-bs">Standardised <em>B</em>s</a></li>
  </ul></li>
  <li><a href="#assumptions-checks" id="toc-assumptions-checks" class="nav-link" data-scroll-target="#assumptions-checks">Assumptions Checks</a>
  <ul class="collapse">
  <li><a href="#residual-plots" id="toc-residual-plots" class="nav-link" data-scroll-target="#residual-plots">Residual Plots</a></li>
  <li><a href="#distribution-of-standardised-residuals" id="toc-distribution-of-standardised-residuals" class="nav-link" data-scroll-target="#distribution-of-standardised-residuals">Distribution of Standardised Residuals</a></li>
  </ul></li>
  <li><a href="#robust-models" id="toc-robust-models" class="nav-link" data-scroll-target="#robust-models">Robust Models</a></li>
  </ul></li>
  <li><a href="#exercises" id="toc-exercises" class="nav-link" data-scroll-target="#exercises">Exercises</a></li>
  <li><a href="#reproducible-analysis" id="toc-reproducible-analysis" class="nav-link" data-scroll-target="#reproducible-analysis">Reproducible Analysis</a>
  <ul>
  <li><a href="#same-results" id="toc-same-results" class="nav-link" data-scroll-target="#same-results">Same Results</a></li>
  <li><a href="#correct-analysis" id="toc-correct-analysis" class="nav-link" data-scroll-target="#correct-analysis">Correct Analysis</a></li>
  </ul></li>
  <li><a href="#reproducible-reporting" id="toc-reproducible-reporting" class="nav-link" data-scroll-target="#reproducible-reporting">Reproducible Reporting</a>
  <ul>
  <li><a href="#creating-a-quarto-document" id="toc-creating-a-quarto-document" class="nav-link" data-scroll-target="#creating-a-quarto-document">Creating a Quarto Document</a></li>
  <li><a href="#creating-a-code-chunk" id="toc-creating-a-code-chunk" class="nav-link" data-scroll-target="#creating-a-code-chunk">Creating a Code Chunk</a></li>
  <li><a href="#body-text" id="toc-body-text" class="nav-link" data-scroll-target="#body-text">Body Text</a>
  <ul class="collapse">
  <li><a href="#headings" id="toc-headings" class="nav-link" data-scroll-target="#headings">Headings</a></li>
  <li><a href="#text" id="toc-text" class="nav-link" data-scroll-target="#text">Text</a></li>
  </ul></li>
  <li><a href="#reporting" id="toc-reporting" class="nav-link" data-scroll-target="#reporting">Reporting</a>
  <ul class="collapse">
  <li><a href="#automatic-reporting-with-report" id="toc-automatic-reporting-with-report" class="nav-link" data-scroll-target="#automatic-reporting-with-report">Automatic Reporting with {report}</a></li>
  <li><a href="#inline-reporting-with-papaja" id="toc-inline-reporting-with-papaja" class="nav-link" data-scroll-target="#inline-reporting-with-papaja">Inline Reporting with {papaja}</a></li>
  <li><a href="#fully-custom-reporting" id="toc-fully-custom-reporting" class="nav-link" data-scroll-target="#fully-custom-reporting">Fully Custom Reporting</a></li>
  <li><a href="#table-formatting" id="toc-table-formatting" class="nav-link" data-scroll-target="#table-formatting">Table Formatting</a></li>
  <li><a href="#cross-referencing" id="toc-cross-referencing" class="nav-link" data-scroll-target="#cross-referencing">Cross-Referencing</a></li>
  </ul></li>
  <li><a href="#rendering" id="toc-rendering" class="nav-link" data-scroll-target="#rendering">Rendering</a>
  <ul class="collapse">
  <li><a href="#global-options" id="toc-global-options" class="nav-link" data-scroll-target="#global-options">Global Options</a></li>
  <li><a href="#code-chunk-options" id="toc-code-chunk-options" class="nav-link" data-scroll-target="#code-chunk-options">Code Chunk Options</a></li>
  <li><a href="#output-formats" id="toc-output-formats" class="nav-link" data-scroll-target="#output-formats">Output Formats</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../tutorials/docs/01_intro.html">Current</a></li><li class="breadcrumb-item"><a href="../../tutorials/docs/06_lm.html">06: Reproducible Linear Models</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">06: Reproducible Linear Models</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="overview" class="level2">
<h2 class="anchored" data-anchor-id="overview">Overview</h2>
<p>This tutorial first covers how to run, inspect, and report a linear model in R. We will then look at how to take that code and put together a reproducible document.</p>
</section>
<section id="the-linear-model" class="level2">
<h2 class="anchored" data-anchor-id="the-linear-model">The Linear Model</h2>
<p>In this section, we will walk through the process of fitting, comparing, and reporting hierarchical linear models in R. This is not a statistics tutorial, so there will be minimal detail about how to understand or interpret the output of these commands. Instead, refer to <a href="https://github.com/profandyfield/discovr">Prof Andy Field’s {discovr} tutorials</a>, which are the primary teaching materials for the same content in UG teaching at Sussex. All of the code and interpretation in the following section is from <code>discovr_08</code>, the GLM.</p>
<p>There are two key goals for this linear model walkthrough:</p>
<ul>
<li>Create a detailed “cheatsheet” for a linear model analysis for future reference</li>
<li>Get familiar with the {discovr} tutorials</li>
</ul>
<p>Of the two, the first is more important. I’d strongly recommend you <strong>open</strong> the relevant {discovr} tutorial and skim through it as you go so you’re familiar with what it contains. However, the following sections of this tutorial will present the same code and information with very abbreviated text, to serve as a quick reference.</p>
<p>You can also have them both open at once and refer to each!</p>
<div class="callout callout-style-default callout-tip callout-titled" title="Installing {discovr}">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Installing {discovr}
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>If you are working in the Posit Cloud workspace, the tutorials have already been installed. <strong>Please do NOT reinstall them!</strong></p>
<p>If working elsewhere, use the following code to install the necessary packages <strong>in the Console</strong>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(remotes)){</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">install.packages</span>(<span class="st">'remotes'</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">"profandyfield/discovr"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Note that there’s no need to call <code>library(discovr)</code> at the start of your document, since the tutorials don’t work <em>in</em> the document, but rather in RStudio itself.</p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled" title="Using the {discovr} tutorials">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Using the {discovr} tutorials
</div>
</div>
<div class="callout-body-container callout-body">
<p>Prof Andy Field’s {discovr} tutorials provide detailed walkthroughs of both the R code and the statistical concepts of a variety of statistical analyses. They are a good place to look first to understand what your UG supervisees or advisees have been taught on a particular topic.</p>
<p>The tutorials are built in {learnr}, an interactive platform for learning and running R code. So, unlike the tutorial you’re currently reading, they must be run inside an R session.</p>
<p>To start a tutorial, open any project and click on the Tutorial tab in the Environment pane. You can run any tutorial from here, but the relevant one for the linear modelling we are working on now is <code>discovr_08</code>, “the GLM”. Scroll down to this tutorial and click the “Start Tutorial ▶️” button to load the tutorial.</p>
<p>Because {discovr} tutorials run within R, you don’t need to use any external documents; you can write and run R code within the tutorial itself. However, I <em>strongly</em> recommend that whenever you work with these tutorials, you write and run your code in a separate document, otherwise you will have no record of the code and output.</p>
</div>
</div>
<section id="data-and-codebook" class="level3">
<h3 class="anchored" data-anchor-id="data-and-codebook">Data and Codebook</h3>
<p>Today’s data is the <code>TeachingRatings</code> dataset from the {AER} package. This dataset is built into the package, so you don’t need to read it in from anywhere.</p>
<div class="callout callout-style-simple callout-note no-icon callout-titled" title="Exercise">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
</div>
<div class="callout-body-container callout-body">
<p>Use the code below to get the data and rename it <code>teach_tib</code> (not necessary, just easier to type!).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">"TeachingRatings"</span>, <span class="at">package =</span> <span class="st">"AER"</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>teach_tib <span class="ot">&lt;-</span> TeachingRatings</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled" title="Installing {AER}">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Installing {AER}
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>As usual, no need to install anything on the Cloud, but elsewhere install {AER} first in the Console:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"AER"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>You can load the codebook in the Help viewer by running the following in the Console:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>?AER<span class="sc">::</span>TeachingRatings</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="one-predictor" class="level3">
<h3 class="anchored" data-anchor-id="one-predictor">One Predictor</h3>
<p>Now that we have some data, we can fit our first model with a single predictor. We will do this with the very hardworking <code>lm()</code> function in R, standing for “<strong>l</strong>inear <strong>m</strong> odel”.</p>
<section id="general-format" class="level4">
<h4 class="anchored" data-anchor-id="general-format">General Format</h4>
<p>The <code>lm()</code> function has <em>a lot</em> of options (as you might expect, given the versatility and ubiquity of linear models!), but its basic format to fit a linear model with a single predictor is very simple:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lm</span>(outcome <span class="sc">~</span> predictor, <span class="at">data =</span> dataset_name)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>In this function, <code>outcome ~ predictor</code> is a formula expressing a (simplified version of) the linear model equation. Here, <code>outcome</code> is the name of the variable in <code>dataset_name</code> that contains the outcome or dependent variable <em>y</em>, and <code>predictor</code> is the name of the variable that contains the predictor or independent variable <em>x</em>.</p>
<p>Using the Codebook, let’s begin by fitting a linear model predicting teaching evaluation score from beauty ratings. As we will be making frequent use of it, we will also store the resulting model in a new object, using the convention of adding <code>_lm</code> to the end of the object name to denote a LM model object.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>eval_lm <span class="ot">&lt;-</span> <span class="fu">lm</span>(eval <span class="sc">~</span> gender, <span class="at">data =</span> teach_tib)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now we have a new object that contains all the information about our model. We could simply call the name of this object, but the output doesn’t tell us anything besides the actual value of the <em>b</em> estimates (try it if you like). Instead, we’ll use some useful functions from the {tidyverse} package {broom} to get the information we need.</p>
</section>
<section id="model-fit" class="level4">
<h4 class="anchored" data-anchor-id="model-fit">Model Fit</h4>
<p>To get some common measures of model fit, we can use the function <code>broom::glance()</code>. The output includes <span class="math inline">\(R^2\)</span>, adjusted <span class="math inline">\(R^2\)</span>, and <em>F</em> and accompanying statistics in comparison to the null model (the mean of the outcome alone).</p>
<div class="cell" data-df-print="paged">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>broom<span class="sc">::</span><span class="fu">glance</span>(eval_lm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["r.squared"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["adj.r.squared"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["sigma"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["statistic"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["df"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["logLik"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["AIC"],"name":[8],"type":["dbl"],"align":["right"]},{"label":["BIC"],"name":[9],"type":["dbl"],"align":["right"]},{"label":["deviance"],"name":[10],"type":["dbl"],"align":["right"]},{"label":["df.residual"],"name":[11],"type":["int"],"align":["right"]},{"label":["nobs"],"name":[12],"type":["int"],"align":["right"]}],"data":[{"1":"0.0223981","2":"0.02027749","3":"0.5492111","4":"10.5621","5":"0.001238761","6":"1","7":"-378.5033","8":"763.0065","9":"775.4197","10":"139.0527","11":"461","12":"463"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Helpfully, <code>broom::glance()</code> (and many other {tidyverse} functions) output tibbles, which means we can work with them as we already know how to do.</p>
</section>
<section id="model-parameters" class="level4">
<h4 class="anchored" data-anchor-id="model-parameters">Model Parameters</h4>
<p>The most common technique for getting a look at the details of the model is to use a function we’ve met before: <code>summary()</code>. The output isn’t great, but it does let us get a whole bunch of useful information quickly and directly.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(eval_lm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = eval ~ gender, data = teach_tib)

Residuals:
     Min       1Q   Median       3Q      Max 
-1.96903 -0.36903  0.03097  0.43097  0.99897 

Coefficients:
             Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)   4.06903    0.03355  121.29  &lt; 2e-16 ***
genderfemale -0.16800    0.05169   -3.25  0.00124 ** 
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.5492 on 461 degrees of freedom
Multiple R-squared:  0.0224,    Adjusted R-squared:  0.02028 
F-statistic: 10.56 on 1 and 461 DF,  p-value: 0.001239</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled" title="Significance Codes">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-5-contents" aria-controls="callout-5" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Significance Codes
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-5" class="callout-5-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>The output from many base-R {stats} functions, like this <code>summary()</code> output, include a line labeled <code>Signif. codes</code> that provide a key for understanding the notation given for significance levels in <em>p</em>-values.</p>
<p>Reading the key from left to right, we can see that a result is given three asterisks (<code>***</code>) when the <em>p</em>-value is between 0 and .001; two asterisks between .001 and .01; and so on.</p>
<p>This can be a useful visual check, especially because <em>p</em>-values that are very, very small are frequently expressed in scientific notation, which can make them more difficult to spot.</p>
</div>
</div>
</div>
<p>To get information about the <em>b</em> estimates for individual predictors, we can also use the function <code>broom::tidy()</code>. We could run this function without any other information, as we did with <code>glance()</code> above, but we’ll change one argument here in order to get 95% confidence intervals for <em>b</em> in the output as well.</p>
<p>The CIs are an improvement over <code>summary()</code>, and this information is a tibble rather than just text output, which makes it much easier to work with and report programmatically.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>broom<span class="sc">::</span><span class="fu">tidy</span>(eval_lm, </span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>            <span class="do">## Include confidence intervals</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">conf.int =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["term"],"name":[1],"type":["chr"],"align":["left"]},{"label":["estimate"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["std.error"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["statistic"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["conf.low"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["conf.high"],"name":[7],"type":["dbl"],"align":["right"]}],"data":[{"1":"(Intercept)","2":"4.0690299","3":"0.03354841","4":"121.288313","5":"0.000000000","6":"4.0031031","7":"4.13495661"},{"1":"genderfemale","2":"-0.1680042","3":"0.05169459","4":"-3.249938","5":"0.001238761","6":"-0.2695905","7":"-0.06641797"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled" title="MoRe About: What is the 'statistic'?">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-6-contents" aria-controls="callout-6" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
MoRe About: What is the ‘statistic’?
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-6" class="callout-6-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>You might notice that the output from <code>glance()</code> and <code>tidy()</code> give quite generic column names. Both include a column called “statistic”, and it’s not immediately clear at a glance which of the many test statistics this might be.</p>
<p>Just as a reminder, the “statistic” in the <code>glance()</code> output is the <em>F</em>-statistic for the test comparing the given model to the null model (with no predictors); and the “statistic” in the <code>tidy()</code> output is the <em>t</em>-statistic for the test comparing each <em>b</em>-value to 0.</p>
<p>You can get to this in the help documentation, but it’s a few levels down in the documentation for each function under “Methods”. Since we’re using each of these generic functions on the <code>lm</code> class of object, you’ll need to look under (or search the help documentation for) <code>glance.lm</code> and <code>tidy.lm</code> to get the specific information about the output for linear models.</p>
</div>
</div>
</div>
<p>One thing to notice immediately is that we have easily included a categorical variable <code>gender</code> in the model. R clearly has no problem with this and happily produces the output. But how can we interpret the <code>genderfemale</code> term?</p>
<p>First, for categorical variables, R will automatically assign a baseline or reference category which will depend on the type of data that you have. Here, our <code>gender</code> variable is already a factor, which is a good thing:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>teach_tib <span class="sc">|&gt;</span> </span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">pull</span>(gender) <span class="sc">|&gt;</span> </span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">class</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "factor"</code></pre>
</div>
</div>
<p>Why is the factor data type a good thing? For factors, R will always set the reference category to be the first level of this factor. If we have a look at the factor levels:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>teach_tib <span class="sc">|&gt;</span> </span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">pull</span>(gender) <span class="sc">|&gt;</span> </span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">levels</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "male"   "female"</code></pre>
</div>
</div>
<p>We can see that the levels are ordered “male” first and “female” second. This means “male” is the baseline or reference category.</p>
<p>So, what is up with the <code>genderfemale</code> term in the output? The <em>b</em> in our linear model output quantifies the mean change in the outcome between categories. So, specifically here, mean teaching evaluations change by -0.17 when we change from looking at male teachers to female teachers. The name of the term is concatenated from the name of the predictor (<code>gender</code>) and the category we are changing <em>to</em> (<code>female</code>) from the baseline. Unfortunately, the baseline category is not explicitly stated in the output!</p>
<div class="repro">
<div class="repro-header">
<div class="repro-icon">

</div>
<p>RepRoducibility: Order of Categories</p>
</div>
<div class="repro-body">
<p>Above we said that it was a “good thing” that the categorical <code>gender</code> variable is a factor variable. This is because factors are the “correct” data type for categorical data in R - “correct” as in best practice. To see why, let’s look at a situation where we instead have <code>gender</code> as a character variable type.</p>
<p>First, let’s create a new character version of the <code>gender</code> variable, which will remove all the information about factor levels leaving only the strings behind.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>teach_tib <span class="ot">&lt;-</span> teach_tib <span class="sc">|&gt;</span> </span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">gender_chr =</span> <span class="fu">as.character</span>(gender)</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now, let’s fit the same model as above, but with the new character version of the <code>gender</code> variable, and have a look at it.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>teach_tib <span class="sc">|&gt;</span> </span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Fit the model using the character variable</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">lm</span>(eval <span class="sc">~</span> gender_chr, <span class="at">data =</span> _) <span class="sc">|&gt;</span> </span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Pass the model to tidy</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>  broom<span class="sc">::</span><span class="fu">tidy</span>(<span class="at">conf.int =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["term"],"name":[1],"type":["chr"],"align":["left"]},{"label":["estimate"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["std.error"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["statistic"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["conf.low"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["conf.high"],"name":[7],"type":["dbl"],"align":["right"]}],"data":[{"1":"(Intercept)","2":"3.9010256","3":"0.03932982","4":"99.187466","5":"4.093229e-313","6":"3.82373769","7":"3.9783136"},{"1":"gender_chrmale","2":"0.1680042","3":"0.05169459","4":"3.249938","5":"1.238761e-03","6":"0.06641797","7":"0.2695905"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>In this output, <strong>the reference category has switched</strong>, and is now <code>female</code>. This is because for character data, R assigns the baseline category <em>alphabetically</em>, and “f” (for “female”) comes before “m” (for “male”). The <em>b</em> for the same row has the same value, but is now positive instead of negative. This is because we have only two categories in this variable, but for variables with more than two categories, this could have completely changed the analysis we were doing!</p>
<p>This is why, although R <em>can</em> do linear modeling with character variables, it’s <em>strongly</em> recommended to always turn categorical variables into factors. This allows you to set the comparisons you want to make, instead of trusting R to make the decisions for you; and reduces the risk of your analysis and results changing unexpectedly due to easily missable metadata niggles.</p>
<p>We’ll look at another example of this when we talk more further down about <a href="#reproducible-analysis">reproducible analysis</a>.</p>
</div>
</div>
</section>
</section>
<section id="hierarchial-models" class="level3">
<h3 class="anchored" data-anchor-id="hierarchial-models">Hierarchial Models</h3>
<p>Next, we may want to test the addition of further predictors in the model. We can then compare the more complex multi-predictor model to the single-predictor model.</p>
<p>So, let’s fit a linear model with teaching evaluations as the outcome, and both beauty ratings and gender as predictors, save the model output in a new object called <code>eval_full_lm</code>, and obtain fit statistics and model parameters. To add a new predictor, we need only add it (<code>+</code>) to the formula.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Fit a new model with two predictors</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>eval_full_lm <span class="ot">&lt;-</span> <span class="fu">lm</span>(eval <span class="sc">~</span> gender <span class="sc">+</span> beauty, <span class="at">data =</span> teach_tib)</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="do">## Simple output with summary</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(eval_full_lm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = eval ~ gender + beauty, data = teach_tib)

Residuals:
     Min       1Q   Median       3Q      Max 
-1.87196 -0.36913  0.03493  0.39919  1.03237 

Coefficients:
             Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)   4.08158    0.03293  123.94  &lt; 2e-16 ***
genderfemale -0.19781    0.05098   -3.88  0.00012 ***
beauty        0.14859    0.03195    4.65 4.34e-06 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.5373 on 460 degrees of freedom
Multiple R-squared:  0.0663,    Adjusted R-squared:  0.06224 
F-statistic: 16.33 on 2 and 460 DF,  p-value: 1.407e-07</code></pre>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Tibble output and CIs with broom</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>broom<span class="sc">::</span><span class="fu">glance</span>(eval_full_lm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["r.squared"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["adj.r.squared"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["sigma"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["statistic"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["df"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["logLik"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["AIC"],"name":[8],"type":["dbl"],"align":["right"]},{"label":["BIC"],"name":[9],"type":["dbl"],"align":["right"]},{"label":["deviance"],"name":[10],"type":["dbl"],"align":["right"]},{"label":["df.residual"],"name":[11],"type":["int"],"align":["right"]},{"label":["nobs"],"name":[12],"type":["int"],"align":["right"]}],"data":[{"1":"0.0662953","2":"0.06223572","3":"0.537322","4":"16.33056","5":"1.406679e-07","6":"2","7":"-367.8676","8":"743.7352","9":"760.2862","10":"132.8089","11":"460","12":"463"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>broom<span class="sc">::</span><span class="fu">tidy</span>(eval_full_lm, <span class="at">conf.int =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["term"],"name":[1],"type":["chr"],"align":["left"]},{"label":["estimate"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["std.error"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["statistic"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["conf.low"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["conf.high"],"name":[7],"type":["dbl"],"align":["right"]}],"data":[{"1":"(Intercept)","2":"4.0815829","3":"0.03293298","4":"123.936050","5":"0.000000e+00","6":"4.01686514","7":"4.14630059"},{"1":"genderfemale","2":"-0.1978096","3":"0.05098001","4":"-3.880140","5":"1.196428e-04","6":"-0.29799217","7":"-0.09762702"},{"1":"beauty","2":"0.1485876","3":"0.03195142","4":"4.650424","5":"4.335250e-06","6":"0.08579881","7":"0.21137646"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled" title="What About Interactions?">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-7-contents" aria-controls="callout-7" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
What About Interactions?
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-7" class="callout-7-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>The models we’re describing here contain only additions, not interactions. So, you may be wondering, “What if I want to model more complex relationships between predictors?” If that’s what you’re trying to do now, you may want to jump ahead to <code>discovr_10</code> for moderation and mediation.</p>
<p>Otherwise, we will get there in this course eventually!</p>
</div>
</div>
</div>
<section id="comparing-models" class="level4">
<h4 class="anchored" data-anchor-id="comparing-models">Comparing Models</h4>
<p>Now we have two models, one simpler with only a single predictor, and the other with two predictors. We might next want to test whether the more complex, two-predictor model is a significant improvement over the simpler model, in order to decide which model to retain. We can do this with the <code>anova()</code> function<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> to compare the two models.</p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>The <code>anova()</code> function will only work for model comparison for particular models.</p>
<ol type="1">
<li><p><strong>The models must be hierarchical.</strong> That is, the more complex model(s) must contain all of the predictor(s) present in the less complex model(s).</p></li>
<li><p><strong>All models must be fit to the same dataset.</strong> If, for example, your first predictor has no missing values, but your second predictor had one, the model with using the second predictor would have been fit to a dataset of a different size than the model using only the first, and the <code>anova()</code> function will throw an error to this effect.</p></li>
</ol>
<p>If you encounter this issue, you may need to <a href="../../tutorials/docs/04_filter.html">inspect and clean your dataset</a> before you proceed with analysis!</p>
</div>
</div>
<p>To compare the two models, we put both model objects into the <code>anova()</code> function to find out which model to retain.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">anova</span>(eval_lm, eval_full_lm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["Res.Df"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["RSS"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["Df"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["Sum of Sq"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["F"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["Pr(>F)"],"name":[6],"type":["dbl"],"align":["right"]}],"data":[{"1":"461","2":"139.0527","3":"NA","4":"NA","5":"NA","6":"NA","_rn_":"1"},{"1":"460","2":"132.8089","3":"1","4":"6.243877","5":"21.62644","6":"4.33525e-06","_rn_":"2"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>The <em>F</em>-test is significant, indicating that the more complex two-predictor model is a significant improvement over the one-predictor model, so we will proceed with the two-predictor model.</p>
</section>
<section id="standardised-bs" class="level4">
<h4 class="anchored" data-anchor-id="standardised-bs">Standardised <em>B</em>s</h4>
<p>You may have noticed that the output we’ve seen so for only contains <em>un</em>standardised model parameter estimates. If we want standardised <em>B</em>s expressing the relationship between predictor(s) and outcome in standard deviation units, we can make use of the <code>model_parameters()</code> function from the {parameters} package to standardise our <em>b</em>s. To do this, we can use the <code>standarize = "refit"</code> argument, which will convert the <em>b</em>s.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>parameters<span class="sc">::</span><span class="fu">model_parameters</span>(eval_full_lm, <span class="at">standardize =</span> <span class="st">"refit"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Parameter"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Coefficient"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["SE"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["CI"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["CI_low"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["CI_high"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["t"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["df_error"],"name":[8],"type":["int"],"align":["right"]},{"label":["p"],"name":[9],"type":["dbl"],"align":["right"]}],"data":[{"1":"(Intercept)","2":"0.1501458","3":"0.05935307","4":"0.95","5":"0.03350904","6":"0.2667826","7":"2.529706","8":"460","9":"1.174865e-02"},{"1":"genderfemale","2":"-0.3565000","3":"0.09187813","4":"0.95","5":"-0.53705292","6":"-0.1759472","7":"-3.880140","8":"460","9":"1.196428e-04"},{"1":"beauty","2":"0.2111922","3":"0.04541354","4":"0.95","5":"0.12194851","6":"0.3004359","7":"4.650424","8":"460","9":"4.335250e-06"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>Note the spelling of <code>standardize</code> with a “z”! Spelling it with an “s” will <strong>not</strong> rescale the parameter estimates.</p>
</div>
</div>
</section>
</section>
<section id="assumptions-checks" class="level3">
<h3 class="anchored" data-anchor-id="assumptions-checks">Assumptions Checks</h3>
<p>At Sussex, we teach a range of model diagnostics and robust model sensitivity tests in order to test model assumptions. We will look briefly at each of these in turn.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>Remember, there are more examples and longer explanations in the <code>discovr_08</code> tutorial!</p>
</div>
</div>
<section id="residual-plots" class="level4">
<h4 class="anchored" data-anchor-id="residual-plots">Residual Plots</h4>
<p>To begin, we can generate nicely formatted, customisable residual plots, using the function <code>ggplot2::autoplot()</code>. However, it is <strong>essential</strong> to load the {ggfortify} package in order for this to work.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggfortify)</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">autoplot</span>(eval_full_lm, </span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>                  <span class="do">## Specify plots to include</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>                  <span class="at">which =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">4</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="06_lm_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>If you’re wondering what’s up with <code>which</code>, the <code>plot()</code> function that <code>autoplot()</code> is based on has a total of six plots available. Here I’ve chosen the two residual plots, the normal Q-Q and the Cook’s distance plot. Plots 5 and 6 have to do with leverage, which we don’t teach at UG level. To see them, simply add them to the <code>which =</code> argument inside <code>c()</code>.</p>
<p>If you want to customise the theme or look of these plots further, they are built with {ggplot2} so you can add or change anything about them using that package. We will come round later to a detailed exploration of data visualisations with {ggplot2} in a future tutorial.</p>
</section>
<section id="distribution-of-standardised-residuals" class="level4">
<h4 class="anchored" data-anchor-id="distribution-of-standardised-residuals">Distribution of Standardised Residuals</h4>
<p>In the UG core statistics modules at Sussex, we teach that normality is the least important of the assumptions of the linear model - the most important being additivity and linearity - so we do not generally worry too much about normally distributed standardised residuals, especially in large sample sizes. However, we do teach them how to evaluate the proportion of standardised residuals with values above ±1.96 (approximately 5%), ±2.56 (approximately 1%), and above ±3 (likely an outlier). For details on how to use <code>broom::augment()</code> to obtain standardised residuals and other model diagnostic measures like Cook’s distance, see the <code>discovr_08</code> tutorial.</p>
</section>
</section>
<section id="robust-models" class="level3">
<h3 class="anchored" data-anchor-id="robust-models">Robust Models</h3>
<p>At UG level, we teach robust models for two purposes:</p>
<ol type="1">
<li><strong>As sensitivity tests</strong> to check assumptions. If a robust technique that adjusts for a particular issue, such as heteroscedasticity, results in a model that is substantially different from the unadjusted model, we might conclude that the unadjusted model did in fact have that particular issue.</li>
<li><strong>As robust alternatives</strong> to the unadjusted model.</li>
</ol>
<p>The <code>discovr_08</code> tutorial covers three types of robust models to explore. For each model, we will fit the new robust model and compare its output to the unadjusted model.</p>
<ol type="1">
<li>Robust parameter estimates</li>
<li>Robust CIs and <em>p</em>-values</li>
<li>Bootstrapped CIs</li>
</ol>
<p>The following code contains all four models, separated with <code>cat()</code> text to keep track of which is which in the output.</p>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-15"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-15-1"><a href="#annotated-cell-15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Unadjusted model"</span>)</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-15" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-15-2" class="code-annotation-target"><a href="#annotated-cell-15-2" aria-hidden="true" tabindex="-1"></a>broom<span class="sc">::</span><span class="fu">tidy</span>(eval_full_lm, <span class="at">conf.int =</span> <span class="cn">TRUE</span>)</span>
<span id="annotated-cell-15-3"><a href="#annotated-cell-15-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-15-4"><a href="#annotated-cell-15-4" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n\n</span><span class="st">Robust parameter estimates"</span>)</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-15" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-15-5" class="code-annotation-target"><a href="#annotated-cell-15-5" aria-hidden="true" tabindex="-1"></a>eval_lm_rob <span class="ot">&lt;-</span> robust<span class="sc">::</span><span class="fu">lmRob</span>(eval <span class="sc">~</span> beauty <span class="sc">+</span> gender, <span class="at">data =</span> teach_tib)</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-15" data-target-annotation="3" onclick="event.preventDefault();">3</a><span id="annotated-cell-15-6" class="code-annotation-target"><a href="#annotated-cell-15-6" aria-hidden="true" tabindex="-1"></a>broom<span class="sc">::</span><span class="fu">tidy</span>(eval_lm_rob, <span class="at">conf.int =</span> <span class="cn">TRUE</span>)</span>
<span id="annotated-cell-15-7"><a href="#annotated-cell-15-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-15-8"><a href="#annotated-cell-15-8" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n\n</span><span class="st">Robust CIs and p-values"</span>) </span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-15" data-target-annotation="4" onclick="event.preventDefault();">4</a><span id="annotated-cell-15-9" class="code-annotation-target"><a href="#annotated-cell-15-9" aria-hidden="true" tabindex="-1"></a>parameters<span class="sc">::</span><span class="fu">model_parameters</span>(eval_full_lm, <span class="at">vcov =</span> <span class="st">"HC4"</span>)</span>
<span id="annotated-cell-15-10"><a href="#annotated-cell-15-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-15-11"><a href="#annotated-cell-15-11" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n\n</span><span class="st">Bootstrapped CIs"</span>)</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-15" data-target-annotation="5" onclick="event.preventDefault();">5</a><span id="annotated-cell-15-12" class="code-annotation-target"><a href="#annotated-cell-15-12" aria-hidden="true" tabindex="-1"></a>parameters<span class="sc">::</span><span class="fu">model_parameters</span>(eval_full_lm, <span class="at">bootstrap =</span> <span class="cn">TRUE</span>)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-15" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-15" data-code-lines="2" data-code-annotation="1">Print out the tidied unadjusted model, for reference.</span>
</dd>
<dt data-target-cell="annotated-cell-15" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-15" data-code-lines="5" data-code-annotation="2">Create the model with robust parameter estimates and save in a new object.</span>
</dd>
<dt data-target-cell="annotated-cell-15" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-15" data-code-lines="6" data-code-annotation="3">Print out the tidied robust parameters model to compare.</span>
</dd>
<dt data-target-cell="annotated-cell-15" data-target-annotation="4">4</dt>
<dd>
<span data-code-cell="annotated-cell-15" data-code-lines="9" data-code-annotation="4">Fit a model with robust CIs and <em>p</em>-values and print out to compare.</span>
</dd>
<dt data-target-cell="annotated-cell-15" data-target-annotation="5">5</dt>
<dd>
<span data-code-cell="annotated-cell-15" data-code-lines="12" data-code-annotation="5">Fit a model with bootstrapped CIs and print out to compare.</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Unadjusted model</code></pre>
</div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["term"],"name":[1],"type":["chr"],"align":["left"]},{"label":["estimate"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["std.error"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["statistic"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["conf.low"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["conf.high"],"name":[7],"type":["dbl"],"align":["right"]}],"data":[{"1":"(Intercept)","2":"4.0815829","3":"0.03293298","4":"123.936050","5":"0.000000e+00","6":"4.01686514","7":"4.14630059"},{"1":"genderfemale","2":"-0.1978096","3":"0.05098001","4":"-3.880140","5":"1.196428e-04","6":"-0.29799217","7":"-0.09762702"},{"1":"beauty","2":"0.1485876","3":"0.03195142","4":"4.650424","5":"4.335250e-06","6":"0.08579881","7":"0.21137646"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>

Robust parameter estimates</code></pre>
</div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["term"],"name":[1],"type":["chr"],"align":["left"]},{"label":["estimate"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["std.error"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["statistic"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"(Intercept)","2":"4.1044493","3":"0.03362548","4":"122.063650","5":"0.000000e+00"},{"1":"beauty","2":"0.1387792","3":"0.03266064","4":"4.249128","5":"2.599099e-05"},{"1":"genderfemale","2":"-0.2070840","3":"0.05192907","4":"-3.987824","5":"7.755041e-05"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>

Robust CIs and p-values</code></pre>
</div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Parameter"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Coefficient"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["SE"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["CI"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["CI_low"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["CI_high"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["t"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["df_error"],"name":[8],"type":["int"],"align":["right"]},{"label":["p"],"name":[9],"type":["dbl"],"align":["right"]}],"data":[{"1":"(Intercept)","2":"4.0815829","3":"0.03257954","4":"0.95","5":"4.01755969","6":"4.14560604","7":"125.280564","8":"460","9":"0.000000e+00"},{"1":"genderfemale","2":"-0.1978096","3":"0.05025302","4":"0.95","5":"-0.29656354","6":"-0.09905566","7":"-3.936273","8":"460","9":"9.555794e-05"},{"1":"beauty","2":"0.1485876","3":"0.03236206","4":"0.95","5":"0.08499183","6":"0.21218344","7":"4.591414","8":"460","9":"5.689289e-06"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>

Bootstrapped CIs</code></pre>
</div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Parameter"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Coefficient"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["CI"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["CI_low"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["CI_high"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["p"],"name":[6],"type":["dbl"],"align":["right"]}],"data":[{"1":"(Intercept)","2":"4.0834118","3":"0.95","4":"4.01766232","5":"4.14379434","6":"0"},{"1":"genderfemale","2":"-0.1987960","3":"0.95","4":"-0.29362625","5":"-0.09348544","6":"0"},{"1":"beauty","2":"0.1480709","3":"0.95","4":"0.08229147","5":"0.20798354","6":"0"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Comparing the robust models to the unadjusted models, we can see that there are no major changes. So, the parameter estimates are highly similar, the CIs and <em>p</em>s nearly the same, and none of our estimates or inferential conclusions would change noticeably between the adjusted and any of the robust models. So, the evidence of our checks suggests that the original, unadjusted model was not unduly biased.</p>
</section>
</section>
<section id="exercises" class="level2">
<h2 class="anchored" data-anchor-id="exercises">Exercises</h2>
<p>That was quite a whirlwind tour of the basics of linear models in R. The following exercises walk you through the same process again with different predictors, so that you have both practice with writing and using the code and a copy of that code in your workbook for future reference.</p>
<p>For these exercises, we’ll use the <code>syn_data</code> dataset, which we encountered in tutorial 03, to do some analysis.</p>
<div class="callout callout-style-simple callout-note no-icon callout-titled" title="Exercise">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
</div>
<div class="callout-body-container callout-body">
<p>Read in the <code>syn_data</code> dataset in the <code>data</code> folder and save it in the object <code>syn_data</code>.</p>
<div class="callout callout-style-default callout-note callout-titled" title="Solution">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-11-contents" aria-controls="callout-11" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-11" class="callout-11-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>syn_data <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"data/syn_data.csv"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="callout callout-style-simple callout-note no-icon callout-titled" title="Exercise">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
</div>
<div class="callout-body-container callout-body">
<p>Fit a single-predictor linear model, with <code>scsq_imagery</code> as the outcome and <code>scsq_techspace</code> as the predictor. Obtain model parameters and fit statistics for this model.</p>
<div class="callout callout-style-default callout-note callout-titled" title="Solution">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-13-contents" aria-controls="callout-13" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-13" class="callout-13-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>syn_lm <span class="ot">&lt;-</span> <span class="fu">lm</span>(scsq_imagery <span class="sc">~</span> scsq_techspace, <span class="at">data =</span> syn_data)</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="do">## Simple summary</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(syn_lm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = scsq_imagery ~ scsq_techspace, data = syn_data)

Residuals:
     Min       1Q   Median       3Q      Max 
-2.39017 -0.31185  0.03999  0.35173  1.37621 

Coefficients:
               Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)     3.41125    0.07073  48.232  &lt; 2e-16 ***
scsq_techspace  0.10627    0.02415   4.401 1.17e-05 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.5306 on 1209 degrees of freedom
Multiple R-squared:  0.01576,   Adjusted R-squared:  0.01495 
F-statistic: 19.36 on 1 and 1209 DF,  p-value: 1.175e-05</code></pre>
</div>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Tidy summaries</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>broom<span class="sc">::</span><span class="fu">glance</span>(syn_lm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["r.squared"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["adj.r.squared"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["sigma"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["statistic"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["df"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["logLik"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["AIC"],"name":[8],"type":["dbl"],"align":["right"]},{"label":["BIC"],"name":[9],"type":["dbl"],"align":["right"]},{"label":["deviance"],"name":[10],"type":["dbl"],"align":["right"]},{"label":["df.residual"],"name":[11],"type":["int"],"align":["right"]},{"label":["nobs"],"name":[12],"type":["int"],"align":["right"]}],"data":[{"1":"0.01576482","2":"0.01495073","3":"0.5305546","4":"19.36495","5":"1.174939e-05","6":"1","7":"-949.7627","8":"1905.525","9":"1920.823","10":"340.3192","11":"1209","12":"1211"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>broom<span class="sc">::</span><span class="fu">tidy</span>(syn_lm, <span class="at">conf.int =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["term"],"name":[1],"type":["chr"],"align":["left"]},{"label":["estimate"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["std.error"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["statistic"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["conf.low"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["conf.high"],"name":[7],"type":["dbl"],"align":["right"]}],"data":[{"1":"(Intercept)","2":"3.411253","3":"0.07072588","4":"48.232036","5":"5.651564e-284","6":"3.2724939","7":"3.5500121"},{"1":"scsq_techspace","2":"0.106269","3":"0.02414897","4":"4.400562","5":"1.174939e-05","6":"0.0588905","7":"0.1536476"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="callout callout-style-simple callout-note no-icon callout-titled" title="Exercise">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
</div>
<div class="callout-body-container callout-body">
<p>Add <code>syn</code> and <code>scsq_language</code> to create a new model with three predictors. Obtain model parameters, fit statistics, and standardised <em>b</em>s.</p>
<p>Then, decide which model is better, the first or second model.</p>
<div class="callout callout-style-default callout-note callout-titled" title="Solution">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-15-contents" aria-controls="callout-15" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-15" class="callout-15-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>syn_full_lm <span class="ot">&lt;-</span> <span class="fu">lm</span>(scsq_imagery <span class="sc">~</span> scsq_techspace <span class="sc">+</span> syn <span class="sc">+</span> scsq_language, <span class="at">data =</span> syn_data)</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(syn_full_lm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = scsq_imagery ~ scsq_techspace + syn + scsq_language, 
    data = syn_data)

Residuals:
    Min      1Q  Median      3Q     Max 
-2.4104 -0.2968  0.0411  0.3458  1.2479 

Coefficients:
               Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)     3.12191    0.09573  32.611  &lt; 2e-16 ***
scsq_techspace  0.08008    0.02335   3.430 0.000625 ***
synYes          0.38827    0.05060   7.673 3.45e-14 ***
scsq_language   0.09088    0.02006   4.530 6.48e-06 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.5099 on 1207 degrees of freedom
Multiple R-squared:  0.09258,   Adjusted R-squared:  0.09032 
F-statistic: 41.05 on 3 and 1207 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Tidy summaries</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>broom<span class="sc">::</span><span class="fu">glance</span>(syn_full_lm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["r.squared"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["adj.r.squared"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["sigma"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["statistic"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["df"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["logLik"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["AIC"],"name":[8],"type":["dbl"],"align":["right"]},{"label":["BIC"],"name":[9],"type":["dbl"],"align":["right"]},{"label":["deviance"],"name":[10],"type":["dbl"],"align":["right"]},{"label":["df.residual"],"name":[11],"type":["int"],"align":["right"]},{"label":["nobs"],"name":[12],"type":["int"],"align":["right"]}],"data":[{"1":"0.0925756","2":"0.09032019","3":"0.5098535","4":"41.04612","5":"2.940357e-25","6":"3","7":"-900.5631","8":"1811.126","9":"1836.622","10":"313.7604","11":"1207","12":"1211"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>broom<span class="sc">::</span><span class="fu">tidy</span>(syn_full_lm, <span class="at">conf.int =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["term"],"name":[1],"type":["chr"],"align":["left"]},{"label":["estimate"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["std.error"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["statistic"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["conf.low"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["conf.high"],"name":[7],"type":["dbl"],"align":["right"]}],"data":[{"1":"(Intercept)","2":"3.12191230","3":"0.09573114","4":"32.611251","5":"8.260730e-168","6":"2.93409437","7":"3.3097302"},{"1":"scsq_techspace","2":"0.08008366","3":"0.02335091","4":"3.429574","5":"6.249363e-04","6":"0.03427078","7":"0.1258965"},{"1":"synYes","2":"0.38826767","3":"0.05060201","4":"7.672969","5":"3.449389e-14","6":"0.28899000","7":"0.4875454"},{"1":"scsq_language","2":"0.09087979","3":"0.02006133","4":"4.530098","5":"6.480161e-06","6":"0.05152084","7":"0.1302387"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Standardised Bs</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>parameters<span class="sc">::</span><span class="fu">model_parameters</span>(syn_full_lm, <span class="at">standardize =</span> <span class="st">"refit"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Parameter"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Coefficient"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["SE"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["CI"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["CI_low"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["CI_high"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["t"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["df_error"],"name":[8],"type":["int"],"align":["right"]},{"label":["p"],"name":[9],"type":["dbl"],"align":["right"]}],"data":[{"1":"(Intercept)","2":"-0.07257238","3":"0.02899376","4":"0.95","5":"-0.12945614","6":"-0.01568861","7":"-2.503034","8":"1207","9":"1.244467e-02"},{"1":"scsq_techspace","2":"0.09461971","3":"0.02758935","4":"0.95","5":"0.04049130","6":"0.14874811","7":"3.429574","8":"1207","9":"6.249363e-04"},{"1":"synYes","2":"0.72632353","3":"0.09466004","4":"0.95","5":"0.54060703","6":"0.91204003","7":"7.672969","8":"1207","9":"3.449389e-14"},{"1":"scsq_language","2":"0.12833238","3":"0.02832883","4":"0.95","5":"0.07275316","6":"0.18391159","7":"4.530098","8":"1207","9":"6.480161e-06"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Compare models</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="fu">anova</span>(syn_lm, syn_full_lm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["Res.Df"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["RSS"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["Df"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["Sum of Sq"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["F"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["Pr(>F)"],"name":[6],"type":["dbl"],"align":["right"]}],"data":[{"1":"1209","2":"340.3192","3":"NA","4":"NA","5":"NA","6":"NA","_rn_":"1"},{"1":"1207","2":"313.7604","3":"2","4":"26.55888","5":"51.08448","6":"5.05163e-22","_rn_":"2"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="callout callout-style-simple callout-note no-icon callout-titled" title="Exercise">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
</div>
<div class="callout-body-container callout-body">
<p>Conduct assumptions checks for the final model, including diagnostic plots and sensitivity tests. Decide on a final model to report.</p>
<div class="callout callout-style-default callout-note callout-titled" title="Solution">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-17-contents" aria-controls="callout-17" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-17" class="callout-17-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Residuals</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">autoplot</span>(syn_full_lm, <span class="at">which =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">4</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="06_lm_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Original model for comparison</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>broom<span class="sc">::</span><span class="fu">tidy</span>(syn_full_lm, <span class="at">conf.int =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["term"],"name":[1],"type":["chr"],"align":["left"]},{"label":["estimate"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["std.error"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["statistic"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["conf.low"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["conf.high"],"name":[7],"type":["dbl"],"align":["right"]}],"data":[{"1":"(Intercept)","2":"3.12191230","3":"0.09573114","4":"32.611251","5":"8.260730e-168","6":"2.93409437","7":"3.3097302"},{"1":"scsq_techspace","2":"0.08008366","3":"0.02335091","4":"3.429574","5":"6.249363e-04","6":"0.03427078","7":"0.1258965"},{"1":"synYes","2":"0.38826767","3":"0.05060201","4":"7.672969","5":"3.449389e-14","6":"0.28899000","7":"0.4875454"},{"1":"scsq_language","2":"0.09087979","3":"0.02006133","4":"4.530098","5":"6.480161e-06","6":"0.05152084","7":"0.1302387"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Robust parameter estimates</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="do">## Fit the same module using the lmRob function</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>syn_lm_rob <span class="ot">&lt;-</span> robust<span class="sc">::</span><span class="fu">lmRob</span>(scsq_imagery <span class="sc">~</span> scsq_techspace <span class="sc">+</span> syn <span class="sc">+</span> scsq_language, <span class="at">data =</span> syn_data)</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a><span class="do">## Print out the model parameters</span></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>broom<span class="sc">::</span><span class="fu">tidy</span>(syn_lm_rob, <span class="at">conf.int =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["term"],"name":[1],"type":["chr"],"align":["left"]},{"label":["estimate"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["std.error"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["statistic"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"(Intercept)","2":"3.22069386","3":"0.09789487","4":"32.899517","5":"5.547037e-170"},{"1":"scsq_techspace","2":"0.06667182","3":"0.02360647","4":"2.824303","5":"4.816302e-03"},{"1":"synYes","2":"0.42852440","3":"0.05082944","4":"8.430634","5":"9.682322e-17"},{"1":"scsq_language","2":"0.08365953","3":"0.02027293","4":"4.126662","5":"3.933245e-05"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Re-estimate CIs and p-values with robust SE estimation</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>parameters<span class="sc">::</span><span class="fu">model_parameters</span>(syn_lm_rob, <span class="at">vcov =</span> <span class="st">"HC4"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Parameter"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Coefficient"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["SE"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["CI"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["CI_low"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["CI_high"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["t"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["df_error"],"name":[8],"type":["int"],"align":["right"]},{"label":["p"],"name":[9],"type":["dbl"],"align":["right"]}],"data":[{"1":"(Intercept)","2":"3.22069386","3":"0.09789487","4":"0.95","5":"3.02863085","6":"3.4127569","7":"32.899517","8":"1207","9":"5.547037e-170"},{"1":"scsq_techspace","2":"0.06667182","3":"0.02360647","4":"0.95","5":"0.02035755","6":"0.1129861","7":"2.824303","8":"1207","9":"4.816302e-03"},{"1":"synYes","2":"0.42852440","3":"0.05082944","4":"0.95","5":"0.32880053","6":"0.5282483","7":"8.430634","8":"1207","9":"9.682322e-17"},{"1":"scsq_language","2":"0.08365953","3":"0.02027293","4":"0.95","5":"0.04388544","6":"0.1234336","7":"4.126662","8":"1207","9":"3.933245e-05"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Generate bootstrapped CIs</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>parameters<span class="sc">::</span><span class="fu">model_parameters</span>(syn_full_lm, <span class="at">bootstrap =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Parameter"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Coefficient"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["CI"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["CI_low"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["CI_high"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["p"],"name":[6],"type":["dbl"],"align":["right"]}],"data":[{"1":"(Intercept)","2":"3.12691395","3":"0.95","4":"2.91339726","5":"3.3363607","6":"0.000"},{"1":"scsq_techspace","2":"0.07943206","3":"0.95","4":"0.03425924","5":"0.1304136","6":"0.002"},{"1":"synYes","2":"0.39095588","3":"0.95","4":"0.27986130","5":"0.4869876","6":"0.000"},{"1":"scsq_language","2":"0.09080621","3":"0.95","4":"0.04519450","5":"0.1341381","6":"0.000"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<p>&nbsp;</p>
</section>
<section id="reproducible-analysis" class="level2">
<h2 class="anchored" data-anchor-id="reproducible-analysis">Reproducible Analysis</h2>
<p>We will now put together everything we did in the previous exercises into a reproducible script.</p>
<p>As we are doing this, there are several things to keep in mind:</p>
<ol type="1">
<li><p>Each time we run the code, we should get the same results.</p></li>
<li><p>The code should correspond to the intended analysis.</p></li>
<li><p>The results from the code should exactly match the results in the corresponding paper.</p></li>
<li><p>Inferential conclusions should be computed in the code.</p></li>
<li><p>Code should be organised and commented so that it’s understandable and easy to follow.</p></li>
</ol>
<p>Before you get to have fun with coding and writing comments, let’s look into points 1 and 2 in a bit more detail.</p>
<section id="same-results" class="level3">
<h3 class="anchored" data-anchor-id="same-results">Same Results</h3>
<p>One source of non-reproducible results is the use of random numbers in analyses. Bootstrapping is one procedure which uses randomly sampling, so each time you bootstrap, you will get slightly different results.</p>
<p>To illustrate, each time you ask R to generate a random number, it will return a different output:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get 2 random numbers from a normal distribution with mean = 5, and sd = 2</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rnorm</span>(<span class="dv">2</span>, <span class="at">mean =</span> <span class="dv">5</span>, <span class="at">sd =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3.197373 3.918313</code></pre>
</div>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Do it again </span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rnorm</span>(<span class="dv">2</span>, <span class="at">mean =</span> <span class="dv">5</span>, <span class="at">sd =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3.169548 6.514637</code></pre>
</div>
</div>
<p>Thankfully, these numbers are not truly random, but just “pseudorandom” - they just look random but really aren’t. This means that we can get R to give us the exact same set of “random” numbers every time we run the command. R uses an algorithm called a random number generator to… generate seemingly random numbers. If you specify the “seed” of the random number generator, R will always produce the same sequence of random numbers. In the absence of a user-specified seed, R uses the current computer time. You probably didn’t need to know this particular detail, but now you do. To set the seed, we will use the <code>set.seed()</code> function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate 2 random numbers from a normal distribution with mean = 5, and sd = 2</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">10</span>)</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a><span class="fu">rnorm</span>(<span class="dv">2</span>, <span class="at">mean =</span> <span class="dv">5</span>, <span class="at">sd =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5.037492 4.631495</code></pre>
</div>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Do it again </span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">10</span>)</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a><span class="fu">rnorm</span>(<span class="dv">2</span>, <span class="at">mean =</span> <span class="dv">5</span>, <span class="at">sd =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5.037492 4.631495</code></pre>
</div>
</div>
<p>Note that I had to set the seed before each of the commands to generate random numbers. If I specify it just in front of the first command, the second command will return different results:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate 2 random numbers from a normal distribution with mean = 5, and sd = 2</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">10</span>)</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a><span class="fu">rnorm</span>(<span class="dv">2</span>, <span class="at">mean =</span> <span class="dv">5</span>, <span class="at">sd =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5.037492 4.631495</code></pre>
</div>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Do it again </span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rnorm</span>(<span class="dv">2</span>, <span class="at">mean =</span> <span class="dv">5</span>, <span class="at">sd =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2.257339 3.801665</code></pre>
</div>
</div>
<p>So, to make the results of our bootstrapping reproducible, we have to set the seed of the random number generator:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Generate bootstrapped CIs</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">10</span>)</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>parameters<span class="sc">::</span><span class="fu">model_parameters</span>(eval_full_lm, <span class="at">bootstrap =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Parameter"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Coefficient"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["CI"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["CI_low"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["CI_high"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["p"],"name":[6],"type":["dbl"],"align":["right"]}],"data":[{"1":"(Intercept)","2":"4.0794877","3":"0.95","4":"4.01651333","5":"4.1460135","6":"0"},{"1":"genderfemale","2":"-0.1969003","3":"0.95","4":"-0.29364843","5":"-0.1009516","6":"0"},{"1":"beauty","2":"0.1497940","3":"0.95","4":"0.08581731","5":"0.2117154","6":"0"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>You may notice that the results we get with and without setting the seed are very, very similar. However, this will not always be the case, and we are striving to have a script that produces <strong>exactly the same</strong> results every time we run it. The seed of the random number generator is one source of non-reproducibility that we can control, and we should make use of R’s generosity.</p>
<div class="callout callout-style-default callout-tip callout-titled" title="MoRe About: Random Number Generators">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-19-contents" aria-controls="callout-19" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
MoRe About: Random Number Generators
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-19" class="callout-19-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>There are different kinds of random number generators and you will get different results if you change the random number generator. You can set the specific random number generator to use using the <code>RNGkind()</code> function. Currently, the default in R is the “Mersenne-Twister” generator. The current version of the reproducibility certification template doesn’t ask whether the kind of random number generator is specified, but it is something I should add.</p>
</div>
</div>
</div>
</section>
<section id="correct-analysis" class="level3">
<h3 class="anchored" data-anchor-id="correct-analysis">Correct Analysis</h3>
<p>This point is tricky because each function in R will have its own quirks or properties you need to be aware of. As an example, since we are doing linear models today, we will look into how data types can affect the results produced by the <code>lm()</code> function. We saw an example of this <a href="#model-parameters">with character variables above</a>, but a very similar issue can arise for numbers as well.</p>
<p>In some datasets, categorical variables are sometimes coded with numerical values. For example, in an experiment where you have a control group and an experimental group, you may code the control group as a 0, and the experimental group as a 1. Before you do any analyses, you need to first make sure that these variables are factor type rather than numeric type. If the variable has only 2 levels, nothing bad will happen, but if it has more than 2 levels, the results from your analysis won’t be meaningful.</p>
<p>To illustrate, let’s add a new variable to the <code>teach_tib</code> data frame which will state what time of day the lecturer’s classes take place. The variable will have 3 levels: 1 – evening, 2 – morning, 3 – lunch time, and R will automatically assume that <code>class_time</code> contains numeric data:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set the seed of the random number generator </span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1</span>)</span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Add a class time variable</span></span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a><span class="co"># The values in the class time variable are randomly generated and consist of:</span></span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a><span class="co"># 1 – evening, 2 – morning, 3 – lunch time</span></span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a>teach_tib <span class="ot">&lt;-</span>  teach_tib <span class="sc">|&gt;</span> </span>
<span id="cb57-8"><a href="#cb57-8" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">class_time =</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>), </span>
<span id="cb57-9"><a href="#cb57-9" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">size =</span> dplyr<span class="sc">::</span><span class="fu">n</span>(), </span>
<span id="cb57-10"><a href="#cb57-10" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">replace =</span> <span class="cn">TRUE</span>))</span>
<span id="cb57-11"><a href="#cb57-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-12"><a href="#cb57-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Check the data type of class_time </span></span>
<span id="cb57-13"><a href="#cb57-13" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(teach_tib<span class="sc">$</span>class_time)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "numeric"</code></pre>
</div>
</div>
<p>Now let’s run a linear model in which we test whether class time predicts evaluations:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit model predicting evaluations from class time</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>class_time_lm <span class="ot">&lt;-</span> <span class="fu">lm</span>(eval <span class="sc">~</span> class_time, <span class="at">data =</span> teach_tib)</span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Summary of model output</span></span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(class_time_lm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = eval ~ class_time, data = teach_tib)

Residuals:
     Min       1Q   Median       3Q      Max 
-1.82824 -0.35925  0.04075  0.44075  1.07176 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  4.12476    0.06551  62.965   &lt;2e-16 ***
class_time  -0.06551    0.03121  -2.099   0.0364 *  
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.5528 on 461 degrees of freedom
Multiple R-squared:  0.009467,  Adjusted R-squared:  0.007318 
F-statistic: 4.406 on 1 and 461 DF,  p-value: 0.03636</code></pre>
</div>
</div>
<p>The interpretation of these results is that as class time increases by 1 unit, evaluations change by -0.07 points. Class time is however not a continuous numeric variable, so this doesn’t make sense. Instead, we have to change class time to a categorical variable:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a factor class time variable</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>teach_tib <span class="ot">&lt;-</span>  teach_tib <span class="sc">|&gt;</span> </span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">class_time_cat =</span> <span class="fu">as.factor</span>(class_time))</span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Check the data type of the new variable</span></span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(teach_tib<span class="sc">$</span>class_time_cat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "factor"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit model predicting evaluations from the factor class time variable</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>class_time_cat_lm <span class="ot">&lt;-</span> <span class="fu">lm</span>(eval <span class="sc">~</span> class_time_cat, <span class="at">data =</span> teach_tib)</span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Summary of model output</span></span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(class_time_cat_lm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = eval ~ class_time_cat, data = teach_tib)

Residuals:
     Min       1Q   Median       3Q      Max 
-1.83521 -0.36494  0.03506  0.43506  1.06479 

Coefficients:
                Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)      4.06494    0.04195  96.900   &lt;2e-16 ***
class_time_cat2 -0.08467    0.06199  -1.366   0.1726    
class_time_cat3 -0.12973    0.06258  -2.073   0.0387 *  
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.5534 on 460 degrees of freedom
Multiple R-squared:  0.009742,  Adjusted R-squared:  0.005437 
F-statistic: 2.263 on 2 and 460 DF,  p-value: 0.1052</code></pre>
</div>
</div>
<p>Again, R will use the first level of the categorical variable as the value for the intercept. Then, it creates two coefficients – one showing the difference between levels 1 and 2, and the other showing the difference between levels 1 and 3. You can explicitly define the contrasts you want to compute, but we won’t be looking into this here.</p>
<p>The main point of this exercise was to see that R was perfectly happy executing the analysis assuming that class time is a continuous variable - it doesn’t know it is in fact a categorical variable and you have to communicate this information. The take home message here is that even though a chunk of code runs, it doesn’t mean it accomplishes the analysis you are aiming to do, and you need to examine all the assumptions that R has made in the process.</p>
<p>And with all that out of the way, we are ready to get started with Quarto.</p>
</section>
</section>
<section id="reproducible-reporting" class="level2">
<h2 class="anchored" data-anchor-id="reproducible-reporting">Reproducible Reporting</h2>
<p>We will now redo the analyses we conducted on the teaching evaluation data in a new Quarto document. Your analysis can be reproducible even if you are not using Quarto, but it makes things a lot easier and it is highly recommended.</p>
<div class="callout callout-style-default callout-important callout-titled" title="What For?">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
What For?
</div>
</div>
<div class="callout-body-container callout-body">
<p>There are two key reasons you might want to write and render a Quarto document for your analysis.</p>
<p><strong>Option 1: Record of Output</strong>. In this case, the rendered document will serve a as record of all of the analyses and results that you can refer to when writing your report elsewhere. This is a similar purpose as, for example, the output file in SPSS, so does not need to include much inline code or formatting of in-text results.</p>
<p><strong>Option 2: Formal Report</strong>. In this case, the rendered document will serve as the final, formal report of your results, for submission to journals etc. This should include complete and formatted results including text.</p>
<p>We will talk about both uses of Quarto today. Option 1 is a good intermediate step if you’re learning R and Quarto but feel more comfortable writing, editing, or collaborating on your work in a more familiar program. Option 2 is the most resilient to copy mistakes, since the same document that produces the results is also the one that reports them; but this might be more difficult to work on collaboratively, and you may need to tinker extensively to get a particular formatting or output, or to resolve rendering errors.</p>
<p>However, even if you are shooting for Option 1, it’s still a very good idea to document your inferential conclusions using code.</p>
</div>
</div>
<p>Quarto documents are a mix of text and code, the next generation of R Markdown documents. For our purposes, we will be using R within Quarto, but Quarto documents support the integration of many different coding languages, including Python, Julia, and Observable. If you’ve previously used Rmd (RMarkdown), Quarto is backwards-compatible and will able to render most documents with no issues.</p>
<div class="callout callout-style-default callout-tip callout-titled" title="Help with Quarto">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Help with Quarto
</div>
</div>
<div class="callout-body-container callout-body">
<p>The <a href="https://quarto.org/docs/guide/">official Quarto Guide</a> is extensive, detailed, and extremely helpful. It’s always the best first stop for any questions you have about using Quarto. Quarto also offers detailed <a href="https://quarto.org/docs/get-started/hello/rstudio.html">tutorials</a>.</p>
<p>This <a href="https://quarto.org/docs/authoring/markdown-basics.html">quick-reference to Markdown formatting</a> is particularly helpful.</p>
<p>Prof Andy Field has also recorded a <a href="https://www.youtube.com/watch?v=4rKWIJXe3mA&amp;list=PLEzw67WWDg80-fT1hq2IZf7D62tRmKy8f">series of video guides to using Quarto</a> that are used in UG teaching.</p>
</div>
</div>
<section id="creating-a-quarto-document" class="level3">
<h3 class="anchored" data-anchor-id="creating-a-quarto-document">Creating a Quarto Document</h3>
<p>To get some hands-on practice working with Quarto, we will create a new Quarto document from scratch. We will use the analysis code we’ve already written to create a nicely formatted report.</p>
<div class="callout callout-style-simple callout-note no-icon callout-titled" title="Exercise">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
</div>
<div class="callout-body-container callout-body">
<p>Create a new Quarto document via File &gt; New File &gt; Quarto Document.</p>
<p>If you like, you can give it a title; you will be able to change this later.</p>
<p>Then, click “Create”.</p>
</div>
</div>
<p>By default, your new Quarto document will already have some settings and content to demonstrate how it works. Most importantly, you can see that there are three main types of information in this document:</p>
<ol type="1">
<li>The <a href="#global-options"><strong>YAML header</strong></a> at the top, delineated by <code>---</code>s, which contains information about how the document will be <em>rendered</em></li>
<li>The <a href="#body-text"><strong>body text</strong></a>, which contains regular (i.e.&nbsp;non-code) text</li>
<li>The <a href="#code-chunks"><strong>code chunks</strong></a>, which contain code - in this case, specifically, R.</li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../../images/quarto_anatomy.png" class="img-fluid quarto-figure quarto-figure-center figure-img" alt="A screenshot of the default Quarto document, with the YAML, text, and code chunks each circled and labelled in a different colour."></p>
</figure>
</div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>Before you proceed, make sure you have completed and saved your first worksheet with all of your code!</p>
</div>
</div>
<div class="callout callout-style-simple callout-note no-icon callout-titled" title="Exercise">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
</div>
<div class="callout-body-container callout-body">
<p>To complete our setup, take the following steps:</p>
<ul>
<li>Delete everything in the new Quarto document except for the YAML header (i.e.&nbsp;all the text and code chunks).</li>
<li>Clear your Environment by clicking the broom icon in the Environment tab.</li>
<li>Restart your R session (via Session &gt; Restart R).</li>
</ul>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled" title="Visual vs Source Mode">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-25-contents" aria-controls="callout-25" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Visual vs Source Mode
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-25" class="callout-25-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>A new feature with Quarto is <strong>Visual mode</strong>, which is very like using Word or a similar word processing programme. All formatting can be applied and previewed in the document itself, using keyboard shortcuts or the familiar formatting buttons along the top toolbar.</p>
<p>Visual mode also has an “insert anything” shortcut, <code>/</code>, that allows you to quickly insert elements into your document. If you type <code>/</code> at the start of a new line (or Ctrl/Cmd + / otherwise), a drop-down list of possible elements will appear, which you can navigate by scrolling or search by typing.</p>
<p>Alternatively, you can toggle to <strong>Source mode</strong> by clicking the “Source” button at the very top left of the document pane. In Source mode you can edit the document using Markdown formatting. This allows more fine-tuned control of elements, but automatic formatting and the <code>/</code> shortcut don’t work in this mode.</p>
<p>Which you use is entirely personal preference - I (JM) toggle regularly between them depending on what I’m trying to do, so pick whichever works for you.</p>
</div>
</div>
</div>
</section>
<section id="creating-a-code-chunk" class="level3">
<h3 class="anchored" data-anchor-id="creating-a-code-chunk">Creating a Code Chunk</h3>
<p>To prepare for our analysis, we will need a place to load packages and read in the data. Any executable code - that is, code that you want to run and do something - must be written in a code chunk and NOT in the body text<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>.</p>
<p>There are several ways to insert a new code chunk.</p>
<ul>
<li>In Visual mode, by typing <code>/</code> and then Enter (since “R Code Chunk” is the first option)</li>
<li>In either mode, by:
<ul>
<li>Clicking the green “insert code chunk” button in the top right</li>
<li>Typing out the literal code fencing: <code>```{r} ```</code></li>
<li>Using a keyboard shortcut.</li>
</ul></li>
</ul>
<div class="callout callout-style-simple callout-note no-icon callout-titled" title="Exercise">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
</div>
<div class="callout-body-container callout-body">
<p>Create a new code chunk and code that does the following:</p>
<ul>
<li>Load all the packages we used in the previous Linear Model section</li>
<li><a href="#data-and-codebook">Read in the dataset</a></li>
<li>Create the two objects containing the linear models with <a href="#one-predictor">one predictor</a> and with <a href="#hierarchical-models">two predictors</a>.</li>
</ul>
<p>Then, run the code chunk.</p>
<div class="callout callout-style-default callout-note callout-titled" title="Solution">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-26-contents" aria-controls="callout-26" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-26" class="callout-26-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><strong>Load packages</strong>:</p>
<p>In the previous section, we used the following packages:</p>
<ul>
<li>{tidyverse}, or specifically {broom}, for tidying up the linear model output</li>
<li>{ggfortify} for creating diagnostic plots</li>
<li>{parameters} for standardising <em>b</em>s, re-estimating CIs, and boostrapping</li>
<li>{robust} for robust parameter estimates</li>
</ul>
<p><strong>Read in the data</strong>:</p>
<p>Use the code from the <a href="#data-and-codebook">Data and Codebook</a> section of this tutorial to read in the dataset and rename it if you want.</p>
<p><strong>Create the models</strong>:</p>
<p>Copy and paste the code from your workbook document, or from the previous sections of this tutorial. You can also find all of the commands you have run your History tab (next to Environment).</p>
<p>Altogether, your new code chunk should look something like this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load required packages</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggfortify)</span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(parameters)</span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(robust)</span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Load data</span></span>
<span id="cb65-8"><a href="#cb65-8" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">"TeachingRatings"</span>, <span class="at">package =</span> <span class="st">"AER"</span>)</span>
<span id="cb65-9"><a href="#cb65-9" aria-hidden="true" tabindex="-1"></a>teach_tib <span class="ot">&lt;-</span> TeachingRatings</span>
<span id="cb65-10"><a href="#cb65-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-11"><a href="#cb65-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit models prediction teaching evaluation</span></span>
<span id="cb65-12"><a href="#cb65-12" aria-hidden="true" tabindex="-1"></a>eval_lm <span class="ot">&lt;-</span> <span class="fu">lm</span>(eval <span class="sc">~</span> beauty, <span class="at">data =</span> teach_tib)</span>
<span id="cb65-13"><a href="#cb65-13" aria-hidden="true" tabindex="-1"></a>eval_full_lm <span class="ot">&lt;-</span> <span class="fu">lm</span>(eval <span class="sc">~</span> beauty <span class="sc">+</span> gender, <span class="at">data =</span> teach_tib)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Run the code chunk by clicking the green “play” arrow, or by pressing Ctrl/Cmd + Shift + Enter while your cursor is inside the chunk.</p>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="body-text" class="level3">
<h3 class="anchored" data-anchor-id="body-text">Body Text</h3>
<section id="headings" class="level4">
<h4 class="anchored" data-anchor-id="headings">Headings</h4>
<p>To begin, we’ll use headings to map out our document. There are several ways to insert a new heading.</p>
<ul>
<li>In Visual mode, by:
<ul>
<li>Using the text formatting dropdown. Click on “Normal” and select the heading level.</li>
<li>Using a keyboard shortcut, Ctrl + Alt + the number of the heading (e.g.&nbsp;3 for a level 3 heading)</li>
</ul></li>
<li>In either mode, by:
<ul>
<li>Typing hashes at the start of a new line, followed by a space (e.g.&nbsp;<code>###</code> creates a level 3 heading)</li>
</ul></li>
</ul>
<div class="callout callout-style-default callout-tip callout-titled" title="Why Use Headings?">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-28-contents" aria-controls="callout-28" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Why Use Headings?
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-28" class="callout-28-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Properly formatted headings are strongly recommended for any documents you write, for a variety of reasons:</p>
<ul>
<li>They automatically create the outline (to the right) and navigation menu (to the bottom) of your document for easy navigation</li>
<li>They can be automatically converted into a <a href="#rendering">table of contents</a></li>
<li>They are a crucial accessibility feature for navigating the document via keyboard/screenreader, as well as providing clear visual structure.</li>
</ul>
</div>
</div>
</div>
<div class="callout callout-style-simple callout-note no-icon callout-titled" title="Exercise">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
</div>
<div class="callout-body-container callout-body">
<p>Create 2-3 level 2 headings in your document for the brief report of the linear model. You can choose anything you like, but in this tutorial we’ll be using “Model Comparison” (constructing and comparing the two models), “Assumptions Checks”, and “The Final Model” (reporting the final model in full).</p>
</div>
</div>
</section>
<section id="text" class="level4">
<h4 class="anchored" data-anchor-id="text">Text</h4>
<p>Any new-line text will automatically be plain text. This can be anything you like, although in our current document, we are writing a mock-formal results section.</p>
<p>How to format body text depends on the mode you are in.</p>
<ul>
<li>In Visual mode, by:
<ul>
<li>Using familiar keyboard shortcuts (e.g.&nbsp;Ctrl/Cmd + B for <strong>bold</strong>, Ctrl/Cmd + I for <em>italics</em>, etc.)</li>
<li>Using the formatting toolbar at the top of the document.</li>
</ul></li>
<li>In Source mode, by using <a href="https://quarto.org/docs/authoring/markdown-basics.html">Markdown formatting</a>.</li>
</ul>
<p>Under the first heading (which I have called “Model Comparison”), we will report the results related to the two models we fit earlier as well as the results from the model comparison we did earlier. Without filling in any statistics, the paragraph we write might look something like this:</p>
<blockquote class="blockquote">
<p>Two linear models were constructed to investigate the influences on teaching evaluation ratings. The first model contained only instructor beauty ratings as a predictor, and teaching evaluation ratings as the outcome (R<sup>2</sup> = ???, <em>F</em>(???, ???) = ???, <em>p</em> = ???). The second model added instructor gender as a second predictor with no interaction, both again predicting teaching evaluation ratings (R<sup>2</sup> = ???, <em>F</em>(???, ???) = ???, <em>p</em> = ???). An ANOVA comparing the models indicated a [<u>significant/non-significant]</u> improvement in model fit for the second model compared to the first (<em>F</em>(???, ???) = ???, <em>p</em> = ???).</p>
</blockquote>
<div class="repro">
<div class="repro-header">
<div class="repro-icon">

</div>
<p>RepRoducibility: Code-Results Match</p>
</div>
<div class="repro-body">
<p>It is not enough that your code always produces the same results - your code should always produce the results reported in your paper, exactly as they appear in the paper.</p>
<p>The paragraph above is very clearly missing the actual statistical results of the linear model analysis. We <em>could</em> produce all the necessary output, read it ourselves with our very own eyes/ears, and then type out the results by hand… but that is definitely <em>not</em> what we are going to do! <strong>We want to limit potential sources of errors such as manually typing numbers.</strong></p>
<p>Instead, we’ll look at a couple options for reporting the results dynamically.</p>
</div>
</div>
</section>
</section>
<section id="reporting" class="level3">
<h3 class="anchored">Reporting</h3>
<p>In this section we’ll look at a few ways to create written reports in the text of Quarto documents. Even if you’re not interested in writing your final document in Quarto, these code-produced reports are essential for double-checking your own work, documenting your inferential conclusions, and producing formatted reporting to use elsewhere if you want.</p>
<section id="automatic-reporting-with-report" class="level4">
<h4 class="anchored" data-anchor-id="automatic-reporting-with-report">Automatic Reporting with {report}</h4>
<p>Our first option for reporting results without manually typing them up is to use the <a href="https://easystats.github.io/report/">{<code>report</code>} package</a> which is part of <a href="https://easystats.github.io/easystats/"><code>easystats</code></a>. The {report} package includes many useful functions for… reporting results, such as the <code>report()</code> function which outputs a written summary of the object that is given to the function as an input. As an example, we can use <code>report()</code> to output the results of the models we fitted to the data, for example:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>report<span class="sc">::</span><span class="fu">report</span>(eval_lm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>We fitted a linear model (estimated using OLS) to predict eval with beauty
(formula: eval ~ beauty). The model explains a statistically significant and
weak proportion of variance (R2 = 0.04, F(1, 461) = 17.08, p &lt; .001, adj. R2 =
0.03). The model's intercept, corresponding to beauty = 0, is at 4.00 (95% CI
[3.95, 4.05], t(461) = 157.73, p &lt; .001). Within this model:

  - The effect of beauty is statistically significant and positive (beta = 0.13,
95% CI [0.07, 0.20], t(461) = 4.13, p &lt; .001; Std. beta = 0.19, 95% CI [0.10,
0.28])

Standardized parameters were obtained by fitting the model on a standardized
version of the dataset. 95% Confidence Intervals (CIs) and p-values were
computed using a Wald t-distribution approximation.</code></pre>
</div>
</div>
<p>This is a very easy and fast way to get APA-formatted results that you can just put into your paper. AND the output contains the inferential conclusions that can be drawn from the results, based on the popular decision cut-off of p &lt; .05 (more on this later!). The results also look much nicer than the output provided by <code>summary()</code> which can make it tempting to fit your model and go straight to reporting the results with <code>report()</code>.</p>
<p>However, R, RStudio and all the packages in existence get frequent updates which may or may not lead to changes in how a particular function works. Base <code>R</code> is always the safest way to interact with and examine your data, so even if you are planning to use <code>report()</code> or any other function to beautify your results section, it is best to check that the results match the results produced by <code>summary()</code>. Using different methods to do the same thing has helped me catch errors I would have otherwise missed numerous times.</p>
<div class="callout callout-style-default callout-tip callout-titled" title="MoRe About: `report()`">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-30-contents" aria-controls="callout-30" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
MoRe About: <code>report()</code>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-30" class="callout-30-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Above, we used the <code>report()</code> to summarise the results of our linear models but this is not all that it does! <code>report()</code> is very versatile and it will give you a different output depending on the type of object that you give it is input. For example, we can also use this function to output overall descriptives of a given variable:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>report<span class="sc">::</span><span class="fu">report</span>(teach_tib<span class="sc">$</span>eval)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>x: n = 463, Mean = 4.00, SD = 0.55, Median = 4.00, MAD = 0.59, range: [2.10,
5], Skewness = -0.47, Kurtosis = -0.11, 0% missing</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Great! We can use <code>report()</code> to automatically write our paper! Unfortunately, as of now, we can’t use the <code>report()</code> function to get the results from the model comparison we did earlier, so we will need to find a different approach:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>report<span class="sc">::</span><span class="fu">report</span>(<span class="fu">anova</span>(eval_lm, eval_full_lm))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error: No residuals data found - cannot compute effect size.</code></pre>
</div>
</div>
<p>Also, in case you actually like writing papers and just want to get the APA-formatted results without the automatically generated text, the {report} package has a function which will do just this - <code>report_statistics()</code>. We won’t cover this function here, but you can try it out to see what it does. Instead, we will have a look at {papaja} which is another useful package for automatic reporting.</p>
</section>
<section id="inline-reporting-with-papaja" class="level4">
<h4 class="anchored" data-anchor-id="inline-reporting-with-papaja">Inline Reporting with {papaja}</h4>
<p>Papayas are rich in potassium. {papaja} is an <code>R</code> package for <strong>P</strong>reparing <strong>APA</strong> <strong>J</strong>ournal <strong>A</strong>rticles. With this confusing matter sorted, we can use {papaja} with inline coding to report our results in a “semi-automatic” manner (note: this is not an official term).</p>
<p><em>Inline code</em> is a small bit of R code written in the body text (“inline”) that will, when the document is rendered, automatically insert the right output. We briefly encountered inline code already in <a href="../../tutorials/docs/04_filter.html#reporting">Tutorial 04</a>.</p>
<p>Inline code is written as follows, in the text: <code>`r some_r_code`</code>. Note the backticks; these are NOT apostrophes, and are typically located on the top left of a UK keyboard to the left of the 1/! key. We will look into inline code in more detail later.</p>
<p>So, what do we want to print out in the text? Ideally, something like this:</p>
<blockquote class="blockquote">
<p>The first model contained only instructor gender as a predictor, and teaching evaluation ratings as the outcome (<span class="math inline">\(R^2 = .07\)</span>, <span class="math inline">\(F(2, 460) = 16.33\)</span>, <span class="math inline">\(p &lt; .001\)</span>).</p>
</blockquote>
<p>To do this, let’s first see what happens when we use the <code>papaja::apa_print()</code> function on one of our models.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>papaja<span class="sc">::</span><span class="fu">apa_print</span>(eval_lm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$estimate
$estimate$Intercept
[1] "$b = 4.00$, 95\\% CI $[3.95, 4.05]$"

$estimate$beauty
[1] "$b = 0.13$, 95\\% CI $[0.07, 0.20]$"

$estimate$modelfit
$estimate$modelfit$r2
[1] "$R^2 = .04$"

$estimate$modelfit$r2_adj
[1] "$R^2_{adj} = .03$"

$estimate$modelfit$aic
[1] "$\\mathrm{AIC} = 756.65$"

$estimate$modelfit$bic
[1] "$\\mathrm{BIC} = 769.06$"



$statistic
$statistic$Intercept
[1] "$t(461) = 157.73$, $p &lt; .001$"

$statistic$beauty
[1] "$t(461) = 4.13$, $p &lt; .001$"

$statistic$modelfit
$statistic$modelfit$r2
[1] "$F(1, 461) = 17.08$, $p &lt; .001$"



$full_result
$full_result$Intercept
[1] "$b = 4.00$, 95\\% CI $[3.95, 4.05]$, $t(461) = 157.73$, $p &lt; .001$"

$full_result$beauty
[1] "$b = 0.13$, 95\\% CI $[0.07, 0.20]$, $t(461) = 4.13$, $p &lt; .001$"

$full_result$modelfit
$full_result$modelfit$r2
[1] "$R^2 = .04$, $F(1, 461) = 17.08$, $p &lt; .001$"



$table
A data.frame with 6 labelled columns:

       term estimate     conf.int statistic  df p.value
1 Intercept     4.00 [3.95, 4.05]    157.73 461  &lt; .001
2    Beauty     0.13 [0.07, 0.20]      4.13 461  &lt; .001

term     : Predictor 
estimate : $b$ 
conf.int : 95\\% CI 
statistic: $t$ 
df       : $\\mathit{df}$ 
p.value  : $p$ 
attr(,"class")
[1] "apa_results" "list"       </code></pre>
</div>
</div>
<p>So, we get a huge variety of ready-made text strings, that we can subset using <code>$</code>. The goal is to return <strong>one</strong> string per inline code element.</p>
<div class="callout callout-style-simple callout-note no-icon callout-titled" title="Exercise">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
</div>
<div class="callout-body-container callout-body">
<p>Complete the reporting below with the correct inline code reporting R<sup>2</sup>, <em>F</em>, and <em>p</em> for each of the linear models, using only <strong>one piece</strong> of inline code for each.</p>
<blockquote class="blockquote">
<p>Two linear models were constructed to investigate the influences on teaching evaluation ratings. The first model contained only instructor gender as a predictor, and teaching evaluation ratings as the outcome (<code>`r ???`</code>). The second model added instructor beauty ratings as a second predictor with no interaction, both again predicting teaching evaluation ratings (<code>`r ???`</code>).</p>
</blockquote>
<p><em>Hint</em>: Use <a href="https://frederikaust.com/papaja_man/reporting.html#statistical-models-and-tests">the {papaja} documentation</a> if you’re stuck.</p>
<p>When you’re done, render your document to see the results!</p>
<div class="callout callout-style-default callout-note callout-titled" title="Solution">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-31-contents" aria-controls="callout-31" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-31" class="callout-31-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>The {papaja} documentation illustrates the process using <code>t.test()</code>, which works the same way as <code>lm()</code>. The key here is to use the original objects containing the models you want to report.</p>
<p>We saw above that putting each model into <code>apa_print()</code> gave us a bunch of different elements to report for each model. To do this, I would:</p>
<ol type="1">
<li>Use <code>papaja::apa_print(my_model)</code> to print out all all the options for whichever model wanted to report.</li>
<li>Once I’d identified the correct element, store the <code>papaja</code> output in a new object.</li>
<li>In inline code, use the stored <code>papaja</code> object and the correct subsetted element to complete reporting.</li>
</ol>
<p>In this case, we want the overall model fit, which is under <code>$full_result$modelfit$r2</code>. Lucky for us, this is called exactly the same thing for both models. Next, we can save the output from <code>apa_print()</code> into objects to use in reporting.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>eval_lm_out <span class="ot">&lt;-</span> papaja<span class="sc">::</span><span class="fu">apa_print</span>(eval_lm)</span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>eval_full_lm_out <span class="ot">&lt;-</span> papaja<span class="sc">::</span><span class="fu">apa_print</span>(eval_full_lm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Finally, we can complete our paragraph, replacing the “???”s with the name of the object containing the papaja output, followed by the <code>$</code>-subsetted name of the element containing the information we want to report.</p>
<blockquote class="blockquote">
<p>Two linear models were constructed to investigate the influences on teaching evaluation ratings. The first model contained only instructor gender as a predictor, and teaching evaluation ratings as the outcome (<code>`r eval_lm_out$full_result$modelfit$r2`</code>). The second model added instructor beauty ratings as a second predictor with no interaction, both again predicting teaching evaluation ratings (<code>`r eval_full_lm_out$full_result$modelfit$r2`</code>).</p>
</blockquote>
<p>Which will render as:</p>
<blockquote class="blockquote">
<p>Two linear models were constructed to investigate the influences on teaching evaluation ratings. The first model contained only instructor gender as a predictor, and teaching evaluation ratings as the outcome (<span class="math inline">\(R^2 = .04\)</span>, <span class="math inline">\(F(1, 461) = 17.08\)</span>, <span class="math inline">\(p &lt; .001\)</span>). The second model added instructor beauty ratings as a second predictor with no interaction, both again predicting teaching evaluation ratings (<span class="math inline">\(R^2 = .07\)</span>, <span class="math inline">\(F(2, 460) = 16.33\)</span>, <span class="math inline">\(p &lt; .001\)</span>).</p>
</blockquote>
</div>
</div>
</div>
</div>
</div>
<p>While this has been great so far, <code>apa_print()</code> is also not happy to report the results of our model comparison:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>papaja<span class="sc">::</span><span class="fu">apa_print</span>(<span class="fu">anova</span>(eval_lm, eval_full_lm))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error: No residuals data found - cannot compute effect size.</code></pre>
</div>
</div>
<p>Therefore, to complete the summary of our results, we will look into inline code.</p>
</section>
<section id="fully-custom-reporting" class="level4">
<h4 class="anchored" data-anchor-id="fully-custom-reporting">Fully Custom Reporting</h4>
<p>To complete our model reporting, we’ll use the following example paragraph. As before, we’d like to replace the “???”s and underlined text with the correct numbers or words automatically, using code.</p>
<blockquote class="blockquote">
<p>An ANOVA comparing the models indicated a [<u>significant/non-significant]</u> improvement in model fit for the second model compared to the first (<em>F</em>(???, ???) = ???, <em>p</em> = ???).</p>
</blockquote>
<p>Since neither {report} or {papaja} gave us a quick way to do this automatically, our final option for reporting results is to use fully custom inline code to report each of our numerical results independently. This is the most flexible option for reporting results because it allows you to put a single result anywhere you like. But first, to be able to refer to a specific result in our output, we need to know what information we have available.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>This section will make extensive use of <code>$</code> subsetting, which was covered in <a href="../../tutorials/docs/03_datasets.html">Tutorial 03</a>, and <code>[]</code> subsetting, which was covered in <a href="../../tutorials/docs/01_intro.html">Tutorial 01</a>. Getting comfortable with subsetting is valuable not only for reporting results but also for conducting additional analyses on the results of some computation. Even though we are focusing on inline code today, this is just an example and subsetting is useful in coding more generally.</p>
</div>
</div>
<div class="callout callout-style-simple callout-note no-icon callout-titled" title="Exercise">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
</div>
<div class="callout-body-container callout-body">
<p>Follow along with the following steps in your report Quarto document!</p>
</div>
</div>
<p>First, let’s generate the output we want to report. In your report document, in a <strong>new code chunk</strong>, use the <code>broom::tidy()</code> function to get a nice tibble of the <code>anova()</code> comparison between the two models, and save it in a new object called <code>tidy_f</code>. Then, print out this object <strong>in the Console</strong>.</p>
<p>We are calling this object in the Console because viewing its contents is only for our information/reference, and not something we want to appear or use directly in our finished document.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="do">## In a code chunk</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>tidy_f <span class="ot">&lt;-</span> broom<span class="sc">::</span><span class="fu">tidy</span>(<span class="fu">anova</span>(eval_lm, eval_full_lm))</span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a><span class="do">## In the Console</span></span>
<span id="cb77-5"><a href="#cb77-5" aria-hidden="true" tabindex="-1"></a>tidy_f</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["term"],"name":[1],"type":["chr"],"align":["left"]},{"label":["df.residual"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["rss"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["df"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["sumsq"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["statistic"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[7],"type":["dbl"],"align":["right"]}],"data":[{"1":"eval ~ beauty","2":"461","3":"137.1556","4":"NA","5":"NA","6":"NA","7":"NA"},{"1":"eval ~ beauty + gender","2":"460","3":"132.8089","4":"1","5":"4.346745","6":"15.05549","7":"0.0001196428"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>The tibble we get here is quite different from <a href="#comparing-models">the “Analysis of Variance Table” text output</a> that we saw earlier when we printed out the results of the <code>anova()</code> function on its own. We now have all the values we need to report these results in a conveniently subsettable tibble with nice R-friendly names.</p>
<p>Let’s start with the F-statistic itself. So, how do we get out the value 15.0554899 from this object, and round it to two decimal places?</p>
<p>First, we need to get out the <code>statistic</code> variable, which we can do with <code>$</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>tidy_f<span class="sc">$</span>statistic</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]       NA 15.05549</code></pre>
</div>
</div>
<p>This returns a vector of two values, <code>NA</code> and 15.0554899. To index the second of these values, we need <code>[]</code> subsetting and the index number of the correct value.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>tidy_f<span class="sc">$</span>statistic[<span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 15.05549</code></pre>
</div>
</div>
<p>Finally, for the purposes of reporting results in a paper, we should round this number to make it more readable. As we want <strong>the code to produce the results exactly as they appear in the paper</strong>, we will use the <code>round()</code> function to round to two decimal places.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(tidy_f<span class="sc">$</span>statistic[<span class="dv">2</span>], <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 15.06</code></pre>
</div>
</div>
<p>We now have a bit of R code that produces a <strong>single</strong> number that we want to report in the text<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>.</p>
<p>For our reporting, we will need to insert the inline code in exactly the spot where we would like the output of the code to appear. This particular bit of code produces the <em>F</em>-statistic, so we can replace the “???”s in our reporting where the value of the <em>F</em>-statistic should go:</p>
<blockquote class="blockquote">
<p>An ANOVA comparing the models indicated a [<u>significant/non-significant]</u> improvement in model fit for the second model compared to the first (<em>F</em>(???, ???) = <code>`r round(tidy_f$statistic[2], 2)`</code>, <em>p</em> = ???).</p>
</blockquote>
<p>You can check whether this has worked in two ways:</p>
<ol type="1">
<li>Place your cursor inside the backticks and press Ctrl/Cmd + Enter, as you would inside a code chunk. This will run the code and a small pop-up will show you what that code will produce when rendered.</li>
<li>Render your document and see what appears!</li>
</ol>
<div class="callout callout-style-simple callout-note no-icon callout-titled" title="Exercise">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>CHALLENGE:</strong> Use inline code to replace all of the ???s in the <em>F</em>-test reporting to produce a final report in APA style.</p>
<p><em>Hint</em>: Rounding <em>p</em>-values is a bit tricky. <a href="https://frederikaust.com/papaja_man/reporting.html">Check out the {papaja} package</a> to see if you can find a function besides <code>round()</code> that will produce the <em>p</em>-value with the correct formatting.</p>
<div class="callout callout-style-default callout-note callout-titled" title="Solution">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-35-contents" aria-controls="callout-35" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-35" class="callout-35-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>All of the other numbers should be straightforward, except for the <em>p</em>-value. Rounding to three decimal places with <code>round()</code> will result in a value of 0, which is not what we want. Instead, since the <em>p</em>-value is below .001, we want “&lt; .001”.</p>
<p>{papaja} has the <code>printp()</code> function, which will do this exactly was we like (as well as containing a lot of other useful functions for rounding and printing in APA style!)</p>
<p>Your text may look like this:</p>
<blockquote class="blockquote">
<p>An ANOVA comparing the models indicated a [<u>significant/non-significant]</u> improvement in model fit for the second model compared to the first (<em>F</em>(<code>`r tidy_f$df[2]`</code>, <code>`r tidy_f$df.residual[2]`</code>) = <code>`r round(tidy_f$statistic[2], 2)`</code>, <em>p</em> <code>`r papaja::printp(tidy_f$p.value[2])`</code>).</p>
</blockquote>
<p>Note that there’s no need for a “&lt;” symbol because <code>papaja::printp()</code> includes it automatically.</p>
<p>This will render as:</p>
<blockquote class="blockquote">
<p>An ANOVA comparing the models indicated a [<u>significant/non-significant]</u> improvement in model fit for the second model compared to the first (<em>F</em>(1, 460) = 15.06, <em>p</em> &lt; .001).</p>
</blockquote>
</div>
</div>
</div>
</div>
</div>
<p>Now let’s look into adding the final missing elements in our report - the inferential conclusions of our tests.</p>
<!-- Update: Change to repro box -->
<div class="repro">
<div class="repro-header">
<div class="repro-icon">

</div>
<p>RepRoducibility: Inferential conclusions should be computed in the code</p>
</div>
<div class="repro-body">
<p>Inferential conclusions are arguably the most important results in a paper, and should also be computationally reproducible just like the numerical results they are based on. Decisions related to whether you should reject or accept a given hypothesis should be based on a quantifiable rule that a computer is able to evaluate (see <a href="https://journals.sagepub.com/doi/full/10.1177/2515245920970949">Lakens &amp; DeBruine, 2021</a>). One familiar example for people using null hypothesis statistical testing is to reject the null hypothesis if the p-value is smaller than some pre-specified cut-off, such as .05, and we saw that the <code>report()</code> function applies this rule automatically. In some cases, however, you may need more flexibility in defining whether or not a given hypothesis has been supported. So, let’s evaluate if the result we computed above is significant or not. If significant, the last sentence in our results paragraph should say:</p>
<blockquote class="blockquote">
<p>An ANOVA comparing the models indicated a <strong>significant</strong> improvement in model fit for the second model compared to the first…</p>
</blockquote>
<p>And if the results is not significant, the last sentence in our results paragraph should say:</p>
<blockquote class="blockquote">
<p>An ANOVA comparing the models indicated a <strong>non-significant</strong> improvement in model fit for the second model compared to the first…</p>
</blockquote>
</div>
</div>
<div class="callout callout-style-simple callout-note no-icon callout-titled" title="Exercise">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>CHALLENGE</strong>: Create a bit of inline code that will either report a significant or non-significant result depending on the value of <em>p</em>.</p>
<p><em>Hint</em>: You may need to check out the <code>ifelse()</code> function.</p>
<div class="callout callout-style-default callout-note callout-titled" title="Solution">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-37-contents" aria-controls="callout-37" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-37" class="callout-37-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>First, we need to write a bit of R code that will evaluate whether the value of <em>p</em> is above or below a particular threshold, and then output the correct text. We could do this with <code>ifelse()</code>, a handy little base R function with three arguments. The first is a test returning a logical value (either <code>TRUE</code> or <code>FALSE</code>). If the test returns <code>TRUE</code>, the second argument is executed; if the test returns <code>FALSE</code>, the final argument is executed.</p>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-90"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-90-1"><a href="#annotated-cell-90-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ifelse</span>(</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-90" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-90-2" class="code-annotation-target"><a href="#annotated-cell-90-2" aria-hidden="true" tabindex="-1"></a>  tidy_f<span class="sc">$</span>p.value[<span class="dv">2</span>] <span class="sc">&lt;</span> .<span class="dv">05</span>,</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-90" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-90-3" class="code-annotation-target"><a href="#annotated-cell-90-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"significant"</span>,</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-90" data-target-annotation="3" onclick="event.preventDefault();">3</a><span id="annotated-cell-90-4" class="code-annotation-target"><a href="#annotated-cell-90-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"non-significant"</span></span>
<span id="annotated-cell-90-5"><a href="#annotated-cell-90-5" aria-hidden="true" tabindex="-1"></a>)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-90" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-90" data-code-lines="2" data-code-annotation="1">The test: is the <em>p</em>-value for our <em>F</em>-test less than .05? (If you have a different <span class="math inline">\(\alpha\)</span>-threshold, you could hard-code it here or use an object you’ve defined previously for this comparison.)</span>
</dd>
<dt data-target-cell="annotated-cell-90" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-90" data-code-lines="3" data-code-annotation="2">What to do if the test returns <code>TRUE</code>: print “significant”.</span>
</dd>
<dt data-target-cell="annotated-cell-90" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-90" data-code-lines="4" data-code-annotation="3">What to do if the test returns <code>FALSE</code>: print “non-significant”.</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "significant"</code></pre>
</div>
</div>
<p>We can then take this command and replace the word “significant” in our report with this inline code:</p>
<blockquote class="blockquote">
<p>An ANOVA comparing the models indicated a <code>`r ifelse(tidy_f$p.value[2] &lt; .05, "significant", "non-significant")`</code> improvement in model fit…</p>
</blockquote>
<p>Now we don’t have to worry about getting this right: our document, when rendered, will automatically insert the right word depending on the data.</p>
</div>
</div>
</div>
</div>
</div>
<!--
Automatic Reporting

As helpful as inline code is (and I would recommend reporting all values dynamically/automatically wherever possible, so it is *very* useful!), you may have noticed that there was a lot of repetitive typing that also made the text itself quite difficult to read, as well lots of opportunities make typos or mistakes. Surely there's a simpler way to do this sort of thing![^3]

[^3]: Here we're going to briefly encounter a principle that will come up again and again, namely: If you have to copy and paste more than once, [use a function instead](https://r4ds.had.co.nz/functions.html#when-should-you-write-a-function).

There are, in fact, many simpler ways to do common tasks like this, which take advantage of the fact that an object created by a particular function will *always* have the same structure. One option is to make further use of the {papaja} package, which is designed for just this purpose.
-->
</section>
<section id="table-formatting" class="level4">
<h4 class="anchored" data-anchor-id="table-formatting">Table Formatting</h4>
<p>Now that we have reported the results from our model comparison, we will jump to the “Final Model” heading and have a look at how to turn our final model output into a nicely formatted table. It may be tempting to manually create a table in the word processor of your choice and type in the numbers yourself. But we will of course avoid doing this because typos are way, way too easy to make.</p>
<p>Luckily, {papaja} provides a quick and beautiful solution for reporting tables - <a href="https://frederikaust.com/papaja_man/reporting.html#reporting-models-and-tests-in-a-table">the <code>apa_table()</code> function</a>. So, let’s use it to produce a nicely formatted table of the final model, presenting the parameter estimates, <em>p</em>-values etc. for each predictor in <code>eval_full_lm_out</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a>papaja<span class="sc">::</span><span class="fu">apa_table</span>(eval_full_lm_out<span class="sc">$</span>table)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

(#tab:unnamed-chunk-39)

<div data-custom-style="Table Caption">
**
</div>
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">Predictor</th>
<th style="text-align: left;"><span class="math inline">\(b\)</span></th>
<th style="text-align: left;">95% CI</th>
<th style="text-align: left;"><span class="math inline">\(t\)</span></th>
<th style="text-align: left;"><span class="math inline">\(\mathit{df}\)</span></th>
<th style="text-align: left;"><span class="math inline">\(p\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Intercept</td>
<td style="text-align: left;">4.08</td>
<td style="text-align: left;">[4.02, 4.15]</td>
<td style="text-align: left;">123.94</td>
<td style="text-align: left;">460</td>
<td style="text-align: left;">&lt; .001</td>
</tr>
<tr class="even">
<td style="text-align: left;">Beauty</td>
<td style="text-align: left;">0.15</td>
<td style="text-align: left;">[0.09, 0.21]</td>
<td style="text-align: left;">4.65</td>
<td style="text-align: left;">460</td>
<td style="text-align: left;">&lt; .001</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Genderfemale</td>
<td style="text-align: left;">-0.20</td>
<td style="text-align: left;">[-0.30, -0.10]</td>
<td style="text-align: left;">-3.88</td>
<td style="text-align: left;">460</td>
<td style="text-align: left;">&lt; .001</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>The command above should go in a new code chunk, wherever you want the table to appear in your document.</p>
<p>{papaja} isn’t the only package to provide easy formatting for commonly reported tests. We can create a similar looking table using the <code>nice_table()</code> function from the {rempsyc} package.</p>
<p>The <code>nice_table()</code> function can be used for tables generally, but it can apply specialised formatting for model tables created with <code>broom</code>, if we use the <code>broom =</code> argument to tell the function what formatting template to apply.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>rempsyc<span class="sc">::</span><span class="fu">nice_table</span>(broom<span class="sc">::</span><span class="fu">tidy</span>(eval_full_lm, <span class="at">conf.int =</span> <span class="cn">TRUE</span>), </span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a>                    <span class="at">broom =</span> <span class="st">"lm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="tabwid"><style>.cl-bdecc5d6{table-layout:auto;}.cl-bde07d62{font-family:'Times New Roman';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-bde07d8a{font-family:'Times New Roman';font-size:12pt;font-weight:normal;font-style:italic;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-bde57bc8{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 2;background-color:transparent;}.cl-bde57bd2{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 2;background-color:transparent;}.cl-bde5a044{background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(0, 0, 0, 1.00);border-top: 0.5pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-bde5a04e{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-bde5a04f{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-bde5a058{background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-bde5a059{background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-bdecc5d6"><thead><tr style="overflow-wrap:break-word;"><th class="cl-bde5a044"><p class="cl-bde57bc8"><span class="cl-bde07d62">Term</span></p></th><th class="cl-bde5a044"><p class="cl-bde57bc8"><span class="cl-bde07d8a">b</span></p></th><th class="cl-bde5a044"><p class="cl-bde57bc8"><span class="cl-bde07d8a">SE</span></p></th><th class="cl-bde5a044"><p class="cl-bde57bc8"><span class="cl-bde07d8a">t</span></p></th><th class="cl-bde5a044"><p class="cl-bde57bc8"><span class="cl-bde07d8a">p</span></p></th><th class="cl-bde5a044"><p class="cl-bde57bc8"><span class="cl-bde07d62">95% CI</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-bde5a04e"><p class="cl-bde57bd2"><span class="cl-bde07d62">(Intercept)</span></p></td><td class="cl-bde5a04f"><p class="cl-bde57bc8"><span class="cl-bde07d62">4.08</span></p></td><td class="cl-bde5a04f"><p class="cl-bde57bc8"><span class="cl-bde07d62">0.03</span></p></td><td class="cl-bde5a04f"><p class="cl-bde57bc8"><span class="cl-bde07d62">123.94</span></p></td><td class="cl-bde5a04f"><p class="cl-bde57bc8"><span class="cl-bde07d62">&lt; .001***</span></p></td><td class="cl-bde5a04f"><p class="cl-bde57bc8"><span class="cl-bde07d62">[4.02, 4.15]</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-bde5a04e"><p class="cl-bde57bd2"><span class="cl-bde07d62">beauty</span></p></td><td class="cl-bde5a04f"><p class="cl-bde57bc8"><span class="cl-bde07d62">0.15</span></p></td><td class="cl-bde5a04f"><p class="cl-bde57bc8"><span class="cl-bde07d62">0.03</span></p></td><td class="cl-bde5a04f"><p class="cl-bde57bc8"><span class="cl-bde07d62">4.65</span></p></td><td class="cl-bde5a04f"><p class="cl-bde57bc8"><span class="cl-bde07d62">&lt; .001***</span></p></td><td class="cl-bde5a04f"><p class="cl-bde57bc8"><span class="cl-bde07d62">[0.09, 0.21]</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-bde5a058"><p class="cl-bde57bd2"><span class="cl-bde07d62">genderfemale</span></p></td><td class="cl-bde5a059"><p class="cl-bde57bc8"><span class="cl-bde07d62">-0.20</span></p></td><td class="cl-bde5a059"><p class="cl-bde57bc8"><span class="cl-bde07d62">0.05</span></p></td><td class="cl-bde5a059"><p class="cl-bde57bc8"><span class="cl-bde07d62">-3.88</span></p></td><td class="cl-bde5a059"><p class="cl-bde57bc8"><span class="cl-bde07d62">&lt; .001***</span></p></td><td class="cl-bde5a059"><p class="cl-bde57bc8"><span class="cl-bde07d62">[-0.30, -0.10]</span></p></td></tr></tbody></table></div>
</div>
</div>
<div class="callout callout-style-simple callout-note no-icon callout-titled" title="Exercise">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>CHALLENGE</strong>: Add a note along with the table explaining what symbols could be presented next to the p-value and what they mean - this will help make the inferential conclusions drawn on the basis of the analysis reproducible.</p>
<div class="callout callout-style-default callout-note callout-titled" title="Solution">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-39-contents" aria-controls="callout-39" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-39" class="callout-39-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a>rempsyc<span class="sc">::</span><span class="fu">nice_table</span>(broom<span class="sc">::</span><span class="fu">tidy</span>(eval_full_lm, <span class="at">conf.int =</span> <span class="cn">TRUE</span>), <span class="at">broom =</span> <span class="st">"lm"</span>, </span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a>                    <span class="at">note =</span> <span class="fu">c</span>(<span class="st">"Significant results are designated by:</span></span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a><span class="st">                             * p &lt; .05, ** p &lt; .01, *** p &lt; .001"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="tabwid"><style>.cl-be18f08e{table-layout:auto;}.cl-be0dd190{font-family:'Times New Roman';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-be0dd19a{font-family:'Times New Roman';font-size:12pt;font-weight:normal;font-style:italic;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-be1229c0{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 2;background-color:transparent;}.cl-be1229ca{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 2;background-color:transparent;}.cl-be1229d4{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-be1242ac{background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(0, 0, 0, 1.00);border-top: 0.5pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-be1242b6{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-be1242c0{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-be1242c1{background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-be1242c2{background-color:transparent;vertical-align: middle;border-bottom: 0.5pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-be1242ca{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-be18f08e"><thead><tr style="overflow-wrap:break-word;"><th class="cl-be1242ac"><p class="cl-be1229c0"><span class="cl-be0dd190">Term</span></p></th><th class="cl-be1242ac"><p class="cl-be1229c0"><span class="cl-be0dd19a">b</span></p></th><th class="cl-be1242ac"><p class="cl-be1229c0"><span class="cl-be0dd19a">SE</span></p></th><th class="cl-be1242ac"><p class="cl-be1229c0"><span class="cl-be0dd19a">t</span></p></th><th class="cl-be1242ac"><p class="cl-be1229c0"><span class="cl-be0dd19a">p</span></p></th><th class="cl-be1242ac"><p class="cl-be1229c0"><span class="cl-be0dd190">95% CI</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-be1242b6"><p class="cl-be1229ca"><span class="cl-be0dd190">(Intercept)</span></p></td><td class="cl-be1242c0"><p class="cl-be1229c0"><span class="cl-be0dd190">4.08</span></p></td><td class="cl-be1242c0"><p class="cl-be1229c0"><span class="cl-be0dd190">0.03</span></p></td><td class="cl-be1242c0"><p class="cl-be1229c0"><span class="cl-be0dd190">123.94</span></p></td><td class="cl-be1242c0"><p class="cl-be1229c0"><span class="cl-be0dd190">&lt; .001***</span></p></td><td class="cl-be1242c0"><p class="cl-be1229c0"><span class="cl-be0dd190">[4.02, 4.15]</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-be1242b6"><p class="cl-be1229ca"><span class="cl-be0dd190">beauty</span></p></td><td class="cl-be1242c0"><p class="cl-be1229c0"><span class="cl-be0dd190">0.15</span></p></td><td class="cl-be1242c0"><p class="cl-be1229c0"><span class="cl-be0dd190">0.03</span></p></td><td class="cl-be1242c0"><p class="cl-be1229c0"><span class="cl-be0dd190">4.65</span></p></td><td class="cl-be1242c0"><p class="cl-be1229c0"><span class="cl-be0dd190">&lt; .001***</span></p></td><td class="cl-be1242c0"><p class="cl-be1229c0"><span class="cl-be0dd190">[0.09, 0.21]</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-be1242c1"><p class="cl-be1229ca"><span class="cl-be0dd190">genderfemale</span></p></td><td class="cl-be1242c2"><p class="cl-be1229c0"><span class="cl-be0dd190">-0.20</span></p></td><td class="cl-be1242c2"><p class="cl-be1229c0"><span class="cl-be0dd190">0.05</span></p></td><td class="cl-be1242c2"><p class="cl-be1229c0"><span class="cl-be0dd190">-3.88</span></p></td><td class="cl-be1242c2"><p class="cl-be1229c0"><span class="cl-be0dd190">&lt; .001***</span></p></td><td class="cl-be1242c2"><p class="cl-be1229c0"><span class="cl-be0dd190">[-0.30, -0.10]</span></p></td></tr></tbody><tfoot><tr style="overflow-wrap:break-word;"><td colspan="6" class="cl-be1242ca"><p class="cl-be1229d4"><span class="cl-be0dd19a">Note. </span><span class="cl-be0dd190">Significant results are designated by:</span><br><span class="cl-be0dd190">                             * p &lt; .05, ** p &lt; .01, *** p &lt; .001</span></p></td></tr></tfoot></table></div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="cross-referencing" class="level4">
<h4 class="anchored">Cross-Referencing</h4>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>This material will not be covered in live workshops, unless there is sufficient time and interest. This section is included for anyone interested in producing final reports in Quarto, rather than using it as an intermediate step to create a report in another programme.</p>
<p>If you want to skip this section, you can jump down to <a href="#rendering">the next section</a>.</p>
</div>
</div>
<p>As anyone who has had to create a long document with lots of tables and figures knows, keeping track of the numbering is a huge pain, especially when, for instance, a reviewer asks you to add something partway through and then everything has to be renumbered.</p>
<p>The good news is that Quarto can take care of figure and table numbering <strong>automatically</strong>. There are two steps to this:</p>
<ul>
<li>Include a label in the relevant code chunk, using the prefix <code>fig-</code> for figures and <code>tbl-</code> for tables.</li>
<li>Refer to the figure or table in the text using <code>@</code>.</li>
</ul>
<div class="callout callout-style-simple callout-note no-icon callout-titled" title="Exercise">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
</div>
<div class="callout-body-container callout-body">
<p>Write a short introductory sentence under the “Final Model” heading and refer to the final model table with a cross-reference.</p>
<div class="callout callout-style-default callout-note callout-titled" title="Solution">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-42-contents" aria-controls="callout-42" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-42" class="callout-42-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>First, add a label and caption to the code chunk from the previous task that produces the model table.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>papaja<span class="sc">::</span><span class="fu">apa_table</span>(eval_full_lm_out<span class="sc">$</span>table)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="tbl-final-model" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-final-model-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;1: The final model predicting teaching evaluation ratings from instructor beauty and gender.
</figcaption>
<div aria-describedby="tbl-final-model-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">

(#tab:tbl-final-model)

<div data-custom-style="Table Caption">
**
</div>
<table class="do-not-create-environment cell table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">Predictor</th>
<th style="text-align: left;"><span class="math inline">\(b\)</span></th>
<th style="text-align: left;">95% CI</th>
<th style="text-align: left;"><span class="math inline">\(t\)</span></th>
<th style="text-align: left;"><span class="math inline">\(\mathit{df}\)</span></th>
<th style="text-align: left;"><span class="math inline">\(p\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Intercept</td>
<td style="text-align: left;">4.08</td>
<td style="text-align: left;">[4.02, 4.15]</td>
<td style="text-align: left;">123.94</td>
<td style="text-align: left;">460</td>
<td style="text-align: left;">&lt; .001</td>
</tr>
<tr class="even">
<td style="text-align: left;">Beauty</td>
<td style="text-align: left;">0.15</td>
<td style="text-align: left;">[0.09, 0.21]</td>
<td style="text-align: left;">4.65</td>
<td style="text-align: left;">460</td>
<td style="text-align: left;">&lt; .001</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Genderfemale</td>
<td style="text-align: left;">-0.20</td>
<td style="text-align: left;">[-0.30, -0.10]</td>
<td style="text-align: left;">-3.88</td>
<td style="text-align: left;">460</td>
<td style="text-align: left;">&lt; .001</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<p>You can of course write whatever you like, or borrow the text below, but use whatever label you gave the table code chunk to refer to the table.</p>
<blockquote class="blockquote">
<p>The final model with two predictors is presented in full in <code>@tbl-final-model</code>.</p>
</blockquote>
<p>Altogether, it should render as follows:</p>
<blockquote class="blockquote">
<h2 id="the-final-model" class="anchored" data-anchor-id="cross-referencing">The Final Model</h2>
<p>The final model with two predictors is presented in full in <a href="#tbl-final-model" class="quarto-xref">Table&nbsp;1</a>.</p>
</blockquote>
<div class="cell">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a>papaja<span class="sc">::</span><span class="fu">apa_table</span>(eval_full_lm_out<span class="sc">$</span>table)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="tbl-final-model1" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-final-model1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;2: The final model predicting teaching evaluation ratings from instructor beauty and gender.
</figcaption>
<div aria-describedby="tbl-final-model1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">

(#tab:tbl-final-model1)

<div data-custom-style="Table Caption">
**
</div>
<table class="do-not-create-environment cell table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">Predictor</th>
<th style="text-align: left;"><span class="math inline">\(b\)</span></th>
<th style="text-align: left;">95% CI</th>
<th style="text-align: left;"><span class="math inline">\(t\)</span></th>
<th style="text-align: left;"><span class="math inline">\(\mathit{df}\)</span></th>
<th style="text-align: left;"><span class="math inline">\(p\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Intercept</td>
<td style="text-align: left;">4.08</td>
<td style="text-align: left;">[4.02, 4.15]</td>
<td style="text-align: left;">123.94</td>
<td style="text-align: left;">460</td>
<td style="text-align: left;">&lt; .001</td>
</tr>
<tr class="even">
<td style="text-align: left;">Beauty</td>
<td style="text-align: left;">0.15</td>
<td style="text-align: left;">[0.09, 0.21]</td>
<td style="text-align: left;">4.65</td>
<td style="text-align: left;">460</td>
<td style="text-align: left;">&lt; .001</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Genderfemale</td>
<td style="text-align: left;">-0.20</td>
<td style="text-align: left;">[-0.30, -0.10]</td>
<td style="text-align: left;">-3.88</td>
<td style="text-align: left;">460</td>
<td style="text-align: left;">&lt; .001</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="callout callout-style-simple callout-note no-icon callout-titled" title="Exercise">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>CHALLENGE</strong>: Complete the final “Assumptions Checks” section summarising the checks and using figure cross-referencing to insert and refer to the diagnostic plots. Refer to <a href="https://quarto.org/docs/authoring/cross-references.html#tables">the Quarto help documentation</a>, for help with the cross-referecing.</p>
<p><em>Hint</em>: To report the exact maximum value of Cook’s distance, you will also need to refer to <code>discovr_08</code> for how to use <code>broom::augment()</code>.</p>
<div class="callout callout-style-default callout-note callout-titled" title="Solution">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-44-contents" aria-controls="callout-44" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-44" class="callout-44-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>You can write whatever you like, but here’s a suggestion with the plot included.</p>
<blockquote class="blockquote">
<h2 id="assumptions-checks-1" class="anchored">Assumptions Checks</h2>
<p>We next assessed the model with two predictors for any evidence of bias. Residual plots (<code>@fig-diag-plots</code>) did not indicate any outstanding issues with normality, linearity, or heteroscedasticity. There was also no evidence of influential cases, as the max value of Cook’s distance was <code>`r round(max(broom::augment(eval_full_lm)$.cooksd), 2)`</code>. Robust models were also fitted as sensitivity checks. Robust parameter estimates estimated using the {robust} package were minimally different from the unadjusted parameter estimates. Similarly, robust HC4 standard errors estimated using the {parameters} package yielded confidence intervals and <em>p</em>-values very similar to the unadjusted values. Therefore, we will proceed with the unadjusted two-predictor model as our final model.</p>
</blockquote>
<div class="sourceCode" id="cb90"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a><span class="in">#| label: fig-diag-plots</span></span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a><span class="in">#| fig-cap: "Diagnostic plots for the two-predictor model."</span></span>
<span id="cb90-4"><a href="#cb90-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-5"><a href="#cb90-5" aria-hidden="true" tabindex="-1"></a><span class="in">ggplot2::autoplot(eval_full_lm, which = c(1, 3, 2, 4))</span></span>
<span id="cb90-6"><a href="#cb90-6" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="rendering" class="level3">
<h3 class="anchored" data-anchor-id="rendering">Rendering</h3>
<p>After all this work to analyse, interpret, and report, it’s finally time to produce the final document. The process of turning a Quarto document into some output format - including running all the code and applying all the formatting - is called <em>rendering</em> (previously <em>knitting</em> with RMarkdown).</p>
<div class="callout callout-style-simple callout-note no-icon callout-titled" title="Exercise">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
</div>
<div class="callout-body-container callout-body">
<p>Render your report document using the “Render” button at the top of the document, or by using the keyboard shortcut Ctrl/Cmd + Shift + K<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a>.</p>
</div>
</div>
<section id="global-options" class="level4">
<h4 class="anchored" data-anchor-id="global-options">Global Options</h4>
<p>At the moment, your report may not be as clean as we’d like it to be: there are likely messages from R floating around and code all over the place, whereas for a formal report, we of course only want to show the final output. This is where the YAML header comes in.</p>
<p>The default YAML header contains only a few explicit settings, and if you haven’t changed anything, probably looks like this:</p>
<pre><code>---
title: "Untitled"
format: html
editor: visual
---</code></pre>
<p>By adding options to the YAML header, we can determine how the document as a whole is rendered. Here are the common ones that I use on the regular:</p>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-38"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-38-1"><a href="#annotated-cell-38-1" aria-hidden="true" tabindex="-1"></a><span class="sc">---</span></span>
<span id="annotated-cell-38-2"><a href="#annotated-cell-38-2" aria-hidden="true" tabindex="-1"></a>title<span class="sc">:</span> <span class="st">"Linear Model Report"</span></span>
<span id="annotated-cell-38-3"><a href="#annotated-cell-38-3" aria-hidden="true" tabindex="-1"></a>format<span class="sc">:</span></span>
<span id="annotated-cell-38-4"><a href="#annotated-cell-38-4" aria-hidden="true" tabindex="-1"></a>  html<span class="sc">:</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-38" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-38-5" class="code-annotation-target"><a href="#annotated-cell-38-5" aria-hidden="true" tabindex="-1"></a>    toc<span class="sc">:</span> true</span>
<span id="annotated-cell-38-6"><a href="#annotated-cell-38-6" aria-hidden="true" tabindex="-1"></a>editor<span class="sc">:</span> visual</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-38" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-38-7" class="code-annotation-target"><a href="#annotated-cell-38-7" aria-hidden="true" tabindex="-1"></a>self<span class="sc">-</span>contained<span class="sc">:</span> true</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-38" data-target-annotation="3" onclick="event.preventDefault();">3</a><span id="annotated-cell-38-8" class="code-annotation-target"><a href="#annotated-cell-38-8" aria-hidden="true" tabindex="-1"></a>execute<span class="sc">:</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-38" data-target-annotation="4" onclick="event.preventDefault();">4</a><span id="annotated-cell-38-9" class="code-annotation-target"><a href="#annotated-cell-38-9" aria-hidden="true" tabindex="-1"></a>  echo<span class="sc">:</span> false</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-38" data-target-annotation="5" onclick="event.preventDefault();">5</a><span id="annotated-cell-38-10" class="code-annotation-target"><a href="#annotated-cell-38-10" aria-hidden="true" tabindex="-1"></a>  warning<span class="sc">:</span> false</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-38" data-target-annotation="6" onclick="event.preventDefault();">6</a><span id="annotated-cell-38-11" class="code-annotation-target"><a href="#annotated-cell-38-11" aria-hidden="true" tabindex="-1"></a>  message<span class="sc">:</span> false</span>
<span id="annotated-cell-38-12"><a href="#annotated-cell-38-12" aria-hidden="true" tabindex="-1"></a><span class="sc">---</span></span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-38" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-38" data-code-lines="5" data-code-annotation="1">Automatically produce a table of contents (ToC) from the document headings.</span>
</dd>
<dt data-target-cell="annotated-cell-38" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-38" data-code-lines="7" data-code-annotation="2">Combine all the files, images, stylesheets etc. into a single output document. Necessary if you want to send an HTML file to someone else and have it look as it should!</span>
</dd>
<dt data-target-cell="annotated-cell-38" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-38" data-code-lines="8" data-code-annotation="3">Set default behaviour for all code chunks as follows:</span>
</dd>
<dt data-target-cell="annotated-cell-38" data-target-annotation="4">4</dt>
<dd>
<span data-code-cell="annotated-cell-38" data-code-lines="9" data-code-annotation="4">Run code and show output, but do not show the code itself.</span>
</dd>
<dt data-target-cell="annotated-cell-38" data-target-annotation="5">5</dt>
<dd>
<span data-code-cell="annotated-cell-38" data-code-lines="10" data-code-annotation="5">Do not show any warnings produced by code.</span>
</dd>
<dt data-target-cell="annotated-cell-38" data-target-annotation="6">6</dt>
<dd>
<span data-code-cell="annotated-cell-38" data-code-lines="11" data-code-annotation="6">Do not show any messages produced by code.</span>
</dd>
</dl>
</div>
</div>
<p>The requirements for each document will change depending on its purpose, but particulary the <code>execute</code> settings above are a good starting point for a clean and readable rendered document.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>The <a href="https://quarto.org/docs/computations/execution-options.html">Quarto help documentation</a>, as usual, has a complete list of YAML options, including how to set default behaviour for figures and other settings.</p>
</div>
</div>
</section>
<section id="code-chunk-options" class="level4">
<h4 class="anchored" data-anchor-id="code-chunk-options">Code Chunk Options</h4>
<p>Global options apply to the entire document. The options you specify in the YAML are automatically applied to all code chunks, but you may want to change these settings for individual code chunks to get the effect you want.</p>
<p>For example, you may have a code chunk containing some processing code that you used to view and clean your data. If your global execution option is set to <code>echo: false</code>, the code output would still appear, although the code itself would be hidden. If, for this particular code chunk, you don’t want the output to appear either, you can override the global option with a local option for that chunk only.</p>
<p>Local code chunk options appear as “hashpipe” (<code>#|</code>) comments, as we have seen earlier with labels. They use the same syntax as YAML, but the settings only apply to individual code chunks. Any settings that aren’t explicitly changed within the chunk are inherited from the YAML settings.</p>
<p>For this example, we could set a local code chunk option <code>include: false</code> which will prevent the output from appearing in the document.<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a></p>
<div class="sourceCode" id="cb92"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a><span class="in">#| include: false</span></span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-4"><a href="#cb92-4" aria-hidden="true" tabindex="-1"></a><span class="in">some_code_doing_cleaning_and_processing</span></span>
<span id="cb92-5"><a href="#cb92-5" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="output-formats" class="level4">
<h4 class="anchored" data-anchor-id="output-formats">Output Formats</h4>
<p>For these tutorials, we will generally stick to HTML rendering, as it’s the most painless of the rendering options. However, you will likely find yourself wanting to produce some other type of document, which you can easily<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a> do from the same Quarto document.</p>
<p>To render to a different format, change the YAML <code>format:</code> setting to a different output.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>As per, the <a href="https://quarto.org/docs/output-formats/all-formats.html">Quarto guide on output formats</a> has all the information you need!</p>
</div>
</div>
<div class="callout callout-style-simple callout-note no-icon callout-titled" title="Exercise">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
</div>
<div class="callout-body-container callout-body">
<p>Render your linear model report to a Word document.</p>
<div class="callout callout-style-default callout-note callout-titled" title="Solution">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-49-contents" aria-controls="callout-49" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-49" class="callout-49-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Simply update the <code>format: html</code> YAML option to <code>format: docx</code> and render your document. Note that the <code>format</code> options are usually named after the file extension rather than the name of the programme necessarily (e.g.&nbsp;<code>docx</code> rather than <code>word</code>). We did quite a lot so your Quarto document and the Word output file may be a bit messy. If that is the case, go through your Quarto document and make it more human-friendly - add comments to the code to remind yourself what it does, fix any overwritting that you think could cause problems, change any object names that you think are not meaningful enough.</p>
</div>
</div>
</div>
</div>
</div>
<p>And there we have it! You now have a complete example of a linear model report, rendered into both HTML and Word, to refer to. Well done!</p>


</section>
</section>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Somewhat confusingly, this is <em>not</em> the function we teach UGs to perform ANOVAs! See <code>discovr</code> tutorials 11, 12, 15, and 16 for a detailed guide through the <code>afex</code> package for running linear models with categorical predictors.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>Mostly true, except for <a href="#inline-code">inline code</a>!<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>Generally, inline code should only ever produce a single value, otherwise the formatting can get <em>interesting</em>. This value, however, could be longer than a single number, if you want to get creative with your dynamic reporting!<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>It seems obvious that this should be R instead of K, but remember this made perfect sense when it was called “knitting”!<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p>For writing tutorials, I make extensive use of <code>eval: false</code>, which includes the code in the output but does not attempt to run the code. This allows me to write all kinds of nonsense code without R getting stroppy and throwing errors all over the place!<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6"><p>Depends crucially on what you consider to be “easy”, especially when dealing with PDFs!<a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
<p>© Jennifer Mankin 2024</p>
</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>