<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.553">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>R Training - 10: Qualtrics and Labelled Data</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="../../site_libs/kePrint-0.0.1/kePrint.js"></script>

<link href="../../site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">

<link href="../../site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">

<script src="../../site_libs/pagedtable-1.1/js/pagedtable.js"></script>



<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">R Training</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="../../tutorials.html" aria-current="page"> 
<span class="menu-text">Tutorials</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../workshops.html"> 
<span class="menu-text">Workshops</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../resources.html"> 
<span class="menu-text">Resources</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="https://canvas.sussex.ac.uk/courses/29761"> 
<span class="menu-text">Canvas</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../tutorials/archive_autumn_2023/00_quick_ref.html">Archive (Autumn 2023)</a></li><li class="breadcrumb-item"><a href="../../tutorials/archive_autumn_2023/10_qtrics.html">10: Qualtrics and Labelled Data</a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tutorials Overview</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../quick_ref.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Quick Reference</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Current</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/docs/01_intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">01: IntRoduction</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/docs/02_intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">02: IntRoduction II</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/docs/03_datasets.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">03: Datasets</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/docs/04_filter.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">04: Filter and Select</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Archive (Autumn 2023)</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/archive_autumn_2023/00_quick_ref.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Quick Reference</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/archive_autumn_2023/01_02_intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">01/02: IntRoduction</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/archive_autumn_2023/03_datasets.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">03: Datasets</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/archive_autumn_2023/04_lm.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">04: Reporting Linear Models with Quarto</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/archive_autumn_2023/05_filter.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">05: Filter and Select</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/archive_autumn_2023/06_changes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">06: Mutate and Summarise</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/archive_autumn_2023/07_dataviz.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">07: Visualisations</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/archive_autumn_2023/08_analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">08: Analysis</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/archive_autumn_2023/09_testflight.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">09: Test Flight</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/archive_autumn_2023/10_qtrics.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">10: Qualtrics and Labelled Data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/archive_autumn_2023/11_qtrics2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">11: Qualtrics II</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#overview" id="toc-overview" class="nav-link active" data-scroll-target="#overview">Overview</a>
  <ul>
  <li><a href="#acknowledgements" id="toc-acknowledgements" class="nav-link" data-scroll-target="#acknowledgements">Acknowledgements</a></li>
  </ul></li>
  <li><a href="#setup" id="toc-setup" class="nav-link" data-scroll-target="#setup">Setup</a>
  <ul>
  <li><a href="#packages" id="toc-packages" class="nav-link" data-scroll-target="#packages">Packages</a></li>
  <li><a href="#data" id="toc-data" class="nav-link" data-scroll-target="#data">Data</a>
  <ul class="collapse">
  <li><a href="#codebook" id="toc-codebook" class="nav-link" data-scroll-target="#codebook">Codebook</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#qualtrics-data" id="toc-qualtrics-data" class="nav-link" data-scroll-target="#qualtrics-data">Qualtrics Data</a>
  <ul>
  <li><a href="#sav-data" id="toc-sav-data" class="nav-link" data-scroll-target="#sav-data">SAV Data</a></li>
  <li><a href="#exporting-from-qualtrics" id="toc-exporting-from-qualtrics" class="nav-link" data-scroll-target="#exporting-from-qualtrics">Exporting from Qualtrics</a></li>
  </ul></li>
  <li><a href="#the-plan" id="toc-the-plan" class="nav-link" data-scroll-target="#the-plan">The Plan</a></li>
  <li><a href="#cleanup-and-data-dictionary" id="toc-cleanup-and-data-dictionary" class="nav-link" data-scroll-target="#cleanup-and-data-dictionary">Cleanup and Data Dictionary</a>
  <ul>
  <li><a href="#renaming-variables" id="toc-renaming-variables" class="nav-link" data-scroll-target="#renaming-variables">Renaming Variables</a></li>
  <li><a href="#separating-columns" id="toc-separating-columns" class="nav-link" data-scroll-target="#separating-columns">Separating Columns</a></li>
  <li><a href="#viewer-data-dictionary" id="toc-viewer-data-dictionary" class="nav-link" data-scroll-target="#viewer-data-dictionary">Viewer Data Dictionary</a></li>
  </ul></li>
  <li><a href="#labelled-data" id="toc-labelled-data" class="nav-link" data-scroll-target="#labelled-data">Labelled Data</a>
  <ul>
  <li><a href="#variable-labels" id="toc-variable-labels" class="nav-link" data-scroll-target="#variable-labels">Variable Labels</a>
  <ul class="collapse">
  <li><a href="#getting-labels" id="toc-getting-labels" class="nav-link" data-scroll-target="#getting-labels">Getting Labels</a></li>
  <li><a href="#creatingupdating-labels" id="toc-creatingupdating-labels" class="nav-link" data-scroll-target="#creatingupdating-labels">Creating/Updating Labels</a></li>
  <li><a href="#searching-labels" id="toc-searching-labels" class="nav-link" data-scroll-target="#searching-labels">Searching Labels</a></li>
  </ul></li>
  <li><a href="#value-labels" id="toc-value-labels" class="nav-link" data-scroll-target="#value-labels">Value Labels</a>
  <ul class="collapse">
  <li><a href="#getting-labels-1" id="toc-getting-labels-1" class="nav-link" data-scroll-target="#getting-labels-1">Getting Labels</a></li>
  <li><a href="#creatingupdating-labels-1" id="toc-creatingupdating-labels-1" class="nav-link" data-scroll-target="#creatingupdating-labels-1">Creating/Updating Labels</a></li>
  </ul></li>
  <li><a href="#missing-values" id="toc-missing-values" class="nav-link" data-scroll-target="#missing-values">Missing Values</a></li>
  </ul></li>
  <li><a href="#converting-variables" id="toc-converting-variables" class="nav-link" data-scroll-target="#converting-variables">Converting Variables</a>
  <ul>
  <li><a href="#factor" id="toc-factor" class="nav-link" data-scroll-target="#factor">Factor</a></li>
  <li><a href="#numeric" id="toc-numeric" class="nav-link" data-scroll-target="#numeric">Numeric</a></li>
  <li><a href="#conditional-conversion" id="toc-conditional-conversion" class="nav-link" data-scroll-target="#conditional-conversion">Conditional Conversion</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../tutorials/archive_autumn_2023/00_quick_ref.html">Archive (Autumn 2023)</a></li><li class="breadcrumb-item"><a href="../../tutorials/archive_autumn_2023/10_qtrics.html">10: Qualtrics and Labelled Data</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">10: Qualtrics and Labelled Data</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="overview" class="level2">
<h2 class="anchored" data-anchor-id="overview">Overview</h2>
<p>This tutorial will focus on efficient, transparent, and user-friendly techniques for working with data specifically gathered using the <a href="https://www.qualtrics.com/">Qualtrics survey platform</a>. We will cover how to import and work with labelled data from Qualtrics and how to easily produce a data dictionary straight from the dataset itself.</p>
<section id="acknowledgements" class="level3">
<h3 class="anchored" data-anchor-id="acknowledgements">Acknowledgements</h3>
<p>This tutorial was co-conceived and co-created with two brilliant PhD researchers, <a href="mailto:haie20@sussex.ac.uk">Hanna Eldarwish</a> and <a href="Joshua.Francis@sussex.ac.uk">Josh Francis</a>, who contributed invaluable input throughout the process of developing the tutorial. This included collecting commonly asked questions and issues with Qualtrics data analysis; discussing the topics to cover and how best to cover them; and testing code and solutions. Hanna Eldarwish also provided the basis for the dataset, collected during her undergraduate dissertation at Sussex under the supervision of <a href="https://profiles.sussex.ac.uk/p323096-vlad-costin">Dr Vlad Costin</a>.</p>
</section>
</section>
<section id="setup" class="level2">
<h2 class="anchored" data-anchor-id="setup">Setup</h2>
<section id="packages" class="level3">
<h3 class="anchored" data-anchor-id="packages">Packages</h3>
<p>As usual, we will be using {tidyverse}. When {tidyverse} is installed, it also installs the {haven} package, which we will use for data importing. However, {haven} isn’t loaded as part of the core {tidyverse} group of packages, so let’s load it separately. Finally, we will also need the {labelled} package to work with labelled data.</p>
<div class="callout callout-style-simple callout-note no-icon callout-titled" title="Exercise">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
</div>
<div class="callout-body-container callout-body">
<p>Load the packages.</p>
<div class="callout callout-style-default callout-note callout-titled" title="Solution">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(haven)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(labelled)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sjPlot)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="data" class="level3">
<h3 class="anchored" data-anchor-id="data">Data</h3>
<p>Today’s dataset focuses on various aspects of meaning in life (MiL), and has been randomly generated based on a real dataset kindly contributed by Hanna Eldarwish and Vlad Costin. All variables have been randomly generated, but they are based on the patterns in the original dataset. The original, bigger dataset will be made available alongside article publication in the future, so keep an eye out for it!</p>
<div class="callout callout-style-default callout-tip callout-titled" title="New File Type">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
New File Type
</div>
</div>
<div class="callout-body-container callout-body">
<p>You might notice that instead of the familiar <code>readr::read_csv()</code>, today we have <code>haven::read_sav()</code>. That’s because the file I’ve prepared is a SAV file, associated with the SPSS statistical analysis programme. The next section explains <em>why</em> we are using this data type, but otherwise, there’s nothing new about these commands.</p>
</div>
</div>
<div class="callout callout-style-simple callout-note no-icon callout-titled" title="Exercise">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
</div>
<div class="callout-body-container callout-body">
<p>Read in the <code>mil_data.sav</code> object from the data folder, or alternatively from Github via URL, as you prefer.</p>
<div class="callout callout-style-default callout-note callout-titled" title="Solution">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>From a folder:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>mil_data <span class="ot">&lt;-</span> here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"data/mil_data.sav"</span>) <span class="sc">|&gt;</span> haven<span class="sc">::</span><span class="fu">read_sav</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>From URL:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>mil_data <span class="ot">&lt;-</span> haven<span class="sc">::</span><span class="fu">read_sav</span>(<span class="st">"https://raw.githubusercontent.com/drmankin/practicum/master/data/mil_data.sav"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</div>
</div>
<section id="codebook" class="level4">
<h4 class="anchored" data-anchor-id="codebook">Codebook</h4>
<p>This codebook is intentionally sparse, because we’ll be generating our own from the dataset in just a moment. This table covers only the questionnaire measures to help you understand the variables.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<table class="table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Variable Prefix</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Scale</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Subscale</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">global_meaning</td>
<td style="text-align: left;">Meaning in Life</td>
<td style="text-align: left;">Global Meaning</td>
</tr>
<tr class="even">
<td style="text-align: left;">mattering</td>
<td style="text-align: left;">Meaning in Life</td>
<td style="text-align: left;">Mattering</td>
</tr>
<tr class="odd">
<td style="text-align: left;">coherence</td>
<td style="text-align: left;">Meaning in Life</td>
<td style="text-align: left;">Coherence</td>
</tr>
<tr class="even">
<td style="text-align: left;">purpose</td>
<td style="text-align: left;">Meaning in Life</td>
<td style="text-align: left;">Purpose</td>
</tr>
<tr class="odd">
<td style="text-align: left;">sym_immortality</td>
<td style="text-align: left;">Symbolic Immortality</td>
<td style="text-align: left;">Single scale</td>
</tr>
<tr class="even">
<td style="text-align: left;">belonging</td>
<td style="text-align: left;">Belonging</td>
<td style="text-align: left;">Single scale</td>
</tr>
</tbody>
</table>


</div>
</div>
</div>
<p>&nbsp;</p>
</section>
</section>
</section>
<section id="qualtrics-data" class="level2">
<h2 class="anchored" data-anchor-id="qualtrics-data">Qualtrics Data</h2>
<p><a href="https://www.sussex.ac.uk/its/services/software/qualtrics">Qualtrics</a> is a survey-building tool very commonly used for questionnaire-type studies, as well as some experimental work. The University of Sussex has an institutional licence for Qualtrics, so all staff and students can log in with their Sussex details and easily construct and collaborate on surveys.</p>
<p>For help using Qualtrics itself, the <a href="https://www.qualtrics.com/support/survey-platform/my-projects/my-projects-overview/">Qualtrics support pages</a> are generally excellent. This tutorial will only briefly touch on the options within Qualtrics itself.</p>
<p>Once the study is complete and responses have been collected, you will need to <a href="https://www.qualtrics.com/support/survey-platform/data-and-analysis-module/data/download-data/export-data-overview/">export your data from Qualtrics</a> so that you can analyse it. Qualtrics offers a variety of export data types, including our familiar CSV type. However, we’re going to instead explore a new option: SAV data.</p>
<section id="sav-data" class="level3">
<h3 class="anchored" data-anchor-id="sav-data">SAV Data</h3>
<p>The <code>.sav</code> file type is associated with <a href="https://www.ibm.com/products/spss-statistics">SPSS</a>, a widely used statistical analysis programme. So, why are we using SPSS files when working in R?</p>
<p>Importing via <code>.sav</code> has two key advantages. First, it results in a much cleaner import format. If you try importing the same data via <code>.csv</code> file, you’ll find that you need to do some very fiddly and pointless cleanup first. For instance, the <code>.csv</code> version of the same dataset will introduce some empty rows that have to be deleted with <code>dplyr::slice()</code> or similar. The <code>.sav</code> version of the dataset doesn’t have any comparable formatting issues.</p>
<p>Most importantly, however, importing <code>.sav</code> file types into R with particular packages like {haven} gets us a dataset with a special type of data: namely, labelled data. The labels allow us to preserve important information about the questions asked and response options in Qualtrics, and to (mostly) painlessly create codebooks for datasets. We will explore these features in depth in this tutorial.</p>
</section>
<section id="exporting-from-qualtrics" class="level3">
<h3 class="anchored" data-anchor-id="exporting-from-qualtrics">Exporting from Qualtrics</h3>
<p>If you’d like to work with your own study data, you will need to export your data in SAV format from Qualtrics first. To do this, open your Qualtrics survey and select the “Data &amp; Analysis” tab along the top, just under the name of your survey.</p>
<p>In the Data Table view, look to the right-hand side of the screen. Click on the drop-down menu labelled “Export &amp; Import”, then select the first option, “Export Data…”</p>
<p><img src="../..\images/qtrics_export.png" class="img-fluid" alt="A screenshot the Qualtrics Data &amp; Analysis screen with red boxes indicating the steps to take to export data: Data &amp; Analysis tab, Export &amp; Import menu, and Export Data... option."></p>
<p>In the “Download a data table” menu, choose “SPSS” from the choices along the top. Make sure “Download all fields” is ticked, then click “Download”.</p>
<p><img src="../..\images/qtrics_spss.png" class="img-fluid" alt="A screenshot the Qualtrics Download a Data Table screen with red boxes indicating the steps to take to export SPSS data: SPSS tab, Download button."></p>
<p>The dataset will download automatically to your computer’s Downloads folder. From there, you should rename it to something sensible and move it into a <code>data</code> folder within your project folder. From there, you can read it in using the <code>here::here() |&gt; haven::read_sav()</code> combo that we saw in the Data section previously.</p>
<div class="callout callout-style-default callout-tip callout-titled" title="Sensible Naming Conventions and Folder Structure">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-6-contents" aria-controls="callout-6" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Sensible Naming Conventions and Folder Structure
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-6" class="callout-6-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>I know it may not seem like something anyone should care about, but sensible file and folder names will make your life so much easier for working in R (and generally).</p>
<p>For folder structure, make sure you do the following:</p>
<ul>
<li>Always always <em>ALWAYS</em> use an R Project for working in R.</li>
<li>Have a consistent set of folders for each project: for example, <code>images</code>, <code>data</code>, and <code>docs</code>.</li>
<li>Use sub-folders where necessary, but consider using sensible naming conventions instead.</li>
</ul>
<p>For naming conventions, your file name should make it obvious what information it contains and when it was created, <em>especially</em> for datasets like this. Personally, I would prefer longer and more explicit file names over brevity; this is because I prefer to navigate files using R, and that’s <em>much</em> easier using explicit file names than it is with file metadata.</p>
<p>So, for a download like this, I’d probably name it something like <code>qtrics_diss_2023_11_08.sav</code>. The <code>qtrics</code> tells me it’s a Qualtrics export, the <code>diss</code> tells me it’s a dissertation project, and the last bit is the full date in easily machine-readable format. Imagine if I continue to recruit participants and download a new dataset later, say a month from now, and name it <code>qtrics_diss_2023_12_08.sav</code>. I could easily distinguish which dataset was which by the date, but also see that they are different versions of the same thing by their shared prefix.</p>
<p>This is a much more reliable system than calling them, say, <code>Qualtrics output.sav</code> and <code>Dissertation FINAL REAL.sav</code>. This kind of naming “convention” contains no information about which is which or when they were exported, or even that they’re two versions of the same study dataset! It might seem like a small detail at the time, but Future You trying to figure out which dataset to use weeks or months later will feel the difference.</p>
</div>
</div>
</div>
<p>&nbsp;</p>
</section>
</section>
<section id="the-plan" class="level2">
<h2 class="anchored" data-anchor-id="the-plan">The Plan</h2>
<p>Our workflow for this dataset will be slightly different than previously. We’ll start by doing some basic cleanup of the dataset, and produce a codebook, or “data dictionary”, drawing on the label metadata in the SAV file. For the purpose of practice, we’ll also have a look at how to work with those labels, and manage different types of missing values.</p>
<p>As useful as labels are, they will get in the way when we want to work with our dataset further. So, we’ll convert the variables in the dataset into either factors, for categorical data, or numeric, for continuous data <a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>. From that point forward, we can work with the dataset using the techniques and functions we’ve learned thus far.</p>
</section>
<section id="cleanup-and-data-dictionary" class="level2">
<h2 class="anchored" data-anchor-id="cleanup-and-data-dictionary">Cleanup and Data Dictionary</h2>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>Most of the following examples are drawn from the <a href="https://cran.r-project.org/web/packages/labelled/vignettes/intro_labelled.html">“Introduction to labelled” vignette</a> from the {labelled} package. If you want to do something with labelled data that isn’t covered here, that’s a good place to start!</p>
</div>
</div>
<p>Let’s start off by having a look at the dataset. As usual, you can call the dataset or use <code>View()</code> on it directly, but we’re going to take advantage of the new data type to get a more helpful summary, that emulates the “Variable View” in SPSS.</p>
<div class="callout callout-style-simple callout-note no-icon callout-titled" title="Exercise">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
</div>
<div class="callout-body-container callout-body">
<p>Use the <code>generate_dictionary()</code> function from the {labelled} packages to create a data dictionary for <code>mil_data</code>, then pipe it into <code>View()</code>.</p>
<div class="callout callout-style-default callout-note callout-titled" title="Solution">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-8-contents" aria-controls="callout-8" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-8" class="callout-8-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>mil_data <span class="sc">|&gt;</span> </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  labelled<span class="sc">::</span><span class="fu">generate_dictionary</span>() <span class="sc">|&gt;</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">View</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["pos"],"name":[1],"type":["int"],"align":["right"]},{"label":["variable"],"name":[2],"type":["chr"],"align":["left"]},{"label":["label"],"name":[3],"type":["chr"],"align":["left"]},{"label":["col_type"],"name":[4],"type":["chr"],"align":["left"]},{"label":["missing"],"name":[5],"type":["int"],"align":["right"]},{"label":["levels"],"name":[6],"type":["named list"],"align":["right"]},{"label":["value_labels"],"name":[7],"type":["chr"],"align":["left"]}],"data":[{"1":"1","2":"StartDate","3":"Start Date","4":"dttm","5":"0","6":"<NULL>","7":""},{"1":"2","2":"EndDate","3":"End Date","4":"dttm","5":"0","6":"<NULL>","7":""},{"1":"3","2":"Status","3":"Response Type","4":"dbl+lbl","5":"0","6":"<NULL>","7":"IP Address, Survey Preview, Survey Test, Imported, Spam, Survey Preview Spam, Imported Spam, Offline, Offline Survey Preview, EX, EX Spam, EX Offline"},{"1":"4","2":"Finished","3":"Finished","4":"dbl+lbl","5":"0","6":"<NULL>","7":"False, True"},{"1":"5","2":"RecordedDate","3":"Recorded Date","4":"dttm","5":"0","6":"<NULL>","7":""},{"1":"6","2":"ResponseId","3":"Response ID","4":"chr","5":"0","6":"<NULL>","7":""},{"1":"7","2":"DistributionChannel","3":"Distribution Channel","4":"chr","5":"0","6":"<NULL>","7":""},{"1":"8","2":"UserLanguage","3":"User Language","4":"chr","5":"0","6":"<NULL>","7":""},{"1":"9","2":"english_fluency_1","3":"Please select which box best describes your English fluency. - How well can you speak English?","4":"dbl+lbl","5":"0","6":"<NULL>","7":"Very well, Well, Not well, Not at all"},{"1":"10","2":"age","3":"How old are you?","4":"dbl","5":"0","6":"<NULL>","7":""},{"1":"11","2":"gender","3":"What is your gender identity?\\n\\nThis question is optional. - Selected Choice","4":"dbl+lbl","5":"25","6":"<NULL>","7":"Male, Female, Non-binary, Other (please state below)"},{"1":"12","2":"global_meaning_1","3":"Please rate the extent to which you agree or disagree with these statements. - My life as a whole has meaning.","4":"dbl+lbl","5":"16","6":"<NULL>","7":"Strongly disagree, Disagree, Somewhat disagree, Neither agree nor disagree, Somewhat agree, Agree, Strongly agree"},{"1":"13","2":"global_meaning_2","3":"Please rate the extent to which you agree or disagree with these statements. - My entire existence is full of meaning.","4":"dbl+lbl","5":"21","6":"<NULL>","7":"Strongly disagree, Disagree, Somewhat disagree, Neither agree nor disagree, Somewhat agree, Agree, Strongly agree"},{"1":"14","2":"global_meaning_3","3":"Please rate the extent to which you agree or disagree with these statements. - My life is meaningless.","4":"dbl+lbl","5":"20","6":"<NULL>","7":"Strongly disagree, Disagree, Somewhat disagree, Neither agree nor disagree, Somewhat agree, Agree, Strongly agree"},{"1":"15","2":"global_meaning_4","3":"Please rate the extent to which you agree or disagree with these statements. - My existence is empty of meaning.","4":"dbl+lbl","5":"18","6":"<NULL>","7":"Strongly disagree, Disagree, Somewhat disagree, Neither agree nor disagree, Somewhat agree, Agree, Strongly agree"},{"1":"16","2":"mattering_1","3":"Please rate the extent to which you agree or disagree with these statements. - Whether my life ever existed matters even in the grand scheme of the universe.","4":"dbl+lbl","5":"18","6":"<NULL>","7":"Strongly disagree, Disagree, Somewhat disagree, Neither agree nor disagree, Somewhat agree, Agree, Strongly agree"},{"1":"17","2":"mattering_2","3":"Please rate the extent to which you agree or disagree with these statements. - Even considering how big the universe is, I can say that my life matters.","4":"dbl+lbl","5":"18","6":"<NULL>","7":"Strongly disagree, Disagree, Somewhat disagree, Neither agree nor disagree, Somewhat agree, Agree, Strongly agree"},{"1":"18","2":"mattering_3","3":"Please rate the extent to which you agree or disagree with these statements. - My existence is not significant in the grand scheme of things.","4":"dbl+lbl","5":"21","6":"<NULL>","7":"Strongly disagree, Disagree, Somewhat disagree, Neither agree nor disagree, Somewhat agree, Agree, Strongly agree"},{"1":"19","2":"mattering_4","3":"Please rate the extent to which you agree or disagree with these statements. - Given the vastness of the universe, my life does not matter.","4":"dbl+lbl","5":"15","6":"<NULL>","7":"Strongly disagree, Disagree, Somewhat disagree, Neither agree nor disagree, Somewhat agree, Agree, Strongly agree"},{"1":"20","2":"coherence_1","3":"Please rate the extent to which you agree or disagree with these statements. - I can make sense of the things that happen in my life.","4":"dbl+lbl","5":"18","6":"<NULL>","7":"Strongly disagree, Disagree, Somewhat disagree, Neither agree nor disagree, Somewhat agree, Agree, Strongly agree"},{"1":"21","2":"coherence_42","3":"Please rate the extent to which you agree or disagree with these statements. - Looking at my life as a whole, things seem clear to me.","4":"dbl+lbl","5":"16","6":"<NULL>","7":"Strongly disagree, Disagree, Somewhat disagree, Neither agree nor disagree, Somewhat agree, Agree, Strongly agree"},{"1":"22","2":"coherence_3","3":"Please rate the extent to which you agree or disagree with these statements. - I can’t make sense of events in my life.","4":"dbl+lbl","5":"17","6":"<NULL>","7":"Strongly disagree, Disagree, Somewhat disagree, Neither agree nor disagree, Somewhat agree, Agree, Strongly agree"},{"1":"23","2":"coherence_4","3":"Please rate the extent to which you agree or disagree with these statements. - My life feels like a sequence of unconnected events.","4":"dbl+lbl","5":"17","6":"<NULL>","7":"Strongly disagree, Disagree, Somewhat disagree, Neither agree nor disagree, Somewhat agree, Agree, Strongly agree"},{"1":"24","2":"purpose_1","3":"Please rate the extent to which you agree or disagree with these statements. - I have a good sense of what I am trying to accomplish in life.","4":"dbl+lbl","5":"18","6":"<NULL>","7":"Strongly disagree, Disagree, Somewhat disagree, Neither agree nor disagree, Somewhat agree, Agree, Strongly agree"},{"1":"25","2":"purpose_2","3":"Please rate the extent to which you agree or disagree with these statements. - I have certain life goals that compel me to keep going.","4":"dbl+lbl","5":"20","6":"<NULL>","7":"Strongly disagree, Disagree, Somewhat disagree, Neither agree nor disagree, Somewhat agree, Agree, Strongly agree"},{"1":"26","2":"purpose_3","3":"Please rate the extent to which you agree or disagree with these statements. - I don’t know what I am trying to accomplish in life.","4":"dbl+lbl","5":"18","6":"<NULL>","7":"Strongly disagree, Disagree, Somewhat disagree, Neither agree nor disagree, Somewhat agree, Agree, Strongly agree"},{"1":"27","2":"purpose_4","3":"Please rate the extent to which you agree or disagree with these statements. - I don’t have compelling life goals that keep me going.","4":"dbl+lbl","5":"19","6":"<NULL>","7":"Strongly disagree, Disagree, Somewhat disagree, Neither agree nor disagree, Somewhat agree, Agree, Strongly agree"},{"1":"28","2":"sym_immortality_1","3":"Please indicate the extent to which you believe these statements are likely to occur. - After I die, my impact on the world will continue","4":"dbl+lbl","5":"19","6":"<NULL>","7":"Extremely unlikely, Moderately unlikely, Slightly unlikely, Neither likely nor unlikely, Slightly likely, Moderately likely, Extremely likely"},{"1":"29","2":"sym_immortality_2","3":"Please indicate the extent to which you believe these statements are likely to occur. - Some aspect of myself, such as my name or accomplishments, will be remembered long after I die","4":"dbl+lbl","5":"19","6":"<NULL>","7":"Extremely unlikely, Moderately unlikely, Slightly unlikely, Neither likely nor unlikely, Slightly likely, Moderately likely, Extremely likely"},{"1":"30","2":"belonging_1","3":"Please rate the extent to which these statements apply to you. - When I am with other people, I feel included","4":"dbl+lbl","5":"20","6":"<NULL>","7":"Strongly disagree, Disagree, Somewhat Disagree, Neither Agree nor Disagree, Somewhat agree, Agree, Strongly agree"},{"1":"31","2":"belonging_2","3":"Please rate the extent to which these statements apply to you. - I have close bonds with family and friends","4":"dbl+lbl","5":"15","6":"<NULL>","7":"Strongly disagree, Disagree, Somewhat Disagree, Neither Agree nor Disagree, Somewhat agree, Agree, Strongly agree"},{"1":"32","2":"belonging_3","3":"Please rate the extent to which these statements apply to you. - I feel accepted by others","4":"dbl+lbl","5":"18","6":"<NULL>","7":"Strongly disagree, Disagree, Somewhat Disagree, Neither Agree nor Disagree, Somewhat agree, Agree, Strongly agree"},{"1":"33","2":"belonging_4","3":"Please rate the extent to which these statements apply to you. - I have a sense of belonging","4":"dbl+lbl","5":"15","6":"<NULL>","7":"Strongly disagree, Disagree, Somewhat Disagree, Neither Agree nor Disagree, Somewhat agree, Agree, Strongly agree"},{"1":"34","2":"belonging_5","3":"Please rate the extent to which these statements apply to you. - I have a place at the table with others","4":"dbl+lbl","5":"18","6":"<NULL>","7":"Strongly disagree, Disagree, Somewhat Disagree, Neither Agree nor Disagree, Somewhat agree, Agree, Strongly agree"},{"1":"35","2":"belonging_6","3":"Please rate the extent to which these statements apply to you. - I feel connected with others","4":"dbl+lbl","5":"19","6":"<NULL>","7":"Strongly disagree, Disagree, Somewhat Disagree, Neither Agree nor Disagree, Somewhat agree, Agree, Strongly agree"},{"1":"36","2":"belonging_7","3":"Please rate the extent to which these statements apply to you. - I feel like an outsider","4":"dbl+lbl","5":"16","6":"<NULL>","7":"Strongly disagree, Disagree, Somewhat Disagree, Neither Agree nor Disagree, Somewhat agree, Agree, Strongly agree"},{"1":"37","2":"belonging_8","3":"Please rate the extent to which these statements apply to you. - I feel as if people do not care about me","4":"dbl+lbl","5":"18","6":"<NULL>","7":"Strongly disagree, Disagree, Somewhat Disagree, Neither Agree nor Disagree, Somewhat agree, Agree, Strongly agree"},{"1":"38","2":"belonging_9","3":"Please rate the extent to which these statements apply to you. - Because I do not belong, I feel distant during the holiday season","4":"dbl+lbl","5":"18","6":"<NULL>","7":"Strongly disagree, Disagree, Somewhat Disagree, Neither Agree nor Disagree, Somewhat agree, Agree, Strongly agree"},{"1":"39","2":"belonging_10","3":"Please rate the extent to which these statements apply to you. - I feel isolated from the rest of the world","4":"dbl+lbl","5":"17","6":"<NULL>","7":"Strongly disagree, Disagree, Somewhat Disagree, Neither Agree nor Disagree, Somewhat agree, Agree, Strongly agree"},{"1":"40","2":"belonging_11","3":"Please rate the extent to which these statements apply to you. - When I am with other people, I feel like a stranger","4":"dbl+lbl","5":"18","6":"<NULL>","7":"Strongly disagree, Disagree, Somewhat Disagree, Neither Agree nor Disagree, Somewhat agree, Agree, Strongly agree"},{"1":"41","2":"belonging_12","3":"Please rate the extent to which these statements apply to you. - Friends and family do not involve me in their plans","4":"dbl+lbl","5":"17","6":"<NULL>","7":"Strongly disagree, Disagree, Somewhat Disagree, Neither Agree nor Disagree, Somewhat agree, Agree, Strongly agree"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<p>What we get is a new summary dataset that contains some useful information about each of the variables in <code>mil_data</code>. Along with the actual variable name in the dataset, which we see under <code>variable</code>, we also get the actual question that participants saw in Qualtrics under <code>label</code>, and the response options - where applicable - in <code>value_labels</code>.</p>
<p>Why a data dictionary? There’s two key reasons to do this. First, as we’ve already seen throughout these tutorials, data dictionaries (or “codebooks”) are very useful for understanding datasets, even your own. In this case, we’ve generally named our variables usefully in Qualtrics before the export, but if you forget to (or don’t typically) do this, this reference helps you navigate unhelpful variable names like “Q42”, “Q16” etc. The second reason is for other people: if you want to share your data publicly, including a dictionary/codebook is not only a kindness to other users but also helps prevent misuse or misunderstandings.</p>
<p>Before we look at these labels in more depth, we’re first going to address two minor issues that commonly come up with Qualtrics data to make sure our dataset is ready to use.</p>
<section id="renaming-variables" class="level3">
<h3 class="anchored" data-anchor-id="renaming-variables">Renaming Variables</h3>
<p>If you inspected the dataset closely, you might have noticed that one of the items has a strange name: <code>coherence_42</code>, right between <code>coherence_1</code> and <code>coherence_3</code>.</p>
<p>This wasn’t intentional - in the process of creating the questionnaire in Qualtrics, this variable came out with a weird name. It happens more easily than you think! The best-case option would be to update the Qualtrics questionnaire itself before exporting the data, but you may not be able (or want) to do this, so instead, let’s have a quick look at how to rename variables.</p>
<p>As (almost) always, there’s a friendly {dplyr} function to help us with our data wrangling. This time it’s sensibly-named <code>dplyr::rename()</code>, which renames variables using <code>new_name = old_name</code> arguments.</p>
<div class="callout callout-style-simple callout-note no-icon callout-titled" title="Exercise">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
</div>
<div class="callout-body-container callout-body">
<p>Rename <code>coherence_42</code> to <code>coherence_2</code>. Don’t forget to save this change to the dataset!</p>
<div class="callout callout-style-default callout-note callout-titled" title="Solution">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-10-contents" aria-controls="callout-10" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-10" class="callout-10-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>mil_data <span class="ot">&lt;-</span> mil_data <span class="sc">|&gt;</span> </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">coherence_2 =</span> coherence_42)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>Do you have lots of variables to rename? Do you like writing functions, or using regular expressions? Check out <code>rename()</code>’s flashier cousin <code>rename_with()</code>, which uses a function to rename variables.</p>
</div>
</div>
</section>
<section id="separating-columns" class="level3">
<h3 class="anchored" data-anchor-id="separating-columns">Separating Columns</h3>
<p>The second thing I’d like to do doesn’t concern the main dataset, but rather the data dictionary we’ve generated. For the single-item questions, the <code>label</code> column is reasonably helpful. However, the items with a shared prefix all come from the same matrix scale in Qualtrics, and their labels have two parts: the “question text” that usually contains directions about how to respond, and the actual item text for each individual item.</p>
<p>As an example, the label for <code>belonging_1</code> reads:</p>
<blockquote class="blockquote">
<p>Please rate the extent to which these statements apply to you. - When I am with other people, I feel included</p>
</blockquote>
<p>Which corresponds to this in Qualtrics:</p>
<p><img src="../..\images/b1.png" class="img-fluid" alt="A screenshot of a Qualtrics matrix table of Likert responses, with 'Please rate the extent to which these statements apply to you' at the top, and a single item, 'When I am with others, I feel included' and a rating scale from strongly disagree to strongly agree."></p>
<p>To make the labels more readable, let’s split up the question text, which is repeated for all items on the same subscale and not very useful, and the item text, which contains the specific text of each item. The good news is that the two pieces are defined, or delimited, by the ” - ” symbol that Qualtrics automatically adds to link them.</p>
<p>Since we want to separate the <code>labels</code> column into two - making the dataset wider - using a delimiter, the <code>separate_wider_delim()</code> function from the {tidyr} package should do the trick!</p>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-1"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><a class="code-annotation-anchor" data-target-cell="annotated-cell-1" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-1-1" class="code-annotation-target"><a href="#annotated-cell-1-1" aria-hidden="true" tabindex="-1"></a>mil_data <span class="sc">|&gt;</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-1" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-1-2" class="code-annotation-target"><a href="#annotated-cell-1-2" aria-hidden="true" tabindex="-1"></a>  labelled<span class="sc">::</span><span class="fu">generate_dictionary</span>() <span class="sc">|&gt;</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-1" data-target-annotation="3" onclick="event.preventDefault();">3</a><span id="annotated-cell-1-3" class="code-annotation-target"><a href="#annotated-cell-1-3" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">separate_wider_delim</span>(</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-1" data-target-annotation="4" onclick="event.preventDefault();">4</a><span id="annotated-cell-1-4" class="code-annotation-target"><a href="#annotated-cell-1-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> label,</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-1" data-target-annotation="5" onclick="event.preventDefault();">5</a><span id="annotated-cell-1-5" class="code-annotation-target"><a href="#annotated-cell-1-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">delim =</span> <span class="st">" - "</span>,</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-1" data-target-annotation="6" onclick="event.preventDefault();">6</a><span id="annotated-cell-1-6" class="code-annotation-target"><a href="#annotated-cell-1-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">names =</span> <span class="fu">c</span>(<span class="st">"label"</span>, <span class="st">"item_label"</span>),</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-1" data-target-annotation="7" onclick="event.preventDefault();">7</a><span id="annotated-cell-1-7" class="code-annotation-target"><a href="#annotated-cell-1-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">too_few =</span> <span class="st">"align_start"</span></span>
<span id="annotated-cell-1-8"><a href="#annotated-cell-1-8" aria-hidden="true" tabindex="-1"></a>  )</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-1" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-1" data-code-lines="1" data-code-annotation="1">Take the data, <em>and then</em></span>
</dd>
<dt data-target-cell="annotated-cell-1" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-1" data-code-lines="2" data-code-annotation="2">Generate the data dictionary, <em>and then</em></span>
</dd>
<dt data-target-cell="annotated-cell-1" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-1" data-code-lines="3" data-code-annotation="3">Separate wider by delimiter as follows:</span>
</dd>
<dt data-target-cell="annotated-cell-1" data-target-annotation="4">4</dt>
<dd>
<span data-code-cell="annotated-cell-1" data-code-lines="4" data-code-annotation="4">Separate the <code>label</code> column</span>
</dd>
<dt data-target-cell="annotated-cell-1" data-target-annotation="5">5</dt>
<dd>
<span data-code-cell="annotated-cell-1" data-code-lines="5" data-code-annotation="5">At the ” - ” delimiter</span>
</dd>
<dt data-target-cell="annotated-cell-1" data-target-annotation="6">6</dt>
<dd>
<span data-code-cell="annotated-cell-1" data-code-lines="6" data-code-annotation="6">Into two new columns called “label” and “item_label” respectively</span>
</dd>
<dt data-target-cell="annotated-cell-1" data-target-annotation="7">7</dt>
<dd>
<span data-code-cell="annotated-cell-1" data-code-lines="7" data-code-annotation="7">If there are too few pieces (that is, for the rows where there is no delimiter), fill in values from the start.</span>
</dd>
</dl>
</div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["pos"],"name":[1],"type":["int"],"align":["right"]},{"label":["variable"],"name":[2],"type":["chr"],"align":["left"]},{"label":["label"],"name":[3],"type":["chr"],"align":["left"]},{"label":["item_label"],"name":[4],"type":["chr"],"align":["left"]},{"label":["col_type"],"name":[5],"type":["chr"],"align":["left"]},{"label":["missing"],"name":[6],"type":["int"],"align":["right"]},{"label":["levels"],"name":[7],"type":["named list"],"align":["right"]},{"label":["value_labels"],"name":[8],"type":["named list"],"align":["right"]}],"data":[{"1":"1","2":"StartDate","3":"Start Date","4":"NA","5":"dttm","6":"0","7":"<NULL>","8":"<NULL>"},{"1":"2","2":"EndDate","3":"End Date","4":"NA","5":"dttm","6":"0","7":"<NULL>","8":"<NULL>"},{"1":"3","2":"Status","3":"Response Type","4":"NA","5":"dbl+lbl","6":"0","7":"<NULL>","8":"<dbl [12]>"},{"1":"4","2":"Finished","3":"Finished","4":"NA","5":"dbl+lbl","6":"0","7":"<NULL>","8":"<dbl [2]>"},{"1":"5","2":"RecordedDate","3":"Recorded Date","4":"NA","5":"dttm","6":"0","7":"<NULL>","8":"<NULL>"},{"1":"6","2":"ResponseId","3":"Response ID","4":"NA","5":"chr","6":"0","7":"<NULL>","8":"<NULL>"},{"1":"7","2":"DistributionChannel","3":"Distribution Channel","4":"NA","5":"chr","6":"0","7":"<NULL>","8":"<NULL>"},{"1":"8","2":"UserLanguage","3":"User Language","4":"NA","5":"chr","6":"0","7":"<NULL>","8":"<NULL>"},{"1":"9","2":"english_fluency_1","3":"Please select which box best describes your English fluency.","4":"How well can you speak English?","5":"dbl+lbl","6":"0","7":"<NULL>","8":"<dbl [4]>"},{"1":"10","2":"age","3":"How old are you?","4":"NA","5":"dbl","6":"0","7":"<NULL>","8":"<NULL>"},{"1":"11","2":"gender","3":"What is your gender identity?\\n\\nThis question is optional.","4":"Selected Choice","5":"dbl+lbl","6":"25","7":"<NULL>","8":"<dbl [4]>"},{"1":"12","2":"global_meaning_1","3":"Please rate the extent to which you agree or disagree with these statements.","4":"My life as a whole has meaning.","5":"dbl+lbl","6":"16","7":"<NULL>","8":"<dbl [7]>"},{"1":"13","2":"global_meaning_2","3":"Please rate the extent to which you agree or disagree with these statements.","4":"My entire existence is full of meaning.","5":"dbl+lbl","6":"21","7":"<NULL>","8":"<dbl [7]>"},{"1":"14","2":"global_meaning_3","3":"Please rate the extent to which you agree or disagree with these statements.","4":"My life is meaningless.","5":"dbl+lbl","6":"20","7":"<NULL>","8":"<dbl [7]>"},{"1":"15","2":"global_meaning_4","3":"Please rate the extent to which you agree or disagree with these statements.","4":"My existence is empty of meaning.","5":"dbl+lbl","6":"18","7":"<NULL>","8":"<dbl [7]>"},{"1":"16","2":"mattering_1","3":"Please rate the extent to which you agree or disagree with these statements.","4":"Whether my life ever existed matters even in the grand scheme of the universe.","5":"dbl+lbl","6":"18","7":"<NULL>","8":"<dbl [7]>"},{"1":"17","2":"mattering_2","3":"Please rate the extent to which you agree or disagree with these statements.","4":"Even considering how big the universe is, I can say that my life matters.","5":"dbl+lbl","6":"18","7":"<NULL>","8":"<dbl [7]>"},{"1":"18","2":"mattering_3","3":"Please rate the extent to which you agree or disagree with these statements.","4":"My existence is not significant in the grand scheme of things.","5":"dbl+lbl","6":"21","7":"<NULL>","8":"<dbl [7]>"},{"1":"19","2":"mattering_4","3":"Please rate the extent to which you agree or disagree with these statements.","4":"Given the vastness of the universe, my life does not matter.","5":"dbl+lbl","6":"15","7":"<NULL>","8":"<dbl [7]>"},{"1":"20","2":"coherence_1","3":"Please rate the extent to which you agree or disagree with these statements.","4":"I can make sense of the things that happen in my life.","5":"dbl+lbl","6":"18","7":"<NULL>","8":"<dbl [7]>"},{"1":"21","2":"coherence_2","3":"Please rate the extent to which you agree or disagree with these statements.","4":"Looking at my life as a whole, things seem clear to me.","5":"dbl+lbl","6":"16","7":"<NULL>","8":"<dbl [7]>"},{"1":"22","2":"coherence_3","3":"Please rate the extent to which you agree or disagree with these statements.","4":"I can’t make sense of events in my life.","5":"dbl+lbl","6":"17","7":"<NULL>","8":"<dbl [7]>"},{"1":"23","2":"coherence_4","3":"Please rate the extent to which you agree or disagree with these statements.","4":"My life feels like a sequence of unconnected events.","5":"dbl+lbl","6":"17","7":"<NULL>","8":"<dbl [7]>"},{"1":"24","2":"purpose_1","3":"Please rate the extent to which you agree or disagree with these statements.","4":"I have a good sense of what I am trying to accomplish in life.","5":"dbl+lbl","6":"18","7":"<NULL>","8":"<dbl [7]>"},{"1":"25","2":"purpose_2","3":"Please rate the extent to which you agree or disagree with these statements.","4":"I have certain life goals that compel me to keep going.","5":"dbl+lbl","6":"20","7":"<NULL>","8":"<dbl [7]>"},{"1":"26","2":"purpose_3","3":"Please rate the extent to which you agree or disagree with these statements.","4":"I don’t know what I am trying to accomplish in life.","5":"dbl+lbl","6":"18","7":"<NULL>","8":"<dbl [7]>"},{"1":"27","2":"purpose_4","3":"Please rate the extent to which you agree or disagree with these statements.","4":"I don’t have compelling life goals that keep me going.","5":"dbl+lbl","6":"19","7":"<NULL>","8":"<dbl [7]>"},{"1":"28","2":"sym_immortality_1","3":"Please indicate the extent to which you believe these statements are likely to occur.","4":"After I die, my impact on the world will continue","5":"dbl+lbl","6":"19","7":"<NULL>","8":"<dbl [7]>"},{"1":"29","2":"sym_immortality_2","3":"Please indicate the extent to which you believe these statements are likely to occur.","4":"Some aspect of myself, such as my name or accomplishments, will be remembered long after I die","5":"dbl+lbl","6":"19","7":"<NULL>","8":"<dbl [7]>"},{"1":"30","2":"belonging_1","3":"Please rate the extent to which these statements apply to you.","4":"When I am with other people, I feel included","5":"dbl+lbl","6":"20","7":"<NULL>","8":"<dbl [7]>"},{"1":"31","2":"belonging_2","3":"Please rate the extent to which these statements apply to you.","4":"I have close bonds with family and friends","5":"dbl+lbl","6":"15","7":"<NULL>","8":"<dbl [7]>"},{"1":"32","2":"belonging_3","3":"Please rate the extent to which these statements apply to you.","4":"I feel accepted by others","5":"dbl+lbl","6":"18","7":"<NULL>","8":"<dbl [7]>"},{"1":"33","2":"belonging_4","3":"Please rate the extent to which these statements apply to you.","4":"I have a sense of belonging","5":"dbl+lbl","6":"15","7":"<NULL>","8":"<dbl [7]>"},{"1":"34","2":"belonging_5","3":"Please rate the extent to which these statements apply to you.","4":"I have a place at the table with others","5":"dbl+lbl","6":"18","7":"<NULL>","8":"<dbl [7]>"},{"1":"35","2":"belonging_6","3":"Please rate the extent to which these statements apply to you.","4":"I feel connected with others","5":"dbl+lbl","6":"19","7":"<NULL>","8":"<dbl [7]>"},{"1":"36","2":"belonging_7","3":"Please rate the extent to which these statements apply to you.","4":"I feel like an outsider","5":"dbl+lbl","6":"16","7":"<NULL>","8":"<dbl [7]>"},{"1":"37","2":"belonging_8","3":"Please rate the extent to which these statements apply to you.","4":"I feel as if people do not care about me","5":"dbl+lbl","6":"18","7":"<NULL>","8":"<dbl [7]>"},{"1":"38","2":"belonging_9","3":"Please rate the extent to which these statements apply to you.","4":"Because I do not belong, I feel distant during the holiday season","5":"dbl+lbl","6":"18","7":"<NULL>","8":"<dbl [7]>"},{"1":"39","2":"belonging_10","3":"Please rate the extent to which these statements apply to you.","4":"I feel isolated from the rest of the world","5":"dbl+lbl","6":"17","7":"<NULL>","8":"<dbl [7]>"},{"1":"40","2":"belonging_11","3":"Please rate the extent to which these statements apply to you.","4":"When I am with other people, I feel like a stranger","5":"dbl+lbl","6":"18","7":"<NULL>","8":"<dbl [7]>"},{"1":"41","2":"belonging_12","3":"Please rate the extent to which these statements apply to you.","4":"Friends and family do not involve me in their plans","5":"dbl+lbl","6":"17","7":"<NULL>","8":"<dbl [7]>"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>The result isn’t perfect, but it’ll do for our purposes - namely, to have a quick reference for the variables in our dataset.</p>
<div class="callout callout-style-simple callout-note no-icon callout-titled" title="Exercise">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
</div>
<div class="callout-body-container callout-body">
<p>Save the final (for now) data dictionary in a new object, <code>mil_dict</code>, so we can refer to it as needed.</p>
<div class="callout callout-style-default callout-note callout-titled" title="Solution">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-13-contents" aria-controls="callout-13" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-13" class="callout-13-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>mil_dict <span class="ot">&lt;-</span> mil_data <span class="sc">|&gt;</span> </span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  labelled<span class="sc">::</span><span class="fu">generate_dictionary</span>() <span class="sc">|&gt;</span> </span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">separate_wider_delim</span>(</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> label,</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">delim =</span> <span class="st">" - "</span>,</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">names =</span> <span class="fu">c</span>(<span class="st">"label"</span>, <span class="st">"item_label"</span>),</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">too_few =</span> <span class="st">"align_start"</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="viewer-data-dictionary" class="level3">
<h3 class="anchored" data-anchor-id="viewer-data-dictionary">Viewer Data Dictionary</h3>
<p>I personally like <code>labelled::generate_dictionary()</code> because (you will be unsurprised to learn) I like to mess about with regex to make it read just as I like. However, if you primarily need a quick reference as you’re working with your dataset, the delightful <code>sjPlot::view_df()</code> function makes this particularly easy.</p>
<div class="callout callout-style-simple callout-note no-icon callout-titled" title="Exercise">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
</div>
<div class="callout-body-container callout-body">
<p>Put <code>mil_data</code> into the <code>sjPlot::view_df()</code> function and see what it does!</p>
<div class="callout callout-style-default callout-note callout-titled" title="Solution">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-15-contents" aria-controls="callout-15" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-15" class="callout-15-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>By default, the document opens in the Viewer, but you can also save the file it creates for further sharing - see the help documentation.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>sjPlot<span class="sc">::</span><span class="fu">view_df</span>(mil_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<table data-quarto-postprocess="true" class="table table-sm table-striped small">
<caption>Data frame: mil_data</caption>
<colgroup>
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
</colgroup>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th" style="text-align: left; border-bottom: double; font-style: italic; font-weight: normal; padding: 0.2cm; vertical-align: top;">ID</td>
<td data-quarto-table-cell-role="th" style="text-align: left; border-bottom: double; font-style: italic; font-weight: normal; padding: 0.2cm; vertical-align: top;">Name</td>
<td data-quarto-table-cell-role="th" style="text-align: left; border-bottom: double; font-style: italic; font-weight: normal; padding: 0.2cm; vertical-align: top;">Label</td>
<td data-quarto-table-cell-role="th" style="text-align: left; border-bottom: double; font-style: italic; font-weight: normal; padding: 0.2cm; vertical-align: top;">Values</td>
<td data-quarto-table-cell-role="th" style="text-align: left; border-bottom: double; font-style: italic; font-weight: normal; padding: 0.2cm; vertical-align: top;">Value Labels</td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">1</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">StartDate</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">Start Date</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;"></td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;"></td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">2</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">EndDate</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">End Date</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;"></td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;"></td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">3</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">Status</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">Response Type</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0<br>
1<br>
2<br>
4<br>
8<br>
9<br>
12<br>
16<br>
17<br>
32<br>
40<br>
48</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">IP Address<br>
Survey Preview<br>
Survey Test<br>
Imported<br>
Spam<br>
Survey Preview Spam<br>
Imported Spam<br>
Offline<br>
Offline Survey Preview<br>
EX<br>
EX Spam<br>
EX Offline</td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">4</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">Finished</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">Finished</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">0<br>
1</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">False<br>
True</td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">5</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">RecordedDate</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">Recorded Date</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;"></td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;"></td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">6</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">ResponseId</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">Response ID</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;"></td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">&lt;output omitted&gt;</td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">7</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">DistributionChannel</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">Distribution Channel</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;"></td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">&lt;output omitted&gt;</td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">8</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">UserLanguage</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">User Language</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;"></td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">&lt;output omitted&gt;</td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">9</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">english_fluency_1</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">Please select which box best describes your<br>
English fluency. - How well can you speak English?</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">1<br>
2<br>
3<br>
4</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">Very well<br>
Well<br>
Not well<br>
Not at all</td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">10</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">age</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">How old are you?</td>
<td colspan="2" style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;"><em>range: 15-82</em></td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">11</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">gender</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">What is your gender identity? This question is<br>
optional. - Selected Choice</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0<br>
1<br>
2<br>
3</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">Male<br>
Female<br>
Non-binary<br>
Other (please state below)</td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">12</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">global_meaning_1</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">Please rate the extent to which you agree or<br>
disagree with these statements. - My life as a<br>
whole has meaning.</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">1<br>
2<br>
3<br>
4<br>
5<br>
6<br>
7</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">Strongly disagree<br>
Disagree<br>
Somewhat disagree<br>
Neither agree nor disagree<br>
Somewhat agree<br>
Agree<br>
Strongly agree</td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">13</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">global_meaning_2</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">Please rate the extent to which you agree or<br>
disagree with these statements. - My entire<br>
existence is full of meaning.</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">1<br>
2<br>
3<br>
4<br>
5<br>
6<br>
7</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">Strongly disagree<br>
Disagree<br>
Somewhat disagree<br>
Neither agree nor disagree<br>
Somewhat agree<br>
Agree<br>
Strongly agree</td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">14</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">global_meaning_3</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">Please rate the extent to which you agree or<br>
disagree with these statements. - My life is<br>
meaningless.</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">1<br>
2<br>
3<br>
4<br>
5<br>
6<br>
7</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">Strongly disagree<br>
Disagree<br>
Somewhat disagree<br>
Neither agree nor disagree<br>
Somewhat agree<br>
Agree<br>
Strongly agree</td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">15</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">global_meaning_4</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">Please rate the extent to which you agree or<br>
disagree with these statements. - My existence is<br>
empty of meaning.</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">1<br>
2<br>
3<br>
4<br>
5<br>
6<br>
7</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">Strongly disagree<br>
Disagree<br>
Somewhat disagree<br>
Neither agree nor disagree<br>
Somewhat agree<br>
Agree<br>
Strongly agree</td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">16</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">mattering_1</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">Please rate the extent to which you agree or<br>
disagree with these statements. - Whether my life<br>
ever existed matters even in the grand scheme of<br>
the universe.</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">1<br>
2<br>
3<br>
4<br>
5<br>
6<br>
7</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">Strongly disagree<br>
Disagree<br>
Somewhat disagree<br>
Neither agree nor disagree<br>
Somewhat agree<br>
Agree<br>
Strongly agree</td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">17</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">mattering_2</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">Please rate the extent to which you agree or<br>
disagree with these statements. - Even considering<br>
how big the universe is, I can say that my life<br>
matters.</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">1<br>
2<br>
3<br>
4<br>
5<br>
6<br>
7</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">Strongly disagree<br>
Disagree<br>
Somewhat disagree<br>
Neither agree nor disagree<br>
Somewhat agree<br>
Agree<br>
Strongly agree</td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">18</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">mattering_3</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">Please rate the extent to which you agree or<br>
disagree with these statements. - My existence is<br>
not significant in the grand scheme of things.</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">1<br>
2<br>
3<br>
4<br>
5<br>
6<br>
7</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">Strongly disagree<br>
Disagree<br>
Somewhat disagree<br>
Neither agree nor disagree<br>
Somewhat agree<br>
Agree<br>
Strongly agree</td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">19</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">mattering_4</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">Please rate the extent to which you agree or<br>
disagree with these statements. - Given the<br>
vastness of the universe, my life does not matter.</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">1<br>
2<br>
3<br>
4<br>
5<br>
6<br>
7</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">Strongly disagree<br>
Disagree<br>
Somewhat disagree<br>
Neither agree nor disagree<br>
Somewhat agree<br>
Agree<br>
Strongly agree</td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">20</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">coherence_1</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">Please rate the extent to which you agree or<br>
disagree with these statements. - I can make sense<br>
of the things that happen in my life.</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">1<br>
2<br>
3<br>
4<br>
5<br>
6<br>
7</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">Strongly disagree<br>
Disagree<br>
Somewhat disagree<br>
Neither agree nor disagree<br>
Somewhat agree<br>
Agree<br>
Strongly agree</td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">21</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">coherence_2</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">Please rate the extent to which you agree or<br>
disagree with these statements. - Looking at my<br>
life as a whole, things seem clear to me.</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">1<br>
2<br>
3<br>
4<br>
5<br>
6<br>
7</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">Strongly disagree<br>
Disagree<br>
Somewhat disagree<br>
Neither agree nor disagree<br>
Somewhat agree<br>
Agree<br>
Strongly agree</td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">22</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">coherence_3</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">Please rate the extent to which you agree or<br>
disagree with these statements. - I can’t make<br>
sense of events in my life.</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">1<br>
2<br>
3<br>
4<br>
5<br>
6<br>
7</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">Strongly disagree<br>
Disagree<br>
Somewhat disagree<br>
Neither agree nor disagree<br>
Somewhat agree<br>
Agree<br>
Strongly agree</td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">23</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">coherence_4</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">Please rate the extent to which you agree or<br>
disagree with these statements. - My life feels<br>
like a sequence of unconnected events.</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">1<br>
2<br>
3<br>
4<br>
5<br>
6<br>
7</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">Strongly disagree<br>
Disagree<br>
Somewhat disagree<br>
Neither agree nor disagree<br>
Somewhat agree<br>
Agree<br>
Strongly agree</td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">24</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">purpose_1</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">Please rate the extent to which you agree or<br>
disagree with these statements. - I have a good<br>
sense of what I am trying to accomplish in life.</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">1<br>
2<br>
3<br>
4<br>
5<br>
6<br>
7</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">Strongly disagree<br>
Disagree<br>
Somewhat disagree<br>
Neither agree nor disagree<br>
Somewhat agree<br>
Agree<br>
Strongly agree</td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">25</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">purpose_2</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">Please rate the extent to which you agree or<br>
disagree with these statements. - I have certain<br>
life goals that compel me to keep going.</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">1<br>
2<br>
3<br>
4<br>
5<br>
6<br>
7</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">Strongly disagree<br>
Disagree<br>
Somewhat disagree<br>
Neither agree nor disagree<br>
Somewhat agree<br>
Agree<br>
Strongly agree</td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">26</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">purpose_3</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">Please rate the extent to which you agree or<br>
disagree with these statements. - I don’t know<br>
what I am trying to accomplish in life.</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">1<br>
2<br>
3<br>
4<br>
5<br>
6<br>
7</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">Strongly disagree<br>
Disagree<br>
Somewhat disagree<br>
Neither agree nor disagree<br>
Somewhat agree<br>
Agree<br>
Strongly agree</td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">27</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">purpose_4</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">Please rate the extent to which you agree or<br>
disagree with these statements. - I don’t have<br>
compelling life goals that keep me going.</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">1<br>
2<br>
3<br>
4<br>
5<br>
6<br>
7</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">Strongly disagree<br>
Disagree<br>
Somewhat disagree<br>
Neither agree nor disagree<br>
Somewhat agree<br>
Agree<br>
Strongly agree</td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">28</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">sym_immortality_1</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">Please indicate the extent to which you believe<br>
these statements are likely to occur. - After I<br>
die, my impact on the world will continue</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">1<br>
2<br>
3<br>
4<br>
5<br>
6<br>
7</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">Extremely unlikely<br>
Moderately unlikely<br>
Slightly unlikely<br>
Neither likely nor unlikely<br>
Slightly likely<br>
Moderately likely<br>
Extremely likely</td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">29</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">sym_immortality_2</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">Please indicate the extent to which you believe<br>
these statements are likely to occur. - Some<br>
aspect of myself, such as my name or<br>
accomplishments, will be remembered long after I<br>
die</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">1<br>
2<br>
3<br>
4<br>
5<br>
6<br>
7</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">Extremely unlikely<br>
Moderately unlikely<br>
Slightly unlikely<br>
Neither likely nor unlikely<br>
Slightly likely<br>
Moderately likely<br>
Extremely likely</td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">30</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">belonging_1</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">Please rate the extent to which these statements<br>
apply to you. - When I am with other people, I<br>
feel included</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">1<br>
2<br>
3<br>
4<br>
5<br>
6<br>
7</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">Strongly disagree<br>
Disagree<br>
Somewhat Disagree<br>
Neither Agree nor Disagree<br>
Somewhat agree<br>
Agree<br>
Strongly agree</td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">31</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">belonging_2</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">Please rate the extent to which these statements<br>
apply to you. - I have close bonds with family and<br>
friends</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">1<br>
2<br>
3<br>
4<br>
5<br>
6<br>
7</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">Strongly disagree<br>
Disagree<br>
Somewhat Disagree<br>
Neither Agree nor Disagree<br>
Somewhat agree<br>
Agree<br>
Strongly agree</td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">32</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">belonging_3</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">Please rate the extent to which these statements<br>
apply to you. - I feel accepted by others</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">1<br>
2<br>
3<br>
4<br>
5<br>
6<br>
7</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">Strongly disagree<br>
Disagree<br>
Somewhat Disagree<br>
Neither Agree nor Disagree<br>
Somewhat agree<br>
Agree<br>
Strongly agree</td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">33</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">belonging_4</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">Please rate the extent to which these statements<br>
apply to you. - I have a sense of belonging</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">1<br>
2<br>
3<br>
4<br>
5<br>
6<br>
7</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">Strongly disagree<br>
Disagree<br>
Somewhat Disagree<br>
Neither Agree nor Disagree<br>
Somewhat agree<br>
Agree<br>
Strongly agree</td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">34</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">belonging_5</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">Please rate the extent to which these statements<br>
apply to you. - I have a place at the table with<br>
others</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">1<br>
2<br>
3<br>
4<br>
5<br>
6<br>
7</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">Strongly disagree<br>
Disagree<br>
Somewhat Disagree<br>
Neither Agree nor Disagree<br>
Somewhat agree<br>
Agree<br>
Strongly agree</td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">35</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">belonging_6</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">Please rate the extent to which these statements<br>
apply to you. - I feel connected with others</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">1<br>
2<br>
3<br>
4<br>
5<br>
6<br>
7</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">Strongly disagree<br>
Disagree<br>
Somewhat Disagree<br>
Neither Agree nor Disagree<br>
Somewhat agree<br>
Agree<br>
Strongly agree</td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">36</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">belonging_7</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">Please rate the extent to which these statements<br>
apply to you. - I feel like an outsider</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">1<br>
2<br>
3<br>
4<br>
5<br>
6<br>
7</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">Strongly disagree<br>
Disagree<br>
Somewhat Disagree<br>
Neither Agree nor Disagree<br>
Somewhat agree<br>
Agree<br>
Strongly agree</td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">37</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">belonging_8</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">Please rate the extent to which these statements<br>
apply to you. - I feel as if people do not care<br>
about me</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">1<br>
2<br>
3<br>
4<br>
5<br>
6<br>
7</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">Strongly disagree<br>
Disagree<br>
Somewhat Disagree<br>
Neither Agree nor Disagree<br>
Somewhat agree<br>
Agree<br>
Strongly agree</td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">38</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">belonging_9</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">Please rate the extent to which these statements<br>
apply to you. - Because I do not belong, I feel<br>
distant during the holiday season</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">1<br>
2<br>
3<br>
4<br>
5<br>
6<br>
7</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">Strongly disagree<br>
Disagree<br>
Somewhat Disagree<br>
Neither Agree nor Disagree<br>
Somewhat agree<br>
Agree<br>
Strongly agree</td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">39</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">belonging_10</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">Please rate the extent to which these statements<br>
apply to you. - I feel isolated from the rest of<br>
the world</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">1<br>
2<br>
3<br>
4<br>
5<br>
6<br>
7</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">Strongly disagree<br>
Disagree<br>
Somewhat Disagree<br>
Neither Agree nor Disagree<br>
Somewhat agree<br>
Agree<br>
Strongly agree</td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">40</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">belonging_11</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">Please rate the extent to which these statements<br>
apply to you. - When I am with other people, I<br>
feel like a stranger</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">1<br>
2<br>
3<br>
4<br>
5<br>
6<br>
7</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top; background-color: #eeeeee;">Strongly disagree<br>
Disagree<br>
Somewhat Disagree<br>
Neither Agree nor Disagree<br>
Somewhat agree<br>
Agree<br>
Strongly agree</td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">41</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">belonging_12</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">Please rate the extent to which these statements<br>
apply to you. - Friends and family do not involve<br>
me in their plans</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">1<br>
2<br>
3<br>
4<br>
5<br>
6<br>
7</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">Strongly disagree<br>
Disagree<br>
Somewhat Disagree<br>
Neither Agree nor Disagree<br>
Somewhat agree<br>
Agree<br>
Strongly agree</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="labelled-data" class="level2">
<h2 class="anchored" data-anchor-id="labelled-data">Labelled Data</h2>
<p>As we’ve just seen in the data dictionary, the SAV data we’re using has a special property: labels. Labelled data has a number of features, all of which we will explore in depth shortly:</p>
<ul>
<li><p><a href="../../tutorials/archive_autumn_2023/10_qtrics.html#variable-labels"><strong>Variable labels</strong></a>. The label associated with a whole variable will contain the text of the item that the participants responded to. This is analogous to the “Label” column of the Variable View in SPSS.</p></li>
<li><p><a href="../../tutorials/archive_autumn_2023/10_qtrics.html#value-labels"><strong>Value labels</strong></a>. The label associated with individual values within a variable will contain the text associated with individual choices, for instance the points on a Likert scale or the options on a multiple-choice question. This is analogous to the “Values” column of the Variable View in SPSS.</p></li>
<li><p><a href="../../tutorials/archive_autumn_2023/10_qtrics.html#missing-values"><strong>Missing values</strong></a>. Within value labels, you can designate particular values as indicative of missing responses, refusal to respond, etc. This is analogous to the “Missing” column of the Variable View in SPSS.</p></li>
</ul>
<p>We’re first going to look at how you can work with each of these elements. The reason to do this is that once our dataset has been thoroughly checked, we’re going to generate a final data dictionary, then convert any categorical variables into factors, the levels of which will correspond to the labels for that variable. We’ll also convert any numeric variables into numeric data type, which will discard the labels; that will make it possible to do analyses with them, but that’s why we have to create the data dictionary first.</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>These features will work optimally <em>only</em> if you have set up your Qualtrics questionnaire appropriately. Make sure to refer to the <a href="../../tutorials/archive_autumn_2023/11_qtrics2.html#building-a-qualtrics-project">Setting Up Qualtrics</a> section of the next tutorial to get the most out of your labelled data and save yourself data cleaning and wrangling headaches later.</p>
</div>
</div>
<section id="variable-labels" class="level3">
<h3 class="anchored" data-anchor-id="variable-labels">Variable Labels</h3>
<p>Variable labels contain information about the whole variable, and for Qualtrics data, will by default contain either an automatically generated Qualtrics value (like “Start Date”), or the question text that that variable contains the responses to.</p>
<section id="getting-labels" class="level4">
<h4 class="anchored" data-anchor-id="getting-labels">Getting Labels</h4>
<p>To begin, let’s just get out a single variable label to work with using <code>labelled::var_label()</code>.</p>
<p>To specify the variable we want, we will need to subset it from the dataset, using either <code>$</code> or <code>dplyr::pull()</code> as previously.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>labelled<span class="sc">::</span><span class="fu">var_label</span>(mil_data<span class="sc">$</span>gender)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "What is your gender identity?\n\nThis question is optional. - Selected Choice"</code></pre>
</div>
</div>
</section>
<section id="creatingupdating-labels" class="level4">
<h4 class="anchored" data-anchor-id="creatingupdating-labels">Creating/Updating Labels</h4>
<p>If you’d like to edit labels, you can do it “manually” - that is, just writing a whole new label from scratch.</p>
<p>The structure of this code might look a little unfamiliar in terms of the code structure. For the most part, we’ve seen code that contains longer and more complex instructions on the right-hand side of the <code>&lt;-</code>, and a single object being created or updated on the left-hand side. In the structure below, the left-hand side contains longer and more complex code that identifies the value(s) to be updated or created, and the right-hand side contains the value(s) to create or update. It’s the same logic, just with a different structure.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>labelled<span class="sc">::</span><span class="fu">var_label</span>(mil_data<span class="sc">$</span>StartDate) <span class="ot">&lt;-</span> <span class="st">"Date and time questionnaire was started"</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>labelled<span class="sc">::</span><span class="fu">var_label</span>(mil_data<span class="sc">$</span>StartDate)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Date and time questionnaire was started"</code></pre>
</div>
</div>
<p>If you’re up for it, though, I’d recommend using it as an opportunity to start working with regular expressions. For example, if we want to keep only the first bit of the label for <code>gender</code>, then we can keep everything only up to an including the question mark, and and re-assign that to the variable label. This style is a bit more dynamic and resilient to changes or updates.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>labelled<span class="sc">::</span><span class="fu">var_label</span>(mil_data<span class="sc">$</span>gender) <span class="ot">&lt;-</span> labelled<span class="sc">::</span><span class="fu">var_label</span>(mil_data<span class="sc">$</span>gender) <span class="sc">|&gt;</span> </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gsub</span>(<span class="st">"(.*</span><span class="sc">\\</span><span class="st">?).*"</span>, <span class="st">"</span><span class="sc">\\</span><span class="st">1"</span>, <span class="at">x =</span> _)</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>labelled<span class="sc">::</span><span class="fu">var_label</span>(mil_data<span class="sc">$</span>gender)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "What is your gender identity?"</code></pre>
</div>
</div>
<div class="callout callout-style-simple callout-note no-icon callout-titled" title="Exercise">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>CHALLENGE</strong>: How can you read the <code>gsub()</code> command above? Why migh this be “more dynamic and resilient to changes or updates”?</p>
<div class="callout callout-style-default callout-note callout-titled" title="Solution">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-18-contents" aria-controls="callout-18" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-18" class="callout-18-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Let’s pick apart this <code>gsub()</code> command a bit at a time. First, <code>gsub()</code> has three arguments:</p>
<ul>
<li><code>pattern</code>, here <code>"(.*\\?).*"</code>, which is the regex statement representing the string to match.</li>
<li><code>replacement</code>, here <code>"\\1"</code>, which is the string that should replace the match in <code>pattern</code>.</li>
<li><code>x</code>, the string to look in.</li>
</ul>
<p>The <code>pattern</code> has essentially two parts: the bit in the rounded brackets, and the bit outside. The rounded brackets designate a “capturing group” - a portion of the string that should be grouped together as a unit. The benefit of this grouping is in the second argument of <code>gsub()</code>; <code>\\1</code> isn’t the number 1, but rather is a pronoun referring to the first capturing group. In other words, as a whole, this <code>gsub()</code> command captures a subset of the incoming string, and then replaces the entire string with that captured string, essentially dropping everything outside the capturing group.</p>
<p>To understand the regex statement <code>"(.*\\?).*"</code>, we need to look at the incoming text, <code>x</code>. In this case, <code>x</code> is being piped in from above and looks like this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>labelled<span class="sc">::</span><span class="fu">var_label</span>(mil_data<span class="sc">$</span>gender)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "What is your gender identity?\n\nThis question is optional. - Selected Choice"</code></pre>
</div>
</div>
<p>As discussed in a previous Challenge task, <code>.*</code> is a common regex shorthand that means “match any character, as many times as possible.” It’s essentially an “any number of anything” wildcard. This wildcard appears both inside and outside the brackets. So, how does <code>gsub()</code> know which bit should belong in the capturing group?</p>
<p>The answer is <code>\\?</code>. This is a “literal” question mark. Some symbols, like <code>.</code> and <code>?</code>, are regex operators, but we might want to also match the “literal” symbols full-stop “.” and question mark “?” in a string. In this case we need an “escape” character “", that escapes regex and turns the symbol into a literal one. So, the capturing group ends with a literal question mark - in the target string, that’s the question mark after”identity”, which is the only one in the string.</p>
<p>As an aside, if you’re wondering why there are <em>two</em> escape characters instead of one - i.e., why is it <code>\\?</code> and not <code>\?</code>, well, you and me both. There’s an explanation in <code>vignette("regular-expressions")</code> that never completely makes sense to me. Also, this seems to be an R thing - regex outside of R seems to use only a single escape character, so a literal question mark would be <code>\?</code>. If you are ever trying to adapt regex from e.g.&nbsp;StackOverflow or regex101 and it isn’t working, check whether the escape characters are right!</p>
<p>Anyway. We can now read <code>"(.*\\?)"</code> as “capture all characters up to an including a literal question mark” - which matches the substring “What is your gender identity?” in <code>x</code>. However, we don’t just want to replace that portion of the string - instead, we want to replace <em>the whole string</em> with that bit of it. So, the second <code>.*</code> outside the brackets matches the rest of the string. If we didn’t include this last bit, the capturing group would just be replaced with itself, which would result in the same string as we started with, as below:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>labelled<span class="sc">::</span><span class="fu">var_label</span>(mil_data<span class="sc">$</span>gender) <span class="sc">|&gt;</span> </span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gsub</span>(<span class="st">"(.*</span><span class="sc">\\</span><span class="st">?)"</span>, <span class="st">"</span><span class="sc">\\</span><span class="st">1"</span>, <span class="at">x =</span> _)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "What is your gender identity?\n\nThis question is optional. - Selected Choice"</code></pre>
</div>
</div>
<p>So, altogether, we can read this <code>gsub()</code> command as: “Capture everything up to an including the question mark, and replace the entire string with that capturing group.”</p>
<p>Now. Why, you might wonder, is all this faff <em>better</em>?</p>
<p>Well, it might not be. You might find it more frustrating or effortful to generate the right regex pattern than to replace the label “manually”, and in that case, there’s nothing wrong with just writing out the label you want. I said this was “more dynamic and resilient” because this command will always drop everything after the question mark, no matter what that text is. If there is no match, it won’t replace anything. So, unlike the “manual” option, there’s much less danger of accidentally mixing up labels or overwriting the wrong thing; and this regex statement can be generalised to <em>any</em> label that contains a question mark, rather than having to type out each label one by one.</p>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="searching-labels" class="level4">
<h4 class="anchored" data-anchor-id="searching-labels">Searching Labels</h4>
<p>A <em>very</em> nifty feature of variable labels and {labelled} is the ability to search through them with <code>labelled::look_for()</code>. With the whole dataset, <code>look_for()</code> returns essentially the same info as <code>generate_dictionary()</code>, but given a second argument containing a search term, you get back only the variables whose label contains that term.</p>
<div class="callout callout-style-simple callout-note no-icon callout-titled" title="Exercise">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
</div>
<div class="callout-body-container callout-body">
<p>Use <code>labelled::look_for()</code> to get only the items in this questionnaire that mentioned family.</p>
<div class="callout callout-style-default callout-note callout-titled" title="Solution">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-20-contents" aria-controls="callout-20" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-20" class="callout-20-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>I’ve piped into <code>tibble::as_tibble()</code> to make the output easier to read.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>labelled<span class="sc">::</span><span class="fu">look_for</span>(mil_data, <span class="st">"family"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  tibble<span class="sc">::</span><span class="fu">as_tibble</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["pos"],"name":[1],"type":["int"],"align":["right"]},{"label":["variable"],"name":[2],"type":["chr"],"align":["left"]},{"label":["label"],"name":[3],"type":["chr"],"align":["left"]},{"label":["col_type"],"name":[4],"type":["chr"],"align":["left"]},{"label":["missing"],"name":[5],"type":["int"],"align":["right"]},{"label":["levels"],"name":[6],"type":["named list"],"align":["right"]},{"label":["value_labels"],"name":[7],"type":["named list"],"align":["right"]}],"data":[{"1":"31","2":"belonging_2","3":"Please rate the extent to which these statements apply to you. - I have close bonds with family and friends","4":"dbl+lbl","5":"15","6":"<NULL>","7":"<dbl [7]>"},{"1":"41","2":"belonging_12","3":"Please rate the extent to which these statements apply to you. - Friends and family do not involve me in their plans","4":"dbl+lbl","5":"17","6":"<NULL>","7":"<dbl [7]>"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="value-labels" class="level3">
<h3 class="anchored" data-anchor-id="value-labels">Value Labels</h3>
<p>Value labels contain individual labels associated with unique values within a variable. It’s not necessary to have a label for every value, and indeed sometimes it’s advantageous not to.</p>
<section id="getting-labels-1" class="level4">
<h4 class="anchored" data-anchor-id="getting-labels-1">Getting Labels</h4>
<p>There are two functions to assist with this. <code>labelled::val_labels()</code> (with an “s”) returns all of the labels, while <code>labelled::val_label()</code> (without an “s”) will return the label for a single specified value.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>labelled<span class="sc">::</span><span class="fu">val_labels</span>(mil_data<span class="sc">$</span>english_fluency_1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Very well       Well   Not well Not at all 
         1          2          3          4 </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>labelled<span class="sc">::</span><span class="fu">val_label</span>(mil_data<span class="sc">$</span>english_fluency_1, <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Not well"</code></pre>
</div>
</div>
</section>
<section id="creatingupdating-labels-1" class="level4">
<h4 class="anchored" data-anchor-id="creatingupdating-labels-1">Creating/Updating Labels</h4>
<p>These two functions can also be used to update an entire variable or a single value respectively. The structure of this code is the same as we saw with variable labels previously.</p>
<div class="callout callout-style-simple callout-note no-icon callout-titled" title="Exercise">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
</div>
<div class="callout-body-container callout-body">
<p>Get all the value labels for the <code>gender</code> variable. Then, update the last value to “Other”.</p>
<div class="callout callout-style-default callout-note callout-titled" title="Solution">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-22-contents" aria-controls="callout-22" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-22" class="callout-22-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>labelled<span class="sc">::</span><span class="fu">val_labels</span>(mil_data<span class="sc">$</span>gender)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                      Male                     Female 
                         0                          1 
                Non-binary Other (please state below) 
                         2                          3 </code></pre>
</div>
</div>
<p>The code for replacing this is <em>much</em> simpler manually…</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>labelled<span class="sc">::</span><span class="fu">val_label</span>(mil_data<span class="sc">$</span>gender, <span class="dv">3</span>) <span class="ot">&lt;-</span> <span class="st">"Other"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>But when has that ever stopped me?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>labelled<span class="sc">::</span><span class="fu">val_label</span>(mil_data<span class="sc">$</span>gender, <span class="dv">3</span>) <span class="ot">&lt;-</span> labelled<span class="sc">::</span><span class="fu">val_label</span>(mil_data<span class="sc">$</span>gender, <span class="dv">3</span>) <span class="sc">|&gt;</span> </span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gsub</span>(<span class="st">"(.*?) .*"</span>, <span class="st">"</span><span class="sc">\\</span><span class="st">1"</span>, <span class="at">x =</span> _)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="missing-values" class="level3">
<h3 class="anchored" data-anchor-id="missing-values">Missing Values</h3>
<p>Labelled data allows an extra functionality from SPSS, namely to create user-defined “missing” values. These missing values aren’t <em>actually</em> missing, in the sense that the participant didn’t respond at all. Rather, they might be missing in the sense that a participant selected an option like “don’t know”, “doesn’t apply”, “prefer not to say”, etc.</p>
<p>Let’s look at an example. As we’ve just seen, we can get out all the value labels in variable with <code>labelled::val_labels()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>labelled<span class="sc">::</span><span class="fu">val_labels</span>(mil_data<span class="sc">$</span>english_fluency_1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Very well       Well   Not well Not at all 
         1          2          3          4 </code></pre>
</div>
</div>
<p>This variable asked participants to indicate their level of English fluency. Even for participants who have in fact responded to this question, we may want to code “Not well” and “Not as all” as “missing” so that they can be excluded easily. To do this, we can use the function <code>labelled::na_values()</code> to indicate which values should be considered as missing.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>labelled<span class="sc">::</span><span class="fu">na_values</span>(mil_data<span class="sc">$</span>english_fluency_1) <span class="ot">&lt;-</span> <span class="dv">3</span><span class="sc">:</span><span class="dv">4</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>mil_data<span class="sc">$</span>english_fluency_1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;labelled_spss&lt;double&gt;[164]&gt;: Please select which box best describes your English fluency. - How well can you speak English?
  [1] 2 2 2 1 1 1 2 1 2 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 2 1 1 1
 [38] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 2 1 1 1 1 1 1 1 1 2 1 1 1 2 1 1 1 1 2 1 1 1
 [75] 1 1 1 2 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 2 1 1 1 2 1 1 1 1 1 1 2 2
[112] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 2 2 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
[149] 1 1 1 1 1 1 1 1 1 2 1 1 1 1 3 2
Missing values: 3, 4

Labels:
 value      label
     1  Very well
     2       Well
     3   Not well
     4 Not at all</code></pre>
</div>
</div>
<p>For the moment, these values are not actually <code>NA</code> in the data - they’re listed under “Missing Values” in the variable attributes. In other words, the actual responses are still retained. However, if we ask R which of the values in this variable are missing…</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.na</span>(mil_data<span class="sc">$</span>english_fluency_1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [13] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [25] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [37] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [49] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [61] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [73] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [85] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [97] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[109] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[121] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[133] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[145] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[157] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE</code></pre>
</div>
</div>
<p>…we can see one <code>TRUE</code> corresponding to the 3 above.</p>
<p>If we wanted to actually remove those values entirely and turn them into <code>NA</code>s for real, we could use <code>labelled::user_na_to_na()</code> for that purpose. Now, the variable has only two remaining values, and any 3s and 4s have been replaced.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>labelled<span class="sc">::</span><span class="fu">user_na_to_na</span>(mil_data<span class="sc">$</span>english_fluency_1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;labelled&lt;double&gt;[164]&gt;: Please select which box best describes your English fluency. - How well can you speak English?
  [1]  2  2  2  1  1  1  2  1  2  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1
 [26]  1  1  1  1  1  1  1  1  2  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1
 [51]  1  1  2  1  1  1  1  1  1  1  1  2  1  1  1  2  1  1  1  1  2  1  1  1  1
 [76]  1  1  2  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  2  1
[101]  1  1  2  1  1  1  1  1  1  2  2  1  1  1  1  1  1  1  1  1  1  1  1  1  1
[126]  1  1  1  2  2  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1
[151]  1  1  1  1  1  1  1  2  1  1  1  1 NA  2

Labels:
 value     label
     1 Very well
     2      Well</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>See the <a href="https://cran.r-project.org/web/packages/labelled/vignettes/intro_labelled.html">{labelled} vignette</a> for more help on working with user-defined NAs, including how to deal with them when converting to other types.</p>
</div>
</div>
</section>
</section>
<section id="converting-variables" class="level2">
<h2 class="anchored" data-anchor-id="converting-variables">Converting Variables</h2>
<p>The labels have served their purpose helping us navigate and clean up the dataset, and produce a lovely data dictionary for sharing. However, if we want to <em>use</em> the data, we’ll need to convert to other data types that we can use for statistical analysis.</p>
<p>This will fall into two main categories. Any variables containing numbers that we want to do maths with, we’ll convert to numeric type, which we’ve encountered a few times before, which will strip the labels. However, any variables that contain categorical data, we’ll instead convert to factors, which we haven’t encountered in this series yet - so we’ll start there. Remember that variables that will be converted to factor should have labels for all of their levels, whereas variables that will be converted to numeric can have fewer labels, because we will stop using them after the numeric conversion.</p>
<section id="factor" class="level3">
<h3 class="anchored" data-anchor-id="factor">Factor</h3>
<p>Factor variables are R’s way of representing categorical data, which have a fixed and known set of possible values. Thus far we’ve mostly been using character data for this purpose, but that’s a bit of a cheat - R’s been helping us by treating the same values as the same category, but factors create this structure explicitly.</p>
<p>As may be familiar from SPSS, factors actually contain two pieces of information for each observation: <em>levels</em> and <em>labels</em>. Levels are the (existing or possible) values that the variable contains, whereas labels are <em>very</em> similar to the labels we’ve just been exploring.</p>
<p>As an example, take an example factor vector:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">factor</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>),</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Male"</span>, <span class="st">"Female"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] Male   Female Male   Male   Female
Levels: Male Female</code></pre>
</div>
</div>
<p>The underlying values in the factor are numbers, here 1 and 2. The labels are applied to the values in ascending order of those values, so 1 becomes “Male”, “2” becomes “Female”, etc. Here, we haven’t need to specify the levels; if you don’t elaborate otherwise, R will assume that they are the same as the unique values.</p>
<p>You can also supply additional possible values, even if they haven’t been observed, using the <code>levels</code> argument:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">factor</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>),</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>),</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Male"</span>, <span class="st">"Female"</span>, <span class="st">"Non-binary"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] Male   Female Male   Male   Male  
Levels: Male Female Non-binary</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>Factors are so common and useful in R that they have a whole {tidyverse} package to themselves! You already installed {forcats} with {tidyverse}, but you can <a href="https://forcats.tidyverse.org/">check out the help documentation</a> if you’d like to learn more about working with factors.</p>
</div>
</div>
<p>The useful thing about labelled data that it’s very easy to convert into factors, which is what R expects for many different types of analysis and plotting functions. Handy!</p>
<p>For an individual variable, we can use <code>labelled::to_factor()</code> to convert to factor.</p>
<div class="callout callout-style-simple callout-note no-icon callout-titled" title="Exercise">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
</div>
<div class="callout-body-container callout-body">
<p>Convert the <code>gender</code> variable to factor, although don’t assign this change to the dataset.</p>
<div class="callout callout-style-default callout-note callout-titled" title="Solution">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-26-contents" aria-controls="callout-26" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-26" class="callout-26-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>mil_data <span class="sc">|&gt;</span> </span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">gender_fct =</span> labelled<span class="sc">::</span><span class="fu">to_factor</span>(gender),</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">.keep =</span> <span class="st">"used"</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["gender"],"name":[1],"type":["dbl+lbl"],"align":["right"]},{"label":["gender_fct"],"name":[2],"type":["fct"],"align":["left"]}],"data":[{"1":"1","2":"Female"},{"1":"1","2":"Female"},{"1":"1","2":"Female"},{"1":"1","2":"Female"},{"1":"2","2":"Non-binary"},{"1":"0","2":"Male"},{"1":"1","2":"Female"},{"1":"0","2":"Male"},{"1":"1","2":"Female"},{"1":"NA","2":"NA"},{"1":"1","2":"Female"},{"1":"1","2":"Female"},{"1":"1","2":"Female"},{"1":"1","2":"Female"},{"1":"0","2":"Male"},{"1":"1","2":"Female"},{"1":"1","2":"Female"},{"1":"NA","2":"NA"},{"1":"1","2":"Female"},{"1":"0","2":"Male"},{"1":"1","2":"Female"},{"1":"0","2":"Male"},{"1":"1","2":"Female"},{"1":"1","2":"Female"},{"1":"1","2":"Female"},{"1":"1","2":"Female"},{"1":"1","2":"Female"},{"1":"0","2":"Male"},{"1":"0","2":"Male"},{"1":"1","2":"Female"},{"1":"1","2":"Female"},{"1":"NA","2":"NA"},{"1":"1","2":"Female"},{"1":"1","2":"Female"},{"1":"1","2":"Female"},{"1":"1","2":"Female"},{"1":"1","2":"Female"},{"1":"NA","2":"NA"},{"1":"0","2":"Male"},{"1":"1","2":"Female"},{"1":"0","2":"Male"},{"1":"2","2":"Non-binary"},{"1":"1","2":"Female"},{"1":"0","2":"Male"},{"1":"NA","2":"NA"},{"1":"1","2":"Female"},{"1":"1","2":"Female"},{"1":"1","2":"Female"},{"1":"1","2":"Female"},{"1":"NA","2":"NA"},{"1":"3","2":"Other"},{"1":"NA","2":"NA"},{"1":"NA","2":"NA"},{"1":"1","2":"Female"},{"1":"NA","2":"NA"},{"1":"1","2":"Female"},{"1":"1","2":"Female"},{"1":"2","2":"Non-binary"},{"1":"0","2":"Male"},{"1":"1","2":"Female"},{"1":"1","2":"Female"},{"1":"1","2":"Female"},{"1":"1","2":"Female"},{"1":"NA","2":"NA"},{"1":"1","2":"Female"},{"1":"1","2":"Female"},{"1":"0","2":"Male"},{"1":"NA","2":"NA"},{"1":"1","2":"Female"},{"1":"1","2":"Female"},{"1":"0","2":"Male"},{"1":"0","2":"Male"},{"1":"0","2":"Male"},{"1":"1","2":"Female"},{"1":"1","2":"Female"},{"1":"1","2":"Female"},{"1":"1","2":"Female"},{"1":"1","2":"Female"},{"1":"1","2":"Female"},{"1":"1","2":"Female"},{"1":"1","2":"Female"},{"1":"1","2":"Female"},{"1":"NA","2":"NA"},{"1":"1","2":"Female"},{"1":"1","2":"Female"},{"1":"1","2":"Female"},{"1":"1","2":"Female"},{"1":"1","2":"Female"},{"1":"1","2":"Female"},{"1":"1","2":"Female"},{"1":"1","2":"Female"},{"1":"1","2":"Female"},{"1":"1","2":"Female"},{"1":"0","2":"Male"},{"1":"1","2":"Female"},{"1":"NA","2":"NA"},{"1":"NA","2":"NA"},{"1":"1","2":"Female"},{"1":"1","2":"Female"},{"1":"NA","2":"NA"},{"1":"1","2":"Female"},{"1":"1","2":"Female"},{"1":"0","2":"Male"},{"1":"1","2":"Female"},{"1":"0","2":"Male"},{"1":"1","2":"Female"},{"1":"NA","2":"NA"},{"1":"1","2":"Female"},{"1":"1","2":"Female"},{"1":"NA","2":"NA"},{"1":"NA","2":"NA"},{"1":"1","2":"Female"},{"1":"1","2":"Female"},{"1":"1","2":"Female"},{"1":"NA","2":"NA"},{"1":"1","2":"Female"},{"1":"1","2":"Female"},{"1":"0","2":"Male"},{"1":"1","2":"Female"},{"1":"1","2":"Female"},{"1":"1","2":"Female"},{"1":"1","2":"Female"},{"1":"0","2":"Male"},{"1":"0","2":"Male"},{"1":"NA","2":"NA"},{"1":"1","2":"Female"},{"1":"1","2":"Female"},{"1":"0","2":"Male"},{"1":"1","2":"Female"},{"1":"NA","2":"NA"},{"1":"1","2":"Female"},{"1":"1","2":"Female"},{"1":"1","2":"Female"},{"1":"1","2":"Female"},{"1":"0","2":"Male"},{"1":"1","2":"Female"},{"1":"1","2":"Female"},{"1":"0","2":"Male"},{"1":"1","2":"Female"},{"1":"1","2":"Female"},{"1":"1","2":"Female"},{"1":"1","2":"Female"},{"1":"1","2":"Female"},{"1":"1","2":"Female"},{"1":"0","2":"Male"},{"1":"0","2":"Male"},{"1":"1","2":"Female"},{"1":"1","2":"Female"},{"1":"NA","2":"NA"},{"1":"1","2":"Female"},{"1":"NA","2":"NA"},{"1":"1","2":"Female"},{"1":"0","2":"Male"},{"1":"1","2":"Female"},{"1":"1","2":"Female"},{"1":"0","2":"Male"},{"1":"2","2":"Non-binary"},{"1":"1","2":"Female"},{"1":"NA","2":"NA"},{"1":"0","2":"Male"},{"1":"0","2":"Male"},{"1":"1","2":"Female"},{"1":"NA","2":"NA"},{"1":"1","2":"Female"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<p>If you wanted a specific order of the levels, for plotting or similar, there’s also a <code>sort_levels =</code> argument described in the help documentation.</p>
</section>
<section id="numeric" class="level3">
<h3 class="anchored" data-anchor-id="numeric">Numeric</h3>
<p>For continuous variables, we don’t need anything fancy to turn them into numeric data, because they technically already are. Instead, we just need to get rid of the labels using <code>unclass()</code>.</p>
<div class="callout callout-style-simple callout-note no-icon callout-titled" title="Exercise">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
</div>
<div class="callout-body-container callout-body">
<p>Use <code>unclass()</code> to convert <code>belonging_1</code> to numeric, although don’t assign the change to the dataset.</p>
<div class="callout callout-style-default callout-note callout-titled" title="Solution">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-28-contents" aria-controls="callout-28" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-28" class="callout-28-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>This example shows both the conversion to numeric, and back to labelled with <code>labelled::labelled()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>mil_data <span class="sc">|&gt;</span> </span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">belonging_1_num =</span> <span class="fu">unclass</span>(belonging_1),</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">belonging_1_lab =</span> labelled<span class="sc">::</span><span class="fu">labelled</span>(belonging_1_num),</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">.keep =</span> <span class="st">"used"</span></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["belonging_1"],"name":[1],"type":["dbl+lbl"],"align":["right"]},{"label":["belonging_1_num"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["belonging_1_lab"],"name":[3],"type":["dbl+lbl"],"align":["right"]}],"data":[{"1":"6","2":"6","3":"6"},{"1":"4","2":"4","3":"4"},{"1":"7","2":"7","3":"7"},{"1":"2","2":"2","3":"2"},{"1":"6","2":"6","3":"6"},{"1":"5","2":"5","3":"5"},{"1":"5","2":"5","3":"5"},{"1":"2","2":"2","3":"2"},{"1":"6","2":"6","3":"6"},{"1":"5","2":"5","3":"5"},{"1":"1","2":"1","3":"1"},{"1":"6","2":"6","3":"6"},{"1":"5","2":"5","3":"5"},{"1":"7","2":"7","3":"7"},{"1":"1","2":"1","3":"1"},{"1":"6","2":"6","3":"6"},{"1":"2","2":"2","3":"2"},{"1":"NA","2":"NA","3":"NA"},{"1":"2","2":"2","3":"2"},{"1":"4","2":"4","3":"4"},{"1":"3","2":"3","3":"3"},{"1":"5","2":"5","3":"5"},{"1":"7","2":"7","3":"7"},{"1":"6","2":"6","3":"6"},{"1":"1","2":"1","3":"1"},{"1":"5","2":"5","3":"5"},{"1":"7","2":"7","3":"7"},{"1":"1","2":"1","3":"1"},{"1":"2","2":"2","3":"2"},{"1":"6","2":"6","3":"6"},{"1":"2","2":"2","3":"2"},{"1":"NA","2":"NA","3":"NA"},{"1":"5","2":"5","3":"5"},{"1":"2","2":"2","3":"2"},{"1":"2","2":"2","3":"2"},{"1":"2","2":"2","3":"2"},{"1":"5","2":"5","3":"5"},{"1":"NA","2":"NA","3":"NA"},{"1":"3","2":"3","3":"3"},{"1":"2","2":"2","3":"2"},{"1":"7","2":"7","3":"7"},{"1":"5","2":"5","3":"5"},{"1":"1","2":"1","3":"1"},{"1":"3","2":"3","3":"3"},{"1":"NA","2":"NA","3":"NA"},{"1":"1","2":"1","3":"1"},{"1":"7","2":"7","3":"7"},{"1":"5","2":"5","3":"5"},{"1":"4","2":"4","3":"4"},{"1":"5","2":"5","3":"5"},{"1":"1","2":"1","3":"1"},{"1":"NA","2":"NA","3":"NA"},{"1":"NA","2":"NA","3":"NA"},{"1":"4","2":"4","3":"4"},{"1":"NA","2":"NA","3":"NA"},{"1":"6","2":"6","3":"6"},{"1":"6","2":"6","3":"6"},{"1":"1","2":"1","3":"1"},{"1":"7","2":"7","3":"7"},{"1":"3","2":"3","3":"3"},{"1":"6","2":"6","3":"6"},{"1":"5","2":"5","3":"5"},{"1":"5","2":"5","3":"5"},{"1":"NA","2":"NA","3":"NA"},{"1":"7","2":"7","3":"7"},{"1":"6","2":"6","3":"6"},{"1":"1","2":"1","3":"1"},{"1":"5","2":"5","3":"5"},{"1":"1","2":"1","3":"1"},{"1":"2","2":"2","3":"2"},{"1":"6","2":"6","3":"6"},{"1":"1","2":"1","3":"1"},{"1":"2","2":"2","3":"2"},{"1":"6","2":"6","3":"6"},{"1":"4","2":"4","3":"4"},{"1":"1","2":"1","3":"1"},{"1":"4","2":"4","3":"4"},{"1":"2","2":"2","3":"2"},{"1":"5","2":"5","3":"5"},{"1":"2","2":"2","3":"2"},{"1":"6","2":"6","3":"6"},{"1":"5","2":"5","3":"5"},{"1":"NA","2":"NA","3":"NA"},{"1":"6","2":"6","3":"6"},{"1":"5","2":"5","3":"5"},{"1":"5","2":"5","3":"5"},{"1":"1","2":"1","3":"1"},{"1":"5","2":"5","3":"5"},{"1":"1","2":"1","3":"1"},{"1":"1","2":"1","3":"1"},{"1":"7","2":"7","3":"7"},{"1":"4","2":"4","3":"4"},{"1":"7","2":"7","3":"7"},{"1":"4","2":"4","3":"4"},{"1":"5","2":"5","3":"5"},{"1":"NA","2":"NA","3":"NA"},{"1":"NA","2":"NA","3":"NA"},{"1":"6","2":"6","3":"6"},{"1":"5","2":"5","3":"5"},{"1":"NA","2":"NA","3":"NA"},{"1":"6","2":"6","3":"6"},{"1":"6","2":"6","3":"6"},{"1":"4","2":"4","3":"4"},{"1":"6","2":"6","3":"6"},{"1":"2","2":"2","3":"2"},{"1":"5","2":"5","3":"5"},{"1":"7","2":"7","3":"7"},{"1":"6","2":"6","3":"6"},{"1":"6","2":"6","3":"6"},{"1":"NA","2":"NA","3":"NA"},{"1":"NA","2":"NA","3":"NA"},{"1":"6","2":"6","3":"6"},{"1":"1","2":"1","3":"1"},{"1":"5","2":"5","3":"5"},{"1":"NA","2":"NA","3":"NA"},{"1":"1","2":"1","3":"1"},{"1":"6","2":"6","3":"6"},{"1":"6","2":"6","3":"6"},{"1":"6","2":"6","3":"6"},{"1":"7","2":"7","3":"7"},{"1":"1","2":"1","3":"1"},{"1":"2","2":"2","3":"2"},{"1":"2","2":"2","3":"2"},{"1":"4","2":"4","3":"4"},{"1":"3","2":"3","3":"3"},{"1":"6","2":"6","3":"6"},{"1":"5","2":"5","3":"5"},{"1":"6","2":"6","3":"6"},{"1":"2","2":"2","3":"2"},{"1":"NA","2":"NA","3":"NA"},{"1":"6","2":"6","3":"6"},{"1":"6","2":"6","3":"6"},{"1":"7","2":"7","3":"7"},{"1":"5","2":"5","3":"5"},{"1":"2","2":"2","3":"2"},{"1":"5","2":"5","3":"5"},{"1":"6","2":"6","3":"6"},{"1":"5","2":"5","3":"5"},{"1":"6","2":"6","3":"6"},{"1":"2","2":"2","3":"2"},{"1":"4","2":"4","3":"4"},{"1":"7","2":"7","3":"7"},{"1":"1","2":"1","3":"1"},{"1":"2","2":"2","3":"2"},{"1":"6","2":"6","3":"6"},{"1":"3","2":"3","3":"3"},{"1":"5","2":"5","3":"5"},{"1":"6","2":"6","3":"6"},{"1":"NA","2":"NA","3":"NA"},{"1":"5","2":"5","3":"5"},{"1":"NA","2":"NA","3":"NA"},{"1":"6","2":"6","3":"6"},{"1":"6","2":"6","3":"6"},{"1":"5","2":"5","3":"5"},{"1":"3","2":"3","3":"3"},{"1":"2","2":"2","3":"2"},{"1":"4","2":"4","3":"4"},{"1":"5","2":"5","3":"5"},{"1":"NA","2":"NA","3":"NA"},{"1":"1","2":"1","3":"1"},{"1":"5","2":"5","3":"5"},{"1":"3","2":"3","3":"3"},{"1":"NA","2":"NA","3":"NA"},{"1":"1","2":"1","3":"1"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<p>The nice thing about this method is that we can now do maths with the unclassed numeric functions as normal, but the labels are still there if we want to get back - just convert with <code>labelled::labelled()</code>.</p>
</section>
<section id="conditional-conversion" class="level3">
<h3 class="anchored" data-anchor-id="conditional-conversion">Conditional Conversion</h3>
<p>There are two main ways we could more efficiently convert variables than one by one. The first is offered by the {labelled} package - here I’ve just copied from the vignette describing the setup.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>In most of cases, if data documentation was properly done, categorical variables corresponds to vectors where all observed values have a value label while vectors where only few values have a value label should be considered as continuous.</p>
<p>In that situation, you could apply the <code>unlabelled()</code> method to an overall data frame. By default, <code>unlabelled()</code> works as follows:</p>
<ul>
<li>if a column doesn’t inherit the <code>haven_labelled</code> class, it will be not affected;</li>
<li>if all observed values have a corresponding value label, the column will be converted into a factor (using <code>to_factor()</code>);</li>
<li>otherwise, the column will be unclassed (and converted back to a numeric or character vector by applying <code>base::unclass()</code>).</li>
</ul>
</div>
</div>
<p>If we wanted to do this, we’d have a bit more work to do. That’s because at the moment, our data doesn’t line up with this template. Having a look at our data dictionary again, we can see that our subscale variables have all of their levels labelled, so they won’t be converted as we’d like. Rather than do this now, I’d probably recommend setting up your Qualtrics like this to begin with.</p>
<p>Instead, we can take the second route and use what we’ve seen in previous Challenge tasks to convert variables conditionally.</p>
<div class="callout callout-style-simple callout-note no-icon callout-titled" title="Exercise">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>CHALLENGE</strong>: Convert categorical variables with labels to factors, and subscale variables to numeric.</p>
<p><em>Hint</em>: Have a look back at <code>dplyr::across()</code> for efficient selecting and applying.</p>
<div class="callout callout-style-default callout-note callout-titled" title="Solution">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-31-contents" aria-controls="callout-31" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-31" class="callout-31-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-42"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><a class="code-annotation-anchor" data-target-cell="annotated-cell-42" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-42-1" class="code-annotation-target"><a href="#annotated-cell-42-1" aria-hidden="true" tabindex="-1"></a>mil_data <span class="ot">&lt;-</span> mil_data <span class="sc">|&gt;</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-42" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-42-2" class="code-annotation-target"><a href="#annotated-cell-42-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-42" data-target-annotation="3" onclick="event.preventDefault();">3</a><span id="annotated-cell-42-3" class="code-annotation-target"><a href="#annotated-cell-42-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(global_meaning_1<span class="sc">:</span><span class="fu">last_col</span>(),</span>
<span id="annotated-cell-42-4"><a href="#annotated-cell-42-4" aria-hidden="true" tabindex="-1"></a>           unclass),</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-42" data-target-annotation="4" onclick="event.preventDefault();">4</a><span id="annotated-cell-42-5" class="code-annotation-target"><a href="#annotated-cell-42-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(<span class="fu">c</span>(english_fluency_1, gender),</span>
<span id="annotated-cell-42-6"><a href="#annotated-cell-42-6" aria-hidden="true" tabindex="-1"></a>           labelled<span class="sc">::</span>to_factor)</span>
<span id="annotated-cell-42-7"><a href="#annotated-cell-42-7" aria-hidden="true" tabindex="-1"></a>  )</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-42" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-42" data-code-lines="1" data-code-annotation="1">Overwrite <code>mil_data</code> by taking the existing dataset <code>mil_data</code>, <em>and then</em></span>
</dd>
<dt data-target-cell="annotated-cell-42" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-42" data-code-lines="2" data-code-annotation="2">Change it as follows:</span>
</dd>
<dt data-target-cell="annotated-cell-42" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-42" data-code-lines="3,4" data-code-annotation="3">Across all the variables from <code>global_meaning_1</code> through the last column, convert to numeric</span>
</dd>
<dt data-target-cell="annotated-cell-42" data-target-annotation="4">4</dt>
<dd>
<span data-code-cell="annotated-cell-42" data-code-lines="5,6" data-code-annotation="4">Across the variables <code>english_fluency_1</code> and <code>gender</code>, convert to factor.</span>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<p>&nbsp;</p>
<p>Very well done today. You should now have a data dictionary to refer to, and a complete dataset to work with using the techniques we’ve already covered to clean up responses, create subscales, and so on. Next time we’ll work on solving common issues and avoiding those issues in the first place by setting things up right to begin with.</p>
<!-- This last exercise is a doozy, and I'm not going to give you much help with it. However, if you've got some spare time and you're keen to produce clean, beautiful, final data dictionaries...read on. -->


</section>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>For the purposes of simplicity, we’re going to keep pretending that Likert and similar rating scales are “continuous”.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
<p>© Jennifer Mankin 2024</p>
</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>